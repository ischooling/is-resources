!function(t,e,n){"use strict";t.fn.simpleLightbox=function(i){i=t.extend({sourceAttr:"href",overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",close:!0,closeText:"Ã—",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0},i),e.navigator.pointerEnabled||e.navigator.msPointerEnabled;var a,o,s=0,r=0,l=t(),c=function(){var t=n.body||n.documentElement;return""===(t=t.style).WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},d=!1,p=[],h=i.rel&&!1!==i.rel?(o=i.rel,t(this).filter((function(){return t(this).attr("rel")===o}))):this,g=(c=c(),0),u=!1!==c,f="pushState"in history,m=!1,v=e.location,x=function(){return v.hash.substring(1)},b=x(),y=function(){x();var t="pid="+(D+1),e=v.href.split("#")[0]+"#"+t;f?history[m?"replaceState":"pushState"]("",n.title,e):m?v.replace(e):v.hash=t,m=!0},w=function(t,e){var n;return function(){var i=arguments;n||(t.apply(this,i),n=!0,setTimeout((function(){return n=!1}),e))}},T="simplelb",E=t("<div>").addClass("sl-overlay"),C=t("<button>").addClass("sl-close").html(i.closeText),S=t("<div>").addClass("sl-spinner").html("<div></div>"),I=t("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+i.navText[0]+'</button><button class="sl-next">'+i.navText[1]+"</button>"),k=t("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),q=!1,D=0,M=0,R=t("<div>").addClass("sl-caption "+i.captionClass+" pos-"+i.captionPosition),A=t("<div>").addClass("sl-image"),O=t("<div>").addClass("sl-wrapper").addClass(i.className),W=function(e){e.trigger(t.Event("show.simplelightbox")),i.disableScroll&&(g=j("hide")),O.appendTo("body"),A.appendTo(O),i.overlay&&E.appendTo(t("body")),q=!0,D=h.index(e),l=t("<img/>").hide().attr("src",e.attr(i.sourceAttr)),-1==p.indexOf(e.attr(i.sourceAttr))&&p.push(e.attr(i.sourceAttr)),A.html("").attr("style",""),l.appendTo(A),L(),E.fadeIn("fast"),t(".sl-close").fadeIn("fast"),S.show(),I.fadeIn("fast"),t(".sl-wrapper .sl-counter .sl-current").text(D+1),k.fadeIn("fast"),P(),i.preloading&&X(),setTimeout((function(){e.trigger(t.Event("shown.simplelightbox"))}),i.animationSpeed)},P=function(n){if(l.length){var o=new Image,s=e.innerWidth*i.widthRatio,r=e.innerHeight*i.heightRatio;o.src=l.attr("src"),t(o).on("error",(function(e){h.eq(D).trigger(t.Event("error.simplelightbox")),d=!(q=!1),S.hide();var a=1==n||-1==n;M===D&&a?Y():(i.alertError&&alert(i.alertErrorMessage),N(a?n:1))})),o.onload=function(){void 0!==n&&h.eq(D).trigger(t.Event("changed.simplelightbox")).trigger(t.Event((1===n?"nextDone":"prevDone")+".simplelightbox")),i.history&&(m?a=setTimeout(y,800):y()),-1==p.indexOf(l.attr("src"))&&p.push(l.attr("src"));var c=o.width,f=o.height;if(i.scaleImageToRatio||s<c||r<f){var v=s/r<c/f?c/s:f/r;c/=v,f/=v}t(".sl-image").css({top:(e.innerHeight-f)/2+"px",left:(e.innerWidth-c-g)/2+"px"}),S.hide(),l.css({width:c+"px",height:f+"px"}).fadeIn("fast"),d=!0;var x,b="self"==i.captionSelector?h.eq(D):h.eq(D).find(i.captionSelector);if(x="data"==i.captionType?b.data(i.captionsData):"text"==i.captionType?b.html():b.prop(i.captionsData),i.loop||(0===D&&t(".sl-prev").hide(),D>=h.length-1&&t(".sl-next").hide(),0<D&&t(".sl-prev").show(),D<h.length-1&&t(".sl-next").show()),1==h.length&&t(".sl-prev, .sl-next").hide(),1==n||-1==n){var w={opacity:1};i.animationSlide&&(u?(H(0,100*n+"px"),setTimeout((function(){H(i.animationSpeed/1e3,"0px")}),50)):w.left=parseInt(t(".sl-image").css("left"))+100*n+"px"),t(".sl-image").animate(w,i.animationSpeed,(function(){q=!1,z(x,c)}))}else q=!1,z(x,c);i.additionalHtml&&0===t(".sl-additional-html").length&&t("<div>").html(i.additionalHtml).addClass("sl-additional-html").appendTo(t(".sl-image"))}}},z=function(e,n){""!==e&&void 0!==e&&i.captions&&R.html(e).css({width:n+"px"}).hide().appendTo(t(".sl-image")).delay(i.captionDelay).fadeIn("fast")},H=function(e,n){var i={};i[c+"transform"]="translateX("+n+")",i[c+"transition"]=c+"transform "+e+"s linear",t(".sl-image").css(i)},L=function(){t(e).on("resize."+T,P),t(n).on("click."+T+" touchstart."+T,".sl-close",(function(t){t.preventDefault(),d&&Y()})),i.history&&setTimeout((function(){t(e).on("hashchange."+T,(function(){d&&x()===b&&Y()}))}),40),I.on("click."+T,"button",w((function(e){e.preventDefault(),s=0,N(t(this).hasClass("sl-next")?1:-1)}),i.throttleInterval));var a=0,o=0,l=0,c=0,p=!1,g=0;A.on("touchstart."+T+" mousedown."+T,(function(t){return!!p||(u&&(g=parseInt(A.css("left"))),p=!0,r=s=0,a=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,l=t.originalEvent.pageY||t.originalEvent.touches[0].pageY,!1)})).on("touchmove."+T+" mousemove."+T+" pointermove MSPointerMove",(function(t){if(!p)return!0;t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,c=t.originalEvent.pageY||t.originalEvent.touches[0].pageY,s=a-o,r=l-c,i.animationSlide&&(u?H(0,-s+"px"):A.css("left",g-s+"px"))})).on("touchend."+T+" mouseup."+T+" touchcancel."+T+" mouseleave."+T+" pointerup pointercancel MSPointerUp MSPointerCancel",(function(t){if(p){var e=!(p=!1);i.loop||(0===D&&s<0&&(e=!1),D>=h.length-1&&0<s&&(e=!1)),Math.abs(s)>i.swipeTolerance&&e?N(0<s?1:-1):i.animationSlide&&(u?H(i.animationSpeed/1e3,"0px"):A.animate({left:g+"px"},i.animationSpeed/2)),i.swipeClose&&50<Math.abs(r)&&Math.abs(s)<i.swipeTolerance&&Y()}}))},X=function(){var e=D+1<0?h.length-1:D+1>=h.length-1?0:D+1,n=D-1<0?h.length-1:D-1>=h.length-1?0:D-1;t("<img />").attr("src",h.eq(e).attr(i.sourceAttr)).on("load",(function(){-1==p.indexOf(t(this).attr("src"))&&p.push(t(this).attr("src")),h.eq(D).trigger(t.Event("nextImageLoaded.simplelightbox"))})),t("<img />").attr("src",h.eq(n).attr(i.sourceAttr)).on("load",(function(){-1==p.indexOf(t(this).attr("src"))&&p.push(t(this).attr("src")),h.eq(D).trigger(t.Event("prevImageLoaded.simplelightbox"))}))},N=function(e){h.eq(D).trigger(t.Event("change.simplelightbox")).trigger(t.Event((1===e?"next":"prev")+".simplelightbox"));var n=D+e;if(!(q||(n<0||n>=h.length)&&!1===i.loop)){D=n<0?h.length-1:n>h.length-1?0:n,t(".sl-wrapper .sl-counter .sl-current").text(D+1);var a={opacity:0};i.animationSlide&&(u?H(i.animationSpeed/1e3,-100*e-s+"px"):a.left=parseInt(t(".sl-image").css("left"))+-100*e+"px"),t(".sl-image").animate(a,i.animationSpeed,(function(){setTimeout((function(){var n=h.eq(D);l.attr("src",n.attr(i.sourceAttr)),-1==p.indexOf(n.attr(i.sourceAttr))&&S.show(),t(".sl-caption").remove(),P(e),i.preloading&&X()}),100)}))}},Y=function(){if(!q){var o=h.eq(D),s=!1;o.trigger(t.Event("close.simplelightbox")),i.history&&(f?history.pushState("",n.title,v.pathname+v.search):v.hash="",clearTimeout(a)),t(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",(function(){i.disableScroll&&j("show"),t(".sl-wrapper, .sl-overlay").remove(),I.off("click","button"),t(n).off("click."+T,".sl-close"),t(e).off("resize."+T),t(e).off("hashchange."+T),s||o.trigger(t.Event("closed.simplelightbox")),s=!0})),l=t(),q=d=!1}},j=function(i){var a=0;if("hide"==i){var o=e.innerWidth;if(!o){var s=n.documentElement.getBoundingClientRect();o=s.right-Math.abs(s.left)}if(n.body.clientWidth<o){var r=n.createElement("div"),l=parseInt(t("body").css("padding-right"),10);r.className="sl-scrollbar-measure",t("body").append(r),a=r.offsetWidth-r.clientWidth,t(n.body)[0].removeChild(r),t("body").data("padding",l),0<a&&t("body").addClass("hidden-scroll").css({"padding-right":l+a})}}else t("body").removeClass("hidden-scroll").css({"padding-right":t("body").data("padding")});return a};return i.close&&C.appendTo(O),i.showCounter&&1<h.length&&(k.appendTo(O),k.find(".sl-total").text(h.length)),i.nav&&I.appendTo(O),i.spinner&&S.appendTo(O),h.on("click."+T,(function(e){if(function(e){if(!i.fileExt)return!0;var n=t(e).attr(i.sourceAttr).match(/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/gim);return n&&"a"==t(e).prop("tagName").toLowerCase()&&new RegExp(".("+i.fileExt+")$","i").test(n)}(this)){if(e.preventDefault(),q)return!1;var n=t(this);M=h.index(n),W(n)}})),t(n).on("click."+T+" touchstart."+T,(function(e){d&&i.docClose&&0===t(e.target).closest(".sl-image").length&&0===t(e.target).closest(".sl-navigation").length&&Y()})),i.disableRightClick&&t(n).on("contextmenu",".sl-image img",(function(t){return!1})),i.enableKeyboard&&t(n).on("keyup."+T,w((function(t){s=0;var e=t.keyCode;q&&27==e&&(l.attr("src",""),q=!1,Y()),d&&(t.preventDefault(),27==e&&Y(),37!=e&&39!=t.keyCode||N(39==t.keyCode?1:-1))}),i.throttleInterval)),this.open=function(e){e=e||t(this[0]),M=h.index(e),W(e)},this.next=function(){N(1)},this.prev=function(){N(-1)},this.close=function(){Y()},this.destroy=function(){t(n).off("click."+T).off("keyup."+T),Y(),t(".sl-overlay, .sl-wrapper").remove(),this.off("click")},this.refresh=function(){this.destroy(),t(this).simpleLightbox(i)},this}}(jQuery,window,document);