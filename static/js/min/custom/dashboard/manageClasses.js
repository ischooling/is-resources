function advanceClassroomSearch(e,t,a,s){if(checkTextBox(e),""==$("#"+e+" #classStartDate").val()&&""!=$("#"+e+" #classEndDate").val())return"theme1"==tt?showMessage(!1,"Please select start date"):showMessageTheme2(0,"Please select start date","",!0),!1;if(""!=$("#"+e+" #classStartDate").val()&&""==$("#"+e+" #classEndDate").val())return"theme1"==tt?showMessage(!1,"Please select end date"):showMessageTheme2(0,"Please select end date","",!0),!1;var o="?moduleId="+t+"&schoolId="+SCHOOL_ID+"&"+decodeURIComponent($("#"+e).serialize());console.log(o),classroomSessionsData("classroomSessionsList",o,a,s)}function classroomSessionsData(e,t,a,s){customLoader(!0);var o=parseUrlToJson(t);$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/student-teacher-sessions-report-data/"+UNIQUEUUID,data:JSON.stringify(o),dataType:"json",global:!1,success:function(t){($("#"+e+" > tbody").html(""),"0"==t.status||"2"==t.status||"3"==t.status)?"3"==t.status?redirectLoginPage():"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0):($("#manageSessionContentDiv").html(manageClassroomTable(e,s)),$("#"+e+" > tbody").append(getClassroomBody(t.sessions,a,s,t.resetMeetingRights)),$.fn.dataTable.isDataTable("#"+e)&&$("#"+e).dataTable().fnDestroy(),$("#"+e).DataTable());return customLoader(!1),!1},error:function(e){return!!checkonlineOfflineStatus()&&void 0}}),bindHover()}function classroomSessionsForOther(e,t){$.fn.dataTable.isDataTable("#"+e)&&$("#"+e).dataTable().fnDestroy(),$("#"+e).DataTable({stateSave:!0,searching:!0,processing:!0,serverSide:!0,pagingType:"full",searching:!0,pageLength:10,stateLoadParams:function(e,t){if(!DEFAULT_SEARCH_STATE)return!1},ajax:{url:CONTEXT_PATH+UNIQUEUUID+"/dashboard/student-teacher-sessions-report-data"+t,data:function(e){console.log("data "+e)}},fnRowCallback:function(e,t,a,s){$(e).find("td:eq(3)").css("text-align","left"),$(e).find("td:eq(4)").css("text-align","left"),$(e).find("td:eq(5)").css("text-align","left")},columns:[{data:"sno",name:"sno",title:"S. No"},{data:"subjectName",name:"subjectName",title:"Course Name"},{data:"teacherName",name:"teacherName",title:"Teacher Details"},{data:"studentName",name:"studentName",title:"Student Details"},{data:"studentDateTime",name:"studentDateTime",title:"Student Time Zone"},{data:"teacherDateTime",name:"teacherTimeZone",title:"Teacher Time Zone"},{data:"adminDateTime",name:"adminDateTime",title:"Admin Time Zone"},{data:"recordingUrl",name:"recordingUrl",title:"Join/View Class"},{data:"attendeeStatus",name:"attendeeStatus",title:"Link Generation Status"},{data:"sessionLink",name:"sessionLink",title:"Class Link"},{data:"sendMail",name:"sendMail",title:"Send Mail"},{data:"markSession",name:"markSession",title:"Mark Session"},{data:"status",name:"status",title:"Session Status"},{data:"createdDate",name:"createdDate",title:"Created Date / Booked Date"}]}),$("#"+e).dataTable().fnSetFilteringEnterPress(),bindHover()}function extraSessionDetails(e,t){$.fn.dataTable.isDataTable("#"+e)&&$("#"+e).dataTable().fnDestroy(),$("#"+e).DataTable({stateSave:!0,searching:!0,processing:!0,serverSide:!0,pagingType:"full",searching:!0,pageLength:10,stateLoadParams:function(e,t){if(!DEFAULT_SEARCH_STATE)return!1},ajax:{url:CONTEXT_PATH+UNIQUEUUID+"/dashboard/extra-session-details-data"+t,data:function(e){console.log("data "+e)}},fnRowCallback:function(e,t,a,s){$(e).find("td:eq(3)").css("text-align","left"),$(e).find("td:eq(4)").css("text-align","left"),$(e).find("td:eq(5)").css("text-align","left")},columns:[{data:"sno",name:"sno",title:"S. No"},{data:"studentName",name:"studentName",title:"Student Name"},{data:"studentStringId",name:"studentStringId",title:"Student ID"},{data:"email",name:"email",title:"Email"},{data:"grade",name:"grade",title:"Grade"},{data:"referenceNo",name:"referenceNo",title:"Transaction Reference no"},{data:"paymentDate",name:"paymentDate",title:"Payment Date"},{data:"totalAmount",name:"totalAmount",title:"Total Amount"},{data:"courseDetails",name:"courseDetails",title:"Course PlanDetails"}]}),$("#"+e).dataTable().fnSetFilteringEnterPress(),bindHover()}function toggleFilter(e){$("#"+e).stop().slideToggle()}function saveClassroomSessionMeetingUrl(e,t){submitMeetingForStudentSessionSlots("meetingUrlForm","SCHOOL","ADDURL",e,"STUDENT_DOUBT_SESSION",t)}function sendClassroomSessionMail(e,t){submitMeetingForStudentSessionSlots("sendMailForm","SCHOOL","SENDMAIL",e,"STUDENT_DOUBT_SESSION",t)}function publishClassroomSession(e,t){submitMeetingForStudentSessionSlots("publishRecordForm","SCHOOL","PUBLISH_RECORD",e,"STUDENT_DOUBT_SESSION",t)}function revokeClassroomSession(e,t){submitMeetingForStudentSessionSlots("revokeForm","SCHOOL","REVOKE",e,"STUDENT_DOUBT_SESSION",t)}function updateClassroomSession(e,t){"N/A"==$("#meetingResult").val()||""==$("#meetingResult").val()?showMessage(!0,"Please Choose Mark Session"):submitMeetingForStudentSessionSlots("updateMeetingResultForm","SCHOOL","UPDATE",e,"STUDENT_DOUBT_SESSION",t)}function validateRequestForSubmitMeetingForStudentSessionSlots(e,t,a){if("UPDATE"==a){if(""==$("#meetingResult").val()||null==$("#meetingResult").val())return showMessage(!0,"Session Status is required"),!1}else if("ADDURL"==a&&(""==$("#meetingUrl").val()||null==$("#meetingUrl").val()))return showMessage(!0,"Class Link is required"),!1;return!0}function submitMeetingForStudentSessionSlots(e,t,a,s,o,n){if($(".meetingSave").prop("disabled",!0),hideMessage(""),!validateRequestForSubmitMeetingForStudentSessionSlots(e,t,a))return $(".meetingSave").prop("disabled",!0),!0;$.ajax({type:"POST",contentType:"application/json",url:getURLFor("dashboard","meetingslots-new-submit"),data:JSON.stringify(getRequestForSubmitMeetingForStudentSessionSlots(e,t,a,o)),dataType:"json",success:function(t){if("0"==t.status||"2"==t.status)$(".meetingSave").prop("disabled",!1),showMessage(!0,t.message);else if(showMessage(!1,t.message),"COUNSELORMEET"==o)"ADD"==a?(showMessage(!1,t.message),$("#teacherMeetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"counselor-meet-slot","","?moduleId="+s+"&requestType="+o)}),1e3)):"EDIT"==a&&(showMessage(!1,t.message),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"counselor-meet-slot","","?moduleId="+s+"&requestType="+o)}),1e3)),$("body").removeClass("modal-open");else if("REQUESTDEMO"==o)"ADD"==a?(showMessage(!1,t.message),$("#teacherMeetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"student-meet-slot","","?moduleId="+s+"&requestType="+o)}),1e3)):"EDIT"==a&&(showMessage(!1,t.message),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"student-meet-slot","","?moduleId="+s+"&requestType="+o)}),1e3)),$("body").removeClass("modal-open");else if("CONNECTMEET"==o)"ADD"==a?(showMessage(!1,t.message),$("#teacherMeetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"Connect-to-impact-slot","","?moduleId="+s+"&requestType="+o)}),1e3)):"EDIT"==a&&(showMessage(!1,t.message),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"Connect-to-impact-slot","","?moduleId="+s+"&requestType="+o)}),1e3)),$("body").removeClass("modal-open");else if("ADD"==a)$("#teacherMeetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(s,"create-manage-sessions","")}),1e3);else if("UPDATE"==a){meetingId=$("#updateMeetingResultForm #meetingId").val(),userId=$("#updateMeetingResultForm #userId").val(),meetingCurStatus=$("#updateMeetingResultForm #meetingCurStatus").val(),meetingResult=$("#updateMeetingResultForm #meetingResult").val();var i='<a id="updateStatus'+meetingId+'" href="javascript:void(0);" onclick="meetingResultModal('+meetingId+","+userId+",'"+meetingResult+"','"+meetingCurStatus+"','"+n+"')\">Change</a>";meetingResult="<strong>"+meetingResult+"</strong><br/>","TEACHER"!=n&&(meetingResult+=" | ",meetingResult+=i),$(".markSession"+meetingId).html(meetingResult),$("#updateMeetingResultModal").modal("toggle"),$("#"+e)[0].reset()}else if("ADDURL"==a){meetingId=$("#meetingUrlForm #meetingId").val(),mailSendStatus=$("#meetingUrlForm #mailSendStatus").val(),userId=$("#meetingUrlForm #userId").val(),meetingUrl=$("#meetingUrlForm #meetingUrl").val(),remarks=$("#meetingUrlForm #remarks").val();var l='<a id="joinClass'+meetingId+'" href="'+meetingUrl+'" target="_blank"><i data-toggle="tooltip" title="Join class" class="fa fa-video-camera"></i></a>',r='<a id="_createLink'+meetingId+'" href="javascript:void(0);" onclick="meetingUrlModalTeacher('+meetingId+","+userId+",'"+meetingUrl+"','"+mailSendStatus+"','"+remarks+'\')"><i data-toggle="tooltip" title="View Comments" class="fa fa-eye"></i></a>';$(".linkStatus"+meetingId).html("External Link Added"),$(".joinView"+meetingId).html(l+" | "+r);var m='<a id="sendMail'+meetingId+'" href="javascript:void(0);" onclick="sendMailModel('+meetingId+","+userId+",'"+meetingUrl+'\',\'N\')"><i data-toggle="tooltip" title="Send Mail" class="fa fa-paper-plane"></i></a>';$(".classAction"+meetingId).html(m+" | "+$(".classAction"+meetingId).html()),$("#meetingUrlModal").modal("toggle"),$("#"+e)[0].reset()}else"SENDMAIL"==a?(meetingId=$("#sendMailForm #meetingId").val(),userId=$("#sendMailForm #userId").val(),$("#updateStatus"+meetingId).before('<i data-toggle="tooltip" title="Mail Already Sent" class="fa fa-check"></i>|'),$("#updateStatus"+meetingId).html('<i data-toggle="tooltip" title="ReSend Mail" class="fa fa-paper-plane"></i>'),$("#sendMailModal").modal("toggle"),$("#"+e)[0].reset()):"PUBLISH_RECORD"==a?($("#publishRecordModal").modal("toggle"),$("#"+e)[0].reset()):"REVOKE"==a?($("#revokeModal").modal("toggle"),$("#"+e)[0].reset()):"RESET"==a&&setTimeout((function(){callDashboardPageSchool(s,"student-teacher-sessions")}),1e3);return!1}})}function getRequestForSubmitMeetingForStudentSessionSlots(e,t,a,s){var o={},n={},i={},l=[];return"ADD"==a?$("#"+e+" .slotDate").each((function(){var t=[];meetingSlotDTO={},meetingSlotDTO.meetingType=s,meetingSlotDTO.timezone=$("#"+e+" #timeZoneId").val(),meetingSlotDTO.weekCount=$("#"+e+" #weekCount").val(),meetingSlotDTO.inActDate=$("#"+e+" #inActDate").val(),meetingSlotDTO.dateCategory=$("#"+e+" #dateCategory").val(),$("#"+e+" #slotCtFor").length>0&&(meetingSlotDTO.slotCtFor=$("#"+e+" #slotCtFor").val().trim());var a=$(this).attr("data-text");a=a.split("-"),meetingDate=a[2]+"-"+a[0]+"-"+a[1],meetingSlotDTO.meetingDate=meetingDate,meetingSlotDTO.subject=s,$("#"+e+" .slotTime"+$(this).attr("id")).each((function(){enabledTimeSlots={},enabledTimeSlots.dayTime1=$(this).attr("data-starttime"),enabledTimeSlots.dayTime2=$(this).attr("data-endtime"),t.push(enabledTimeSlots)})),meetingSlotDTO.enabledTimeSlotsDTO=t,l.push(meetingSlotDTO)})):"UPDATE"==a?(meetingSlotDTO={},meetingSlotDTO.controllType=a,meetingSlotDTO.meetingType="STUDENT_DOUBT_SESSION",meetingSlotDTO.meetingId=$("#"+e+" #meetingId").val().trim(),meetingSlotDTO.meetingResult=$("#"+e+" #meetingResult option:selected").val().trim(),meetingSlotDTO.userType=t,l.push(meetingSlotDTO)):"ADDURL"==a?(meetingSlotDTO={},meetingSlotDTO.controllType=a,meetingSlotDTO.meetingType="STUDENT_DOUBT_SESSION",meetingSlotDTO.meetingId=$("#"+e+" #meetingId").val().trim(),meetingSlotDTO.meetingUrl=$("#"+e+" #meetingUrl").val().trim(),meetingSlotDTO.urlRemarks=escapeCharacters($("#"+e+" #remarks").val().trim()),meetingSlotDTO.userType=t,l.push(meetingSlotDTO)):"SENDMAIL"==a?(meetingSlotDTO={},meetingSlotDTO.controllType=a,meetingSlotDTO.meetingType="STUDENT_DOUBT_SESSION",meetingSlotDTO.meetingId=$("#"+e+" #meetingId").val().trim(),meetingSlotDTO.userType=t,l.push(meetingSlotDTO)):"PUBLISH_RECORD"==a||"REVOKE"==a?(meetingSlotDTO={},meetingSlotDTO.controllType=a,meetingSlotDTO.meetingType="STUDENT_DOUBT_SESSION",meetingSlotDTO.meetingId=$("#"+e+" #meetingId").val().trim(),meetingSlotDTO.meetingStrId=$("#"+e+" #meetingStrId").val().trim(),meetingSlotDTO.userType=t,l.push(meetingSlotDTO)):"RESET"==a&&(meetingSlotDTO={},meetingSlotDTO.controllType=a,meetingSlotDTO.meetingType="STUDENT_DOUBT_SESSION",meetingSlotDTO.meetingId=e,meetingSlotDTO.userType=t,l.push(meetingSlotDTO)),i.meetingSlotDTO=l,o.dashboardCommonDTO=i,n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=t,n.userId=USER_ID,o.authentication=n,o}function meetingResultModal(e,t,a,s,o){$("#updateMeetingResultModal").modal("show"),$("#updateMeetingResultForm #userId").val(t),$("#updateMeetingResultForm #meetingId").val(e),$("#updateMeetingResultForm #meetingCurStatus").val(s),html='<option value="N/A" selected>Select Status</option>',"N"==s?html+='<option value="Reschedule Session">Reschedule Class</option>':(html+='<option value="Reschedule Session">Reschedule Class</option>',html+='<option value="Missed by Student">Missed by Student</option>',"TEACHER"==o||(html+='<option value="Missed by Teacher">Missed by Teacher</option>'),html+='<option value="Completed">Completed</option>'),$("#updateMeetingResultForm #meetingResult").html(html),""==a?""==$("#updateMeetingResultForm #meetingResult option:selected").val().trim()||$("#updateMeetingResultForm #meetingResult").val($("#updateMeetingResultForm #meetingResult option:selected").text()):$("#updateMeetingResultForm #meetingResult").val(a)}function meetingUrlModalTeacher(e,t,a,s,o){"N/A"==a&&(a=""),"N/A"==s&&(s="N"),"N/A"==o&&(o=""),$("#meetingUrlForm #meetingUrl").attr("disabled",!1),$("#meetingUrlForm #remarks").attr("disabled",!1),$("#meetingUrlForm #saveMeetingUrl").show(),$("#meetingUrlForm #note").show(),$("#meetingUrlModal").modal("show"),$("#meetingUrlForm #meetingId").val(e),$("#meetingUrlForm #userId").val(t),$("#meetingUrlForm #meetingUrl").val(a),$("#meetingUrlForm #mailSendStatus").val(s),$("#meetingUrlForm #remarks").val(o),"Y"!=s&&""==a||($("#meetingUrlForm #meetingUrl").attr("disabled",!0),$("#meetingUrlForm #remarks").attr("disabled",!0),$("#meetingUrlForm #saveMeetingUrl").hide(),$("#meetingUrlForm #note").hide())}function submitRequestDemoMeetingSlots(e,t,a,s,o,n,i){if(hideMessage(""),console.log("submitRequestDemoMeetingSlots ",o),!validateRequestDemoMeetingSlots(e,t,a,o))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLFor("dashboard","meetingslots-submit"),data:JSON.stringify(getRequestForSubmitRequestDemoMeetingSlots(e,t,a,s,o,i)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status||"3"==t.status?"3"==t.status?redirectLoginPage():"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0):"COUNSELORMEET"==o?"ADD"==a?(showMessage(!1,t.message),$("#meetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(n,"counselor-meet-slot","","?moduleId="+n+"&requestType="+o)}),1e3)):"EDIT"==a&&(showMessage(!1,t.message),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(n,"counselor-meet-slot","","?moduleId="+n+"&requestType="+o)}),1e3)):"REQUESTDEMO"==o?"ADD"==a?(showMessage(!1,t.message),$("#meetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(n,"student-meet-slot","","?moduleId="+n+"&requestType="+o)}),1e3)):"EDIT"==a&&(showMessage(!1,t.message),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(n,"student-meet-slot","","?moduleId="+n+"&requestType="+o)}),1e3)):"CONNECTMEET"==o?"ADD"==a?(showMessage(!1,t.message),$("#meetingSlotsModal").modal("toggle"),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(n,"Connect-to-impact-slot","","?moduleId="+n+"&requestType="+o)}),1e3)):"EDIT"==a&&(showMessage(!1,t.message),$("#"+e)[0].reset(),setTimeout((function(){callDashboardPageSchool(n,"Connect-to-impact-slot","","?moduleId="+n+"&requestType="+o)}),1e3)):"EDIT"==a&&("theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0),$("#classrommTr"+s).remove()),!1},error:function(e){return showMessage(!0,e.responseText),!1}})}function getRequestForSubmitRequestDemoMeetingSlots(e,t,a,s,o,n){var i={},l={},r={};if("ADD"==a){r.meetingType=o;var m=$("#"+e+" #meetingDate").val();m=m.split("-"),meetingDate=m[2]+"-"+m[0]+"-"+m[1],r.meetingDate=meetingDate;var g=$("#"+e+" #startTime").val(),d=$("#"+e+" #timeInterval option:selected").val();r.startTime=g;var u=new Date("2016/09/12 "+g+":00");u.setMinutes(u.getMinutes()+parseInt(d)),u=u.getHours()+":"+u.getMinutes(),r.endTime=u,r.subject=o,r.status="0",r.controllType=a}else"EDIT"==a&&(r.meetingType=o,r.meetingId=s,r.controllType=a);return l.hash=getHash(),l.schoolId=SCHOOL_ID,l.schoolUUID=SCHOOL_UUID,l.userType=t,l.userId=n,i.authentication=l,i.meetingSlotDTO=r,i}function advanceClassroomSearchReset(e){$("#"+e)[0].reset()}function showAggrigatorStatusPopup(e,t,a,s,o,n,i){$("#aggregatorId").val(a),$("#aggrigatorUserId").val(s),$("#aggrigatorMeetingVendor").val(o),$("#aggrigatorCurrentStatus").val(t),$("#userKey").val(t),$("#groupId").val(t),"activate"==t||"active"==t?($("#aggrigatorStatusIcon").html('<i class="fa fa-user-plus text-primary fa-4x"></i>'),$("#showMessageCreateUser .modal-header").addClass("bg-primary").removeClass("bg-danger, bg-success"),$("#resetAggregatorWarningNo").text("Create").addClass("btn-primary").removeClass("btn-danger,btn-success")):"inactive"==t||"unlink"==t?($("#aggrigatorStatusIcon").html('<i class="fa fa-times text-danger fa-4x"></i>'),$("#showMessageCreateUser .modal-header").addClass("bg-danger").removeClass("bg-success, bg-primary"),$("#resetAggregatorWarningNo").text("Unlink").addClass("btn-danger").removeClass("btn-success, btn-primary")):"create"==t&&($("#aggrigatorStatusIcon").html('<i class="fa fa-check text-success fa-4x"></i>'),$("#showMessageCreateUser .modal-header").addClass("bg-success").removeClass("bg-danger, bg-primary"),$("#resetAggregatorWarningNo").text("Create").addClass("btn-success").removeClass("btn-danger, btn-primary")),$("#aggrigatorStatus").html(e),$("#aggregatorUserModel").modal("show")}function saveUpdateAggregatorUser(e,t){var a=$("#aggregatorId").val(),s=$("#aggrigatorUserId").val(),o=$("#aggrigatorMeetingVendor").val(),n=($("#aggrigatorCurrentStatus").val(),$("#userKey").val(),$("#groupId").val(),{});n.meetingVendor=o,n.userId=s,n.UNIQUEUUID=UNIQUEUUID,""==gotoMeetingId||"0"==gotoMeetingId?$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("gotomeeting","createUser"),data:JSON.stringify(n),dataType:"json",success:function(t){if("0"==t.status||"2"==t.status||"3"==t.status)"3"==t.status?redirectLoginPage():"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0);else{if("manageSession"==e){var a=t.createGotoUserResponseDTO,n=getZoomCommandContent(o,"A",a.id,s,a.key,a.groupId);$("#"+o+"_aggrigatorUserId_"+s).html(n)}showMessage(!0,t.message)}}}):$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("gotomeeting","update-goto-meeting-user"),data:JSON.stringify({gotoMeetingUserId:a}),dataType:"json",success:function(t){if("0"==t.status||"2"==t.status||"3"==t.status)"3"==t.status?redirectLoginPage():"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0);else{if("manageSession"==e){var o=t.gotoMeetingUserDTO,n=getZoomCommandContent(o.status,a,s);$("#aggrigatorUserId_"+s).html(n)}showMessage(!0,t.message)}}})}$(document).ready((function(){getWaringContent1()}));