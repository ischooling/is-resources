function getURLForattendance(t,e){return BASE_URL+CONTEXT_PATH+t+"/"+e}function getTeacherCompensationDetails(t,e,a){var n=$("#teacherId").val();if($("#errorStart").text(""),$("#errorEnd").text(""),""==$("#startDate").val())return $("#errorStart").text("Please select start date"),!1;if(""==$("#endDate").val())return $("#errorEnd").text("Please select end date"),!1;$("#studentDetailsDiv").hide();var s=new Date($("#startDate").val()),l=new Date($("#endDate").val()),r=changeDateFormat(s,"yyyy-mm-dd"),o=changeDateFormat(l,"yyyy-mm-dd");$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-assigned-grade-student-data"),data:JSON.stringify(getRequestForTeacherAssignedDetails(n,r,o,a)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?"redirect:/common/login":($("#assignedgradeStudentDiv").show(),getAssignedGradeStudentTeacher(t.teacherAssignGradeDTO),!1)},error:function(t){return!1}})}function getAssignedGradeStudentTeacher(t){$("#assignedGradeStudentDetailsDiv").hide(),$("#assignedTotalStudentDetailsDiv").hide(),$("#assignedgradeStudentTable tbody").html(""),assignedgradeStudentTableTr='<tr><td data-label="Total" text-color="#fff" style="background-color:#3f6ad8 !important"><a href="javascript:void(0);" style="color:#fff !important" onclick="showAssingedPersonalizedStudentTable(\'ONE_TO_ONE\')">'+t.countOfStudents+'</a></td><td data-label="Total" text-color="#fff" style="background-color:#3f6ad8 !important" ><a href="javascript:void(0);" style="color:#fff !important" onclick="showAssingedBatchStudentTable(\'BATCH\')">'+t.countOfBatches+" ("+t.countOfStudentsInBatches+')</a></td><td data-label="Total" text-color="#fff" style="background-color:#3f6ad8 !important"><a href="javascript:void(0);" style="color:#fff !important" onclick="showAssingedPersonalizedStudentTable(\'SCHOLARSHIP\')">'+t.countOfAcceleratedStudents+'</a></td><td data-label="Total" text-color="#fff" style="background-color:#3f6ad8 !important"><a href="javascript:void(0);" style="color:#fff !important" onclick="showAssingedPersonalizedStudentTable(\'ONE_TO_ONE_FLEX\')">'+t.countOfFlexStudents+"</a></td></tr>",$("#assignedgradeStudentTable tbody").append(assignedgradeStudentTableTr)}function showAssingedPersonalizedStudentTable(t){$("#studentDetailsDiv").hide();var e=$("#teacherId").val(),a=new Date($("#startDate").val()),n=new Date($("#endDate").val()),s=changeDateFormat(a,"yyyy-mm-dd"),l=changeDateFormat(n,"yyyy-mm-dd");$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-assigned-total-student-data"),data:JSON.stringify(getRequestForTeacherAssignedDetails(e,s,l,t)),dataType:"json",cache:!1,timeout:6e5,success:function(t){if("0"==t.status||"2"==t.status)return"redirect:/common/login";if(t.teacherAssignGradeDTOList.length>0){$("#assignedGradeStudentDetailsDiv").show(),$("#assignedTotalStudentDetailsDiv").hide(),$("#assignedGradeStudentDetailsTable tbody").html("");var a=0;$.each(t.teacherAssignGradeDTOList,(function(t,n){a++,assignedGradeStudentDetailsTableTr="<tr ><td>"+a+"</td><td>"+n.gradeName+'</td><td><a href="javascript:void(0);" class="btn btn-sm btn-primary text-white" onclick="showPersonalizedStudentCompDetailsTable('+e+",'"+s+"','"+l+"',"+n.standardId+", 'SOME')\">"+n.countOfStudents+"</a></td></tr>",$("#assignedGradeStudentDetailsTable tbody").append(assignedGradeStudentDetailsTableTr)}));var n='<tr > <td colspan="3" class="text-right"><a href="javascript:void(0);" class="btn btn-sm btn-primary text-white" onclick="showPersonalizedStudentCompDetailsTable('+e+",'"+s+"','"+l+"', 0 ,'ALL')\">SHOW ALL </td></tr>";$("#assignedGradeStudentDetailsTable tbody").append(n)}else $("#assignedGradeStudentDetailsDiv").hide();return!1},error:function(t){return!1}})}function showPersonalizedStudentCompDetailsTable(t,e,a,n,s){$("#studentDetailsDiv").show();var l={teacherId:t,standardId:n,controlType:s,startDate:e,endDate:a};$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-student-compensation"),data:JSON.stringify(l),dataType:"json",cache:!1,timeout:6e5,success:function(t){if("0"==t.status||"2"==t.status)return"redirect:/common/login";if(t.teacherCompensationPartTime.length>0){$("#studentDetailsTable tbody").html("");var e=0;$.each(t.teacherCompensationPartTime,(function(t,a){e++,studentDetailsTableTr="<tr ><td>"+e+"</td><td>"+a.studentName+"</td> <td>"+a.standardName+"</td>",0==a.subjectId?studentDetailsTableTr=studentDetailsTableTr+"<td>"+a.standardName+"</td>":studentDetailsTableTr=studentDetailsTableTr+"<td>"+a.subjectName+"</td>",studentDetailsTableTr=studentDetailsTableTr+"<td>"+a.enrollStartDate+"</td>","Dec 31, 2999"==a.enrollEndDate?studentDetailsTableTr+="<td>N/A</td>":studentDetailsTableTr=studentDetailsTableTr+"<td>"+a.enrollEndDate+"</td>",studentDetailsTableTr+="</tr>",$("#studentDetailsTable tbody").append(studentDetailsTableTr)}))}return!1},error:function(t){return!1}})}function showAssingedBatchStudentTable(t){var e=$("#teacherId").val(),a=new Date($("#startDate").val()),n=new Date($("#endDate").val()),s=changeDateFormat(a,"yyyy-mm-dd"),l=changeDateFormat(n,"yyyy-mm-dd");$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-assigned-total-student-data"),data:JSON.stringify(getRequestForTeacherAssignedDetails(e,s,l,t)),dataType:"json",cache:!1,timeout:6e5,success:function(t){if("0"==t.status||"2"==t.status)return"redirect:/common/login";if(t.teacherAssignGradeDTOList.length>0){$("#assignedGradeStudentDetailsDiv").hide(),$("#assignedTotalStudentDetailsDiv").show(),$("#assignedTotalStudentDetailsTable tbody").html("");var e=0;$.each(t.teacherAssignGradeDTOList,(function(t,a){e++,assignedTotalStudentDetailsTableTr="<tr ><td>"+e+"</td><td>"+a.gradeName+"</td><td>"+a.batchName+"</td></tr>",$("#assignedTotalStudentDetailsTable tbody").append(assignedTotalStudentDetailsTableTr)}))}else $("#assignedGradeStudentDetailsDiv").hide(),$("#assignedTotalStudentDetailsDiv").show();return!1},error:function(t){return!1}})}function getRequestForTeacherAssignedDetails(t,e,a,n){console.log("getRequestForTeacherComp");var s={},l={},r={};return r.schoolId=SCHOOL_ID,r.teacherId=t,r.startDate=e,r.endDate=a,r.controlType=n,l.hash=getHash(),l.schoolId=SCHOOL_ID,l.schoolUUID=SCHOOL_UUID,l.userType="SCHOOL",l.userId=$("#userId").val(),s.authentication=l,s.teacherCompensationDTO=r,s}function saveTeacherComp(t,e,a,n,s,l,r,o,d){if(hideMessage(""),!validateRequestForTeacherComp(t,a,n,s,o,d))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","save-teacher-compensation"),data:JSON.stringify(getRequestForTeacherComp(t,e,a,n,s,r,o,d)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?showMessage(!0,t.message):(showMessage(!0,t.message),$("#teacherCompInfoModal").modal("hide"),setTimeout((function(){callTeacherCompModal(a,n)}),1e3),setTimeout((function(){setStartDate(o)}),1e3)),!1},error:function(t){return!1}})}function getRequestForTeacherComp(t,e,a,n,s,l,r,o){console.log("getRequestForTeacherComp");var d={},i={},u={};return u.schoolId=$("#"+t+" #schoolId").val(),u.teacherId=a,u.standardId=n,u.teacherCompId=l,u.emplyeeType=o,"Full-Time"==o?(u.noOfSession=$("#"+t+" #noOfSessionFT_"+r).val(),u.amountInr=$("#"+t+" #amountInrFT_"+r).val(),u.amountUsd=$("#"+t+" #amountUsdFT_"+r).val(),u.basicFeeCalculated=$("#"+t+" #amountCalculatedFT_"+r).val(),u.perClassAmount=$("#"+t+" #perClassAmountCalculatedFT_"+r).val(),u.gradingAmount=$("#"+t+" #totalGradingCalculatedFT_"+r).val(),u.perClassAmountInPercentage=$("#"+t+" #perclassAmountFT_"+r).val(),u.gradingAmountInPercentage=$("#"+t+" #gradingAmountFT_"+r).val(),u.startDate=$("#"+t+" .startCompDateFT_"+r).val().split("-")[2]+"-"+$("#"+t+" .startCompDateFT_"+r).val().split("-")[0]+"-"+$("#"+t+" .startCompDateFT_"+r).val().split("-")[1],""!=$("#"+t+" .endCompDateFT_"+r).val()&&(u.endDate=$("#"+t+" .endCompDateFT_"+r).val().split("-")[2]+"-"+$("#"+t+" .endCompDateFT_"+r).val().split("-")[0]+"-"+$("#"+t+" .endCompDateFT_"+r).val().split("-")[1])):(u.noOfSession=$("#"+t+" #noOfSession_"+r).val(),u.sessionType=$("#"+t+" #sessionType_"+r).val(),u.durationComp=$("#"+t+" #durationSession_"+r).val(),u.amountInr=$("#"+t+" #amountInr_"+r).val(),u.amountUsd=$("#"+t+" #amountUsd_"+r).val(),u.basicFeeCalculated=$("#"+t+" #amountCalculated_"+r).val(),u.perClassAmount=$("#"+t+" #perClassAmountCalculated_"+r).val(),u.gradingAmount=$("#"+t+" #totalGradingCalculated_"+r).val(),u.perClassAmountInPercentage=$("#"+t+" #perclassAmount_"+r).val(),u.gradingAmountInPercentage=$("#"+t+" #gradingAmount_"+r).val(),u.startDate=$("#"+t+" .startCompDate_"+r).val().split("-")[2]+"-"+$("#"+t+" .startCompDate_"+r).val().split("-")[0]+"-"+$("#"+t+" .startCompDate_"+r).val().split("-")[1],""!=$("#"+t+" .endCompDate_"+r).val()&&(u.endDate=$("#"+t+" .endCompDate_"+r).val().split("-")[2]+"-"+$("#"+t+" .endCompDate_"+r).val().split("-")[0]+"-"+$("#"+t+" .endCompDate_"+r).val().split("-")[1])),u.controlType=s,i.hash=getHash(),i.schoolId=SCHOOL_ID,i.schoolUUID=SCHOOL_UUID,i.userType=e,i.userId=$("#userId").val(),d.authentication=i,d.teacherCompensationDTO=u,d}function validateRequestForTeacherComp(t,e,a,n,s,l){if("edit"!=n)return showMessage(!0,"Invalid control type."),!1;if(0==e)return showMessage(!0,"Teacher is required."),!1;if(0==a)return showMessage(!0,"Grade is required."),!1;if("Full-Time"==l){if(""==$("#"+t+" #noOfSessionFT_"+s).val()||"0"==$("#"+t+" #noOfSessionFT_"+s).val())return showMessage(!0,"Please enter Hours per week."),!1;if(""==$("#"+t+" #amountInrFT_"+s).val()&&""==$("#"+t+" #amountUsdFT_"+s).val())return showMessage(!0,"Basic Salary field is mandatory."),!1;if(""==$("#"+t+" #perclassAmountFT_"+s).val()||0==$("#"+t+" #perclassAmountFT_"+s).val())return showMessage(!0,"Per Class Amount in Percentage field is mandatory."),!1;if(""!=$("#"+t+" #perclassAmountFT_"+s).val()&&null!=$("#"+t+" perclassAmountFT_"+s).val()&&0!=$("#"+t+" perclassAmountFT_"+s).val()&&$("#perclassAmountFT_"+s).val()>100)return showMessage(!0,"Per Class Amount Percentage can not be more than 100."),!1;if(""==$("#"+t+" .startCompDateFT_"+s).val())return showMessage(!0,"Start Date is required."),!1;if(""!=$("#"+t+" .endCompDateFT_"+s).val()&&$("#"+t+" .startCompDateFT_"+s).val()>$("#"+t+" .endCompDateFT_"+s).val())return showMessage(!0,"End Date must be greater than start date."),!1}else{if(""==$("#"+t+" #noOfSession_"+s).val()||"0"==$("#"+t+" #noOfSession_"+s).val())return"Full-Time"==l?showMessage(!0,"Please enter Hours per week."):showMessage(!0,"Please enter No of session."),!1;if(""==$("#"+t+" #sessionType_"+s).val())return showMessage(!0,"Session type is required."),!1;if("0"==$("#"+t+" #durationSession_"+s).val())return showMessage(!0,"Duration of Complimentary session is required."),!1;if(""==$("#"+t+" #amountInr_"+s).val())return showMessage(!0,"Amount field is mandatory."),!1;if(""==$("#"+t+" #amountUsd_"+s).val())return showMessage(!0,"Amount field is mandatory."),!1;if(""==$("#"+t+" #perclassAmount_"+s).val()||0==$("#"+t+" #perclassAmount_"+s).val())return showMessage(!0,"Per Class Amount in Percentage field is mandatory."),!1;if(""!=$("#"+t+" #perclassAmount_"+s).val()&&null!=$("#"+t+" perclassAmount_"+s).val()&&0!=$("#"+t+" perclassAmount_"+s).val()&&$("#perclassAmount_"+s).val()>100)return showMessage(!0,"Per Class Amount Percentage can not be more than 100."),!1;if(""==$("#"+t+" .startCompDate_"+s).val())return showMessage(!0,"Start Date is required."),!1;if(""!=$("#"+t+" .endCompDate_"+s).val()&&$("#"+t+" .startCompDate_"+s).val()>$("#"+t+" .endCompDate_"+s).val())return showMessage(!0,"End Date must be greater than start date."),!1}return!0}function callAddButton(){var t=$("#paySlipStatusBox").val();console.log("payslip status ",t),"Published"!=t?($("#cloneRowBtnPartTime").show(),$("#cloneRowBtnFullTime").show(),$("#cloneRowBtnBatchPartTime").show(),$("#cloneRowBtnBatchFullTime").show()):($("#cloneRowBtnPartTime").hide(),$("#cloneRowBtnFullTime").hide(),$("#cloneRowBtnBatchPartTime").show(),$("#cloneRowBtnBatchFullTime").show())}function submitTeacherCompensation(t,e){var a=$("#teacherId").val();if($("#errorStart").text(""),$("#errorEnd").text(""),""==$("#startDate").val())return $("#errorStart").text("Please select start date"),!1;if(""==$("#endDate").val())return $("#errorEnd").text("Please select end date"),!1;$("#modeOfPayment").val("");var n=new Date($("#startDate").val()),s=new Date($("#endDate").val()),l=changeDateFormat(n,"yyyy-mm-dd"),r=changeDateFormat(s,"yyyy-mm-dd"),o={teacherId:a,startDate:l,endDate:r,forDownload:!1,moduleId:e};url="getAsPost('/dashboard/teacher-monthly-pay-slip-content"+("?teacherId="+a+"&startDate="+l+"&endDate="+r+"&forDownload="+!1+"&modeOfPayment=&moduleId="+e)+"')",$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-compensation-calculation"),data:JSON.stringify(o),dataType:"html",success:function(t){if(""!=t){var e;return"FAILED"==(e=t.split("|"))[0]||"EXCEPTION"==e[0]||"SESSIONOUT"==e[0]?$("#errorCmpile").text(e[1]):($("#teacher-compensation-partime-fulltime-content").html(t),$("#teacherMonthlyPaySlip").attr("onclick",url),$("#teacherMonthlyPaySlip").hide(),callAddButton(),$("html, body").animate({scrollTop:$("#generateRequestForTeacherCompensation").offset().top},500),$("#teacherCalculationPartTime").DataTable({fixedHeader:{header:!0,footer:!0}}),$("#teacherCalculationFullTime").DataTable({fixedHeader:{header:!0,footer:!0}})),!1}return!1},error:function(t){}})}function getPublishMonthlyPaySlip(t,e,a,n,s){var l={},r={},o={};return o.startDate=e,o.endDate=a,o.teacherId=t,o.publishDate=n,o.modeOfTransfer=s,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,l.authentication=r,l.publishPaySlipDTO=o,l}function publishMonthlyPaySlip(t,e,a,n){if(""==$("#publishDate").val()||null==$("#publishDate").val())return alert("Please select publish date."),!1;var s=$("#publishDate").val().split("-")[2]+"-"+$("#publishDate").val().split("-")[0]+"-"+$("#publishDate").val().split("-")[1];$.ajax({type:"POST",contentType:"application/json",url:getURLFor("/dashboard","publish-teacher-monthly-pay-slip"),data:JSON.stringify(getPublishMonthlyPaySlip(t,e,a,s,n)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?alert(t.message):(alert(t.message),$("#publishTeacherPaySlipDiv").hide()),!1},error:function(t){return!1}})}function addPartTimeCompensation(){$(".clone-row-wrapper").show();var t=$("#teacherCalculationPartTime > tbody > tr").not(".btn-row").length;$(".clone-row-part-time tr .serialNumber").html(t);var e=$(".clone-row-part-time").html();$("#teacherCalculationPartTime > tbody").find("tr:last").after(e).promise().done((function(){var t=changeDateFormat(new Date($("#startDate").val()),"mm-dd-yyyy").split("-"),e=(new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(t[1])),new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(1)));e.setMonth(e.getMonth()),console.log(e);var a=new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(1));a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),console.log(a);var n=changeDateFormat(new Date($("#endDate").val()),"mm-dd-yyyy").split("-"),s=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(n[1])),l=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(1));s.setMonth(s.getMonth());var r=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(1));r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),$(".cloneStartDate").datepicker({startDate:e,endDate:a,format:"M dd, yyyy",autoclose:!0}),$(".cloneEndDate").datepicker({startDate:l,endDate:r,format:"M dd, yyyy",autoclose:!0})}))}function addFullTimeCompensation(){$(".clone-row-wrapper-full-time").show();var t=parseInt($("#teacherCalculationFullTime > tbody > tr").length)+1;$(".clone-row-full-time tr .serialNumber").html(t);var e=$(".clone-row-full-time").html();$("#teacherCalculationFullTime > tbody").append(e).promise().done((function(){var t=changeDateFormat(new Date($("#startDate").val()),"mm-dd-yyyy").split("-"),e=(new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(t[1])),new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(1)));e.setMonth(e.getMonth()),console.log(e);var a=new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(1));a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),console.log(a);var n=changeDateFormat(new Date($("#endDate").val()),"mm-dd-yyyy").split("-"),s=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(n[1])),l=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(1));s.setMonth(s.getMonth());var r=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(1));r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),$(".cloneStartDate").datepicker({startDate:e,endDate:a,format:"M dd, yyyy",autoclose:!0}),$(".cloneEndDate").datepicker({startDate:l,endDate:r,format:"M dd, yyyy",autoclose:!0})}))}function addBatchCompensation(t){$(".clone-row-wrapper-batch-"+t).show();var e=parseInt($("#teacherCalculationBatch"+t+" > tbody > tr").length)+1;$(".clone-row-batch-"+t+" tr .serialNumber").html(e);var a=$(".clone-row-batch-"+t).html();$("#teacherCalculationBatch"+t+" > tbody").append(a).promise().done((function(){var t=changeDateFormat(new Date($("#startDate").val()),"mm-dd-yyyy").split("-"),e=(new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(t[1])),new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(1)));e.setMonth(e.getMonth()),console.log(e);var a=new Date(parseInt(t[2]),parseInt(t[0]-1),parseInt(1));a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),console.log(a);var n=changeDateFormat(new Date($("#endDate").val()),"mm-dd-yyyy").split("-"),s=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(n[1])),l=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(1));s.setMonth(s.getMonth());var r=new Date(parseInt(n[2]),parseInt(n[0]-1),parseInt(1));r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),$(".cloneStartDate").datepicker({startDate:e,endDate:a,format:"M dd, yyyy",autoclose:!0}),$(".cloneEndDate").datepicker({startDate:l,endDate:r,format:"M dd, yyyy",autoclose:!0})}))}function changeModeOfPaymentTeacherCompensation(){if(""==$("#modeOfPayment").val())return $("#errorModeOfPayment").text("Please select Mode of Transfer."),$("#teacherMonthlyPaySlip").hide(),!1;$("#teacherMonthlyPaySlip").attr("onclick",$("#teacherMonthlyPaySlip").attr("onclick").split("modeOfPayment=")[0]+"modeOfPayment="+$("#modeOfPayment").val()+"')"),$("#teacherMonthlyPaySlip").show()}function getStudentGradeAndSubjects(t,e,a){if($("#errorAddPayment").text(""),resetDropdown($(t).parent().parent().find(".studentSubject"),"Select Course"),resetDropdown($(t).parent().parent().find(".studentGrade"),"Grade"),""==a||null==a)return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","SUBJECT-LIST-BY-STUDENT-TEACHER-ID",e,a)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message);else{var a=e.mastersData.studentSubjectList,n=$(t).parent().parent().find(".studentSubject"),s=$(t).parent().parent().find(".studentGrade");n.html(""),n.append('<option value="0">Select Course</option>'),s.html(""),$.each(a,(function(t,e){e.extra<11?(n.append('<option value="'+e.key+'">'+e.value+" </option>"),n.prop("disabled",!1)):(n.append('<option value="'+e.extra+'">'+e.extra1+" </option>"),n.val(e.extra),n.prop("disabled",!0)),s.append('<option value="'+e.extra+'">'+e.extra1+" </option>"),s.prop("disabled",!0)}))}},error:function(t){$("#courseId").prop("disabled",!1)}})}function getBatchGradeAndSubjects(t,e,a,n){if($("#errorAddPaymentBatch"+n).text(""),resetDropdown($(t).parent().parent().find(".studentSubject"),"Select Course"),resetDropdown($(t).parent().parent().find(".studentGrade"),"Grade"),""==a||null==a)return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","SUBJECT-LIST-BY-BATCH-TEACHER-ID",e,a)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message);else{var a=e.mastersData.studentSubjectList,n=$(t).parent().parent().find(".studentSubject"),s=$(t).parent().parent().find(".studentGrade");n.html(""),n.append('<option value="0">Select Course</option>'),s.html(""),$.each(a,(function(t,e){e.extra<11?(n.append('<option value="'+e.key+'">'+e.value+" </option>"),n.prop("disabled",!1)):(n.append('<option value="'+e.extra+'">'+e.extra1+" </option>"),n.val(e.extra),n.prop("disabled",!0)),s.append('<option value="'+e.extra+'">'+e.extra1+" </option>"),s.prop("disabled",!0)}))}},error:function(t){$("#courseId").prop("disabled",!1)}})}function saveTeacherLeavesAndDeductionData(t){$("#errorLeaveAndDeduction").text("");var e={tgcId:t,leavesAvailed:$(".leavesAvailed").val(),paidLeaves:$(".paidLeaves").val(),lopDays:$(".lopDays").val(),deductedAmount:parseFloat($(".deductedAmount").val()).toFixed(2),deductedAmountOld:parseFloat($(".deductedAmountOld").val()).toFixed(2)};$.ajax({type:"POST",url:getURLForHTML("dashboard","save-deducted-amount-data"),contentType:"application/json",data:JSON.stringify(e),dataType:"html",cache:!1,timeout:6e5,success:function(t){if(""!=t){var e;return"FAILED"==(e=t.split("|"))[0]||"EXCEPTION"==e[0]||"SESSIONOUT"==e[0]?$("#errorLeaveAndDeduction").text(e[1]):($("#errorLeaveAndDeduction").text(e[1]),$(".leavesAvailed").val($(".leavesAvailed").val()),$(".paidLeaves").val($(".paidLeaves").val()),$(".lopDays").val($(".lopDays").val()),$(".deductedAmount").val(parseFloat($(".deductedAmount").val()).toFixed(2)),parseFloat($(".deductedAmountOld").val()).toFixed(2)!=parseFloat($(".deductedAmount").val()).toFixed(2)&&$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())-parseFloat($(".deductedAmount").val()).toFixed(2)).toFixed(2)),setTimeout((function(){$("#errorLeaveAndDeduction").text("")}),3e3)),!1}},error:function(t){return!1}})}function saveTeacherAdditionalPaymentData(t,e,a,n,s,l){if($("#errorAddPayment"+l).text(""),$("#errorAddPayment"+l).removeClass("text-warning"),$("#errorAddPayment"+l).removeClass("text-danger"),$("#errorAddPayment"+l).removeClass("text-success"),!validateRequestForTeacherAdditionalPayment(t,e,a,n,l))return!1;var r=0;""!=$(t).parent().parent().find(".sessionCount").val()&&null!=$(t).parent().parent().find(".sessionCount").val()&&(r=$(t).parent().parent().find(".sessionCount").val());var o=0;""!=$(t).parent().parent().find(".gradingCount").val()&&null!=$(t).parent().parent().find(".gradingCount").val()&&(o=$(t).parent().parent().find(".gradingCount").val());var d=$(t).parent().parent().find(".studentName option:selected").text(),i=$(t).parent().parent().find(".studentGrade option:selected").text(),u=$(t).parent().parent().find(".studentSubject option:selected").text(),c=$(t).parent().parent().find(".perClassAmount").val(),p=$(t).parent().parent().find(".gradingAmount").val(),m="teacherCalculationPartTime",h=($("#teacherCalculationPartTime > tbody > tr").not(".btn-row").length,$(t).parent().parent().find(".planName").val()),T=$(t).parent().parent().find(".cloneStartDate").val(),g=$(t).parent().parent().find(".cloneEndDate").val(),v=$(t).parent().parent().find(".basicFee").val();$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","save-teacher-additional-payment"),data:JSON.stringify(getRequestForTeacherAdditionalPayment(t,e,a,n,l)),dataType:"json",cache:!1,timeout:6e5,success:function(t){if("0"==t.status||"2"==t.status)$("#errorAddPayment"+l).text(t.message),$("#errorAddPayment"+l).addClass("text-danger");else if($("#errorAddPayment"+l).text(t.message),$("#errorAddPayment"+l).addClass("text-success"),"Part-Time"==l){var e=$("#teacherCalculationPartTime").DataTable(),a=parseInt($("#totalStudent").html())+1;e.row.add([a,""===d||"Select Student"===d?["N/A"]:[d+"<br/>"+i+"<br/>"+u],T+"<br/>"+g+"<br/>"+h,v,r,c,o,p,'<div class="d-flex flex-wrap">'+v+'<span data-toggle="tooltip" title="Be sure before deleting the entry!" class="btn btn-sm btn-danger delete-part-time-row ml-auto p-1" style="font-size: 10px" id="deleteAdditionalPayment" onclick="deleteTeacherAdditionalPayment('+t.taplId+", 'Part-Time', this,"+v+","+r+","+o+",'teacherCalculationPartTime')\">&#x2715;</span></div>"]).draw(!1);var n=$.fn.dataTable.isDataTable("#"+m);console.log(m+" = "+n),n&&$("#"+m).dataTable().fnDestroy();a=parseInt($("#totalStudent").html())+1;$("#totalStudent").html(a);var s=0;null!=$("#totalPay").html()&&NaN!=$("#totalPay").html()&&""!=$("#totalPay").html()&&(s=$("#totalPay").html());var y=parseFloat(parseFloat(s)+parseFloat(v)).toFixed(2);$("#totalPay").html(y);var f=parseInt($("#sessionTotalSpan").html())+parseInt(r);$("#sessionTotalSpan").html(f);var F=parseInt($("#gradingTotalSpan").html())+parseInt(o);$("#gradingTotalSpan").html(F);var D=parseInt($("#totalAssignmentSpan").html())+parseInt(o);$("#totalAssignmentSpan").html(D),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())+parseFloat(v)).toFixed(2)),$(".clone-row-wrapper").hide(),$("#"+m).DataTable()}else if("Full-Time"==l){var S=$("#teacherCalculationFullTime").DataTable();a=parseInt($("#totalStudentFT").html())+1;S.row.add([a,""===d||"Select Student"===d?["N/A"]:[d+"<br/>"+i+"<br/>"+u],T+"<br/>"+g+"<br/>"+h,v,r,c,o,p,'<div class="d-flex flex-wrap">'+v+'<span data-toggle="tooltip" title="Be sure before deleting the entry!" class="btn btn-sm btn-danger ml-auto p-1" style="font-size: 10px" id="deleteAdditionalPayment" onclick="deleteTeacherAdditionalPayment('+t.taplId+", 'Full-Time',  this,"+v+","+r+","+o+",'teacherCalculationFullTime')\">&#x2715;</span></div>"]).draw(!1),$("#totalStudentFT").html(a);var I=0;""!=$("#totalPayFullTimeSpan").html()&&null!=$("#totalPayFullTimeSpan").html()&&(I=$("#totalPayFullTimeSpan").html());y=parseFloat(parseFloat(I)+parseFloat(v)).toFixed(2);$("#totalPayFullTimeSpan").text(y);f=parseInt($("#sessionTotalSpanFT").html())+parseInt(r);$("#sessionTotalSpanFT").html(f);F=parseInt($("#gradingTotalSpanFT").html())+parseInt(o);$("#gradingTotalSpanFT").html(F);D=parseInt($("#totalAssignmentSpanFT").html())+parseInt(o);$("#totalAssignmentSpanFT").html(D),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())+parseFloat(v)).toFixed(2)),$("#teacherCalculationFullTime tbody .clone-row-wrapper-full-time").remove()}else if("Batch-Part-Time"==l){var P=$("#teacherCalculationBatchPartTime").DataTable();a=parseInt($("#totalStudentBPT").html())+1;P.row.add([a,""===d||"Select Batch"===d?["N/A"]:[d+"<br/>"+i+"<br/>"+u],T+"<br/>"+g+"<br/>"+h,v,r,c,o,p,'<div class="d-flex flex-wrap">'+v+'<span data-toggle="tooltip" title="Be sure before deleting the entry!" class="btn btn-sm btn-danger delete-part-time-row ml-auto p-1" style="font-size: 10px" id="deleteAdditionalPayment" onclick="deleteTeacherAdditionalPayment('+t.taplId+", 'Batch-Part-Time', this,"+v+","+r+","+o+",'teacherCalculationBatchPartTime')\">&#x2715;</span></div>"]).draw(!1);n=$.fn.dataTable.isDataTable("#"+m);console.log(m+" = "+n),n&&$("#"+m).dataTable().fnDestroy();a=parseInt($("#totalStudentBPT").html())+1;$("#totalStudentBPT").html(a);s=0;null!=$("#totalPayBPT").html()&&NaN!=$("#totalPayBPT").html()&&""!=$("#totalPayBPT").html()&&(s=$("#totalPay").html());y=parseFloat(parseFloat(s)+parseFloat(v)).toFixed(2);$("#totalPayBPT").html(y);f=parseInt($("#sessionTotalSpan").html())+parseInt(r);$("#sessionTotalSpanBPT").html(f);F=parseInt($("#gradingTotalSpan").html())+parseInt(o);$("#gradingTotalSpanBPT").html(F);D=parseInt($("#totalAssignmentSpan").html())+parseInt(o);$("#totalAssignmentSpanBPT").html(D),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())+parseFloat(v)).toFixed(2)),$(".clone-row-wrapper-batch-PartTime").hide(),$("#"+m).DataTable()}else if("Batch-Full-Time"==l){var A=$("#teacherCalculationBatchFullTime").DataTable();a=parseInt($("#totalStudentBFT").html())+1;A.row.add([a,""===d||"Select Batch"===d?["N/A"]:[d+"<br/>"+i+"<br/>"+u],T+"<br/>"+g+"<br/>"+h,v,r,c,o,p,'<div class="d-flex flex-wrap">'+v+'<span data-toggle="tooltip" title="Be sure before deleting the entry!" class="btn btn-sm btn-danger ml-auto p-1" style="font-size: 10px" id="deleteAdditionalPayment" onclick="deleteTeacherAdditionalPayment('+t.taplId+", 'Batch-Full-Time', this,"+v+","+r+","+o+",'teacherCalculationBatchFullTime')\">&#x2715;</span></div>"]).draw(!1),$("#totalStudentBFT").html(a);I=0;""!=$("#totalPayBatchFullTimeSpan").html()&&null!=$("#totalPayBatchFullTimeSpan").html()&&(I=$("#totalPayBatchFullTimeSpan").html());y=parseFloat(parseFloat(I)+parseFloat(v)).toFixed(2);$("#totalPayBatchFullTimeSpan").text(y);f=parseInt($("#sessionTotalSpan").html())+parseInt(r);$("#sessionTotalSpanBFT").html(f);F=parseInt($("#gradingTotalSpan").html())+parseInt(o);$("#gradingTotalSpanBFT").html(F);D=parseInt($("#totalAssignmentSpan").html())+parseInt(o);$("#totalAssignmentSpanBFT").html(D),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())+parseFloat(v)).toFixed(2)),$("#teacherCalculationBatchFullTime tbody .clone-row-wrapper-batch-FullTime").remove()}return!1},error:function(t){return!1}})}function calculateBasicFee(t){var e=$(t).parent().parent().find(".perClassAmount").val(),a=$(t).parent().parent().find(".gradingAmount").val();""!=e&&null!=e||(e=0),""!=a&&null!=a||(a=0),BasicFe=parseFloat(parseFloat(e)+parseFloat(a)).toFixed(2),$(t).parent().parent().find(".basicFee").val(BasicFe)}function getRequestForTeacherAdditionalPayment(t,e,a,n,s){console.log("getRequestForTeacherAdditionalPayment");var l={},r={},o={};o.schoolId=$("#"+e+" #schoolId").val(),o.teacherId=a;var d=$(t).parent().parent().find(".studentGrade").val(),i=$(t).parent().parent().find(".studentName").val(),u=$(t).parent().parent().find(".studentSubject").val();o.employementType=s,o.standardId=d,o.studentId=i,o.subjectId=u,"Part-Time"==s?null!=d&&""!=d||null!=i&&""!=i||null!=u&&""!=u||(o.employementType="Part-Time-Without-Student-Details"):"Full-Time"==s&&(null!=d&&""!=d||null!=i&&""!=i||null!=u&&""!=u||(o.employementType="Full-Time-Without-Student-Details")),o.planId=$(t).parent().parent().find(".planName").val(),o.sessionCount=$(t).parent().parent().find(".sessionCount").val(),o.gradingCount=$(t).parent().parent().find(".gradingCount").val(),o.basicAmountPerClass=$(t).parent().parent().find(".perClassAmount").val(),o.basicAmountGrading=$(t).parent().parent().find(".gradingAmount").val(),o.finalAmount=$(t).parent().parent().find(".basicFee").val();var c=$(t).parent().parent().find(".cloneStartDate").val(),p=changeDateFormat(new Date(c),"yyyy-mm-dd");o.startDate=p;var m=$(t).parent().parent().find(".cloneEndDate").val(),h=changeDateFormat(new Date(m),"yyyy-mm-dd");return o.endDate=h,o.controlType=n,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,l.authentication=r,l.teacherCompensationDTO=o,l}function validateRequestForTeacherAdditionalPayment(t,e,a,n,s){return $("#errorAddPayment"+s).text(""),0==a?($("#errorAddPayment"+s).text("Teacher is required."),!1):""==$(t).parent().parent().find(".planName").val().trim()?($("#errorAddPayment"+s).text("Remarks is required."),$("#errorAddPayment"+s).addClass("text-danger"),!1):""==$(t).parent().parent().find(".cloneStartDate").val().trim()?($("#errorAddPayment"+s).addClass("text-danger"),$("#errorAddPayment"+s).text("Start Date is required."),!1):""==$(t).parent().parent().find(".cloneEndDate").val().trim()?($("#errorAddPayment"+s).addClass("text-danger"),$("#errorAddPayment"+s).text("End Date is required."),!1):""!=$(t).parent().parent().find(".basicFee").val().trim()||($("#errorAddPayment"+s).addClass("text-danger"),$("#errorAddPayment"+s).text("Basic fee is mandatory."),!1)}function deleteTeacherAdditionalPayment(t,e,a,n,s,l,r){$("#errorAddPayment"+e).text("");var o={taplId:t,compensationType:e};$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","delete-teacher-additional-payment"),data:JSON.stringify(o),dataType:"html",cache:!1,timeout:6e5,success:function(t){if(""!=t){var o;if("FAILED"==(o=t.split("|"))[0]||"EXCEPTION"==o[0]||"SESSIONOUT"==o[0])$("#errorAddPayment"+e).text(o[1]);else{if($("#errorAddPayment"+e).text(o[1]),"Full-Time"==e){var d=parseInt($("#totalStudentFT").html())-1;$("#totalStudentFT").html(d),""!=$("#totalPayFullTimeSpan").html()&&null!=$("#totalPayFullTimeSpan").html()&&NaN!=$("#totalPayFullTimeSpan").html()&&(bs=parseFloat($("#totalPayFullTimeSpan").html()));var i=parseFloat(parseFloat(bs)-parseFloat(n)).toFixed(2);$("#totalPayFullTimeSpan").html(i);var u=parseInt($("#sessionTotalSpanFT").html())-parseInt(s);$("#sessionTotalSpanFT").html(u);var c=parseInt($("#gradingTotalSpanFT").html())-parseInt(l);$("#gradingTotalSpanFT").html(c);var p=parseInt($("#totalAssignmentSpanFT").html())-parseInt(l);$("#totalAssignmentSpanFT").html(p),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())-parseFloat(n)).toFixed(2))}else if("Part-Time"==e){d=parseInt($("#totalStudent").html())-1;$("#totalStudent").html(d);i=parseFloat(parseFloat($("#totalPay").html())-parseFloat(n)).toFixed(2);$("#totalPay").html(i);u=parseInt($("#sessionTotalSpan").html())-parseInt(s);$("#sessionTotalSpan").html(u);c=parseInt($("#gradingTotalSpan").html())-parseInt(l);$("#gradingTotalSpan").html(c);p=parseInt($("#totalAssignmentSpan").html())-parseInt(l);$("#totalAssignmentSpan").html(p),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())-parseFloat(n)).toFixed(2))}else if("Batch-Full-Time"==e){d=parseInt($("#totalStudentBFT").html())-1;$("#totalStudentBFT").html(d),""!=$("#totalPayBatchFullTimeSpan").html()&&null!=$("#totalPayBatchFullTimeSpan").html()&&NaN!=$("#totalPayBatchFullTimeSpan").html()&&(bs=parseFloat($("#totalPayBatchFullTimeSpan").html()));i=parseFloat(parseFloat(bs)-parseFloat(n)).toFixed(2);$("#totalPayBatchFullTimeSpan").html(i);u=parseInt($("#sessionTotalSpanBFT").html())-parseInt(s);$("#sessionTotalSpanBFT").html(u);c=parseInt($("#gradingTotalSpanBFT").html())-parseInt(l);$("#gradingTotalSpanBFT").html(c);p=parseInt($("#totalAssignmentSpanBFT").html())-parseInt(l);$("#totalAssignmentSpanBFT").html(p),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())-parseFloat(n)).toFixed(2))}else if("Batch-Part-Time"==e){d=parseInt($("#totalStudentBPT").html())-1;$("#totalStudentBPT").html(d);i=parseFloat(parseFloat($("#totalPayBPT").html())-parseFloat(n)).toFixed(2);$("#totalPayBPT").html(i);u=parseInt($("#sessionTotalSpanBPT").html())-parseInt(s);$("#sessionTotalSpanBPT").html(u);c=parseInt($("#gradingTotalSpanBPT").html())-parseInt(l);$("#gradingTotalSpanBPT").html(c);p=parseInt($("#totalAssignmentSpanBPT").html())-parseInt(l);$("#totalAssignmentSpanBPT").html(p),$("#totalPayWithdeduction").text(parseFloat(parseFloat($("#totalPayWithdeduction").text())-parseFloat(n)).toFixed(2))}$("#"+r).dataTable().fnDestroy();var m=$("#"+r).DataTable();m.row($(a).closest("tr")).remove().draw(!1),$.each($("#"+r+" tbody tr td:first-child"),(function(t){$(this).html(t+1)})),m.rows().invalidate(),setTimeout((function(){$("#errorAddPayment"+e).text("")}),3e3)}return!1}},error:function(t){return!1}})}function calculatePercentageOfBasicSalary(t,e,a){if(""!=$("#perclassAmount_"+e).val()&&null!=$("#perclassAmount_"+e).val()&&0!=$("#perclassAmount_"+e).val()&&$("#perclassAmount_"+e).val()>100)return $("#perclassAmount_"+e).val("0"),showMessage(!0,"Per Class Amount Percentage can not be more than 100."),!1;var n=0,s=0;if(""!=$("#noOfSession_"+e).val()&&null!=$("#noOfSession_"+e).val()&&(s=$("#noOfSession_"+e).val()),"BASIC_CAL"==a&&(""!=$("#amountInr_"+e).val()&&null!=$("#amountInr_"+e).val()?n=$("#amountInr_"+e).val():""!=$("#amountUsd_"+e).val()&&null!=$("#amountUsd_"+e).val()&&(n=$("#amountUsd_"+e).val()),$("#amountCalculated_"+e).val(parseFloat(parseFloat(n)/parseFloat(s)).toFixed(2)),n=$("#amountCalculated_"+e).val(),""!=$("#perclassAmount_"+e).val()&&null!=$("#perclassAmount_"+e).val()&&0!=$("#perclassAmount_"+e).val())){t=$("#perclassAmount_"+e).val(),$("#gradingAmount_"+e).val(100-t);var l=parseFloat(n*t/100).toFixed(2),r=parseFloat(n*(100-t)/100).toFixed(2);$("#perClassAmountCalculated_"+e).val(l),$("#totalGradingCalculated_"+e).val(r)}if("BASIC"==a){if(""!=t&&null!=t&&null!=t&&(""!=$("#amountInr_"+e).val()&&null!=$("#amountInr_"+e).val()?n=$("#amountInr_"+e).val():""!=$("#amountUsd_"+e).val()&&null!=$("#amountUsd_"+e).val()&&(n=$("#amountUsd_"+e).val()),"BASIC"==a?$("#amountCalculated_"+e).val(parseFloat(parseFloat(n)/parseFloat(s)).toFixed(2)):$("#amountCalculated_"+e).val(parseFloat(parseFloat(n)/(4*parseFloat(s))).toFixed(2)),n=$("#amountCalculated_"+e).val(),""!=$("#perclassAmount_"+e).val()&&null!=$("#perclassAmount_"+e).val()&&0!=$("#perclassAmount_"+e).val())){t=$("#perclassAmount_"+e).val(),$("#gradingAmount_"+e).val(100-t);l=parseFloat(n*t/100).toFixed(2),r=parseFloat(n*(100-t)/100).toFixed(2);$("#perClassAmountCalculated_"+e).val(l),$("#totalGradingCalculated_"+e).val(r)}}else if(""!=t&&null!=t&&null!=t&&"BASIC_CAL"!=a){$("#gradingAmount_"+e).val(100-t),n=$("#amountCalculated_"+e).val();l=parseFloat(n*t/100).toFixed(2),r=parseFloat(n*(100-t)/100).toFixed(2);$("#perClassAmountCalculated_"+e).val(l),$("#totalGradingCalculated_"+e).val(r)}}function calculatePercentageOfBasicSalaryFT(t,e,a){if(""!=$("#perclassAmountFT_"+e).val()&&null!=$("#perclassAmountFT_"+e).val()&&0!=$("#perclassAmountFT_"+e).val()&&$("#perclassAmountFT_"+e).val()>100)return $("#perclassAmountFT_"+e).val("0"),showMessage(!0,"Per Class Amount Percentage can not be more than 100."),!1;var n=0,s=0;if(""!=$("#noOfSessionFT_"+e).val()&&null!=$("#noOfSessionFT_"+e).val()&&(s=$("#noOfSessionFT_"+e).val()),"BASIC_CAL_FT"==a&&(""!=$("#amountInrFT_"+e).val()&&null!=$("#amountInrFT_"+e).val()?n=$("#amountInrFT_"+e).val():""!=$("#amountUsdFT_"+e).val()&&null!=$("#amountUsdFT_"+e).val()&&(n=$("#amountUsdFT_"+e).val()),$("#amountCalculatedFT_"+e).val(parseFloat(parseFloat(12*parseFloat(n))/(52*parseFloat(s))).toFixed(2)),n=$("#amountCalculatedFT_"+e).val(),""!=$("#perclassAmountFT_"+e).val()&&null!=$("#perclassAmountFT_"+e).val()&&0!=$("#perclassAmountFT_"+e).val())){t=$("#perclassAmountFT_"+e).val(),$("#gradingAmountFT_"+e).val(100-t);var l=parseFloat(n*t/100).toFixed(2),r=parseFloat(n*(100-t)/100).toFixed(2);$("#perClassAmountCalculatedFT_"+e).val(l),$("#totalGradingCalculatedFT_"+e).val(r)}if("BASIC_FT"==a){if(""!=t&&null!=t&&null!=t&&(""!=$("#amountInrFT_"+e).val()&&null!=$("#amountInrFT_"+e).val()?n=$("#amountInrFT_"+e).val():""!=$("#amountUsdFT_"+e).val()&&null!=$("#amountUsdFT_"+e).val()&&(n=$("#amountUsdFT_"+e).val()),$("#amountCalculatedFT_"+e).val(parseFloat(parseFloat(12*parseFloat(n))/(52*parseFloat(s))).toFixed(2)),n=$("#amountCalculatedFT_"+e).val(),""!=$("#perclassAmountFT_"+e).val()&&null!=$("#perclassAmountFT_"+e).val()&&0!=$("#perclassAmountFT_"+e).val())){t=$("#perclassAmountFT_"+e).val(),$("#gradingAmountFT_"+e).val(100-t);l=parseFloat(n*t/100).toFixed(2),r=parseFloat(n*(100-t)/100).toFixed(2);$("#perClassAmountCalculatedFT_"+e).val(l),$("#totalGradingCalculatedFT_"+e).val(r)}}else if(""!=t&&null!=t&&null!=t&&"BASIC_CAL_FT"!=a){$("#gradingAmountFT_"+e).val(100-t),n=$("#amountCalculatedFT_"+e).val();l=parseFloat(n*t/100).toFixed(2),r=parseFloat(n*(100-t)/100).toFixed(2);$("#perClassAmountCalculatedFT_"+e).val(l),$("#totalGradingCalculatedFT_"+e).val(r)}}function showSetTeacherCompensationContent(t,e){var a=$("#"+t).DataTable({processing:!0,serverSide:!0,searching:!0,pageLength:10,pagingType:"full",ajax:{url:CONTEXT_PATH+UNIQUEUUID+"/dashboard/set-teacher-compenstaion-table-content-1"+e,data:function(t){console.log("data "+JSON.stringify(t))}},fnRowCallback:function(t,e,a,n){},columns:[{data:"sno",name:"sno",title:"S.No"},{data:"userName",name:"userName",title:"User Name"},{data:"message",name:"message",title:"Maintenance Message"},{data:"marquee",name:"marquee",title:"Marquee"},{data:"mail",name:"mail",title:"Mail"},{data:"createdDate",name:"createdDate",title:"Created Date"},{data:"action",name:"action",title:"Action"}]});$("#"+t).on("page.dt",(function(){a.responsive.recalc()})),$("#"+t).dataTable().fnSetFilteringEnterPress()}function callShowSessionByStudent(t,e,a,n,s,l,r){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","show-session-class-by-student"),data:JSON.stringify(getRequestForStudentSessionByStudent(t,e,a,n,s,l,r)),dataType:"json",cache:!1,timeout:6e5,success:function(t){if("0"==t.status||"2"==t.status)showMessage(!0,t.message);else{var e="";if(null!=t.meetingList){var a=t.meetingList;console.log(a);for(var n=0;n<a.length;n++){var s=null!=a[n].startTime?a[n].startTime:"N/A",l=null!=a[n].attendanceDuration?a[n].attendanceDuration:"N/A";e=(e=(e=(e=(e=(e=(e+=" <tr>")+" <td>"+a[n].schoolPersonName+"</td>")+" <td>"+a[n].name+"</td>")+" <td>"+a[n].subjectName+"</td>")+" <td>"+a[n].meetingJoinDate+"</td>")+" <td>"+s+"</td>")+" <td>"+l+"</td>",e+=" </tr>"}$("#sessionComplete").html(e)}$("#openShowSessionClass").modal("show")}},error:function(t){return console.log(t),!1}})}function getRequestForStudentSessionByStudent(t,e,a,n,s,l,r){var o={},d={},i={},u={};return u.meetingPersoneId=e,u.schoolPersonId=s,u.subjectId=l,u.startDate=a,u.endDate=n,u.controllType=r,i.meetingSlotDTO=u,d.hash=getHash(),d.schoolId=SCHOOL_ID,d.schoolUUID=SCHOOL_UUID,d.userId=t,o.authentication=d,o.requestData=i,o}function getAttendanceByTeacher(t,e,a,n){var s="";"TEAM"==n?s="api-team-meeting-attendess?attendanceType="+t+"&attendanceCompiled="+e+"&officialEmail="+a:"ZOOM"==n&&(s="api-zoom-meeting-attendess?officialEmail="+a+"&meetingLinkId=&meetingfromDate=&meetingtoDate="),$("#errorCmpile").text(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForattendance("crons",s),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?(showMessage(!1,t.message),$("#errorCmpile").text("Error while fetching attendance").removeClass("text-success").addClass("text-danger")):(showMessage(!0,t.message),$("#errorCmpile").text("Class attendance fetched successfully").removeClass("text-danger").addClass("text-success")),!1},error:function(t){return!1}})}function getStudentLmsGrade(t,e,a,n){customLoader(!1),$(".ball-clip-rotate").removeClass("loader-hide"),n&&hideMessageTheme2(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","get-total-grading?euid="+t+"&startDateFilter="+e+"&endDateFilter="+a),dataType:"JSON",success:function(t){customLoader(!1),$(".ball-clip-rotate").addClass("loader-hide"),$("#plstudent").text(t.plsubmiteAssign),$("#glstudent").text(t.glsubmiteAssign),$("#plcomplete").text(t.plgradingAssign),$("#glcomplete").text(t.glgradingAssign);var e=parseInt(t.plsubmiteAssign)-parseInt(t.plgradingAssign);$("#plpending").text(e);var a=parseInt(t.glsubmiteAssign)-parseInt(t.glgradingAssign);$("#glpending").text(a)}})}function callZoomRecording(t,e,a,n){var s="?meetingid="+e+"&reportId="+a+"&meetingtype="+n;$.ajax({type:"GET",contentType:"application/json",url:getURLForattendance("crons","zoom-meeting-recording"+s),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(t){"0"!=t.status&&"2"!=t.status||showMessage(!0,t.message)},error:function(t){console.log(t)}})}function editAttendance(t,e,a,n,s,l){return customLoader(!0),"theme1"==tt?hideMessage(""):hideMessageTheme2(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("report","edit-attendance-zoom"),dataType:"JSON",data:JSON.stringify(getSaveAttendanceRequest(t,e,a,n)),success:function(t){return customLoader(!1),"0"==t.statusCode||"2"==t.statusCode?"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0):("theme1"==tt?showMessage(!1,t.message):showMessageTheme2(1,t.message,"",!0),"classreview"!=l&&($("#addattenanceform")[0].reset(),$("#addmoreAttendance").modal("hide"),"TEACHER"==USER_ROLE&&callTeacherAttendance("","myAttendanceReport",""+s,"Month",""+USER_ID))),!1}}),!1}function getSaveAttendanceRequest(t,e,a,n){if("save"==n){if(""==$("#atttimeHrsFrom").val()||null==$("#atttimeHrsFrom").val())return"theme1"==tt?showMessage(!0,"Please select start hours"):showMessageTheme2(0,"Please select start hours","",!0),!1;if(""==$("#atttimeMinFrom").val()||null==$("#atttimeMinFrom").val())return"theme1"==tt?showMessage(!0,"Please select start minutes"):showMessageTheme2(0,"Please select start minutes","",!0),!1;if(""==$("#atttimeSecFrom").val()||null==$("#atttimeSecFrom").val())return"theme1"==tt?showMessage(!0,"Please select start second"):showMessageTheme2(0,"Please select start second","",!0),!1;if(""==$("#atttimeHrsTo").val()||null==$("#atttimeHrsTo").val())return"theme1"==tt?showMessage(!0,"Please select end hours"):showMessageTheme2(0,"Please select end hours","",!0),!1;if(""==$("#atttimeMinTo").val()||null==$("#atttimeMinTo").val())return"theme1"==tt?showMessage(!0,"Please select end minutes"):showMessageTheme2(0,"Please select end minutes","",!0),!1;if(""==$("#atttimeSecTo").val()||null==$("#atttimeSecTo").val())return"theme1"==tt?showMessage(!0,"Please select start second"):showMessageTheme2(0,"Please select start second","",!0),!1;if(""==$("#attmeetingtopic").val()||null==$("#attmeetingtopic").val())return"theme1"==tt?showMessage(!0,"Please fill meeting topic"):showMessageTheme2(0,"Please fill meeting topic","",!0),!1;if(""==$("#attremark").val()||null==$("#attremark").val())return"theme1"==tt?showMessage(!0,"Please fill remark"):showMessageTheme2(0,"Please fill remark","",!0),!1;if(""==$("#attmeetingid").val()||null==$("#attmeetingid").val())return"theme1"==tt?showMessage(!0,"Please fill meeting id"):showMessageTheme2(0,"Please fill meeting id","",!0),!1}var s={};if(s.calltype=n,s.rattendid=""==t&&null==t?$("#rattendid").val():t,""==e||null==e){var l=$("#attendancedate").val()+" "+$("#atttimeHrsFrom").val()+":"+$("#atttimeMinFrom").val()+":"+$("#atttimeSecFrom").val(),r=new Date(l),o=$("#attendancedate").val()+" "+$("#atttimeHrsTo").val()+":"+$("#atttimeMinTo").val()+":"+$("#atttimeSecTo").val(),d=new Date(o)-r,i=Math.floor(d/864e5),u=Math.floor(d%864e5/36e5),c=Math.round(d%864e5%36e5/6e4),p=Math.round(Math.abs(d)/1e3);console.log(i+" days, "+u+" hours, "+c+" minutes until )"),s.jointimes=l,s.endTimes=o,s.durations=p}else s.durations=e;return""!=$("#attmeetingid").val()&&null!=$("#attmeetingid").val()&&(s.meetingId=$("#attmeetingid").val().replaceAll(" ","")),""!=$("#attmeetingtopic").val()&&null!=$("#attmeetingtopic").val()&&(s.meetingtopic=$("#attmeetingtopic").val()),""!=$("#attremark").val()&&null!=$("#attremark").val()?s.comments=escapeCharacters($("#attremark").val()):s.comments=escapeCharacters(a),""!=$("#attrecordingurl").val()&&null!=$("#attrecordingurl").val()&&(s.recordingUrl=$("#attrecordingurl").val(),s.recordingPlayPasscode=$("#attrecordingPasscode").val()),s.meetingType="E",s.meetingstatus="A",s.schoolId=SCHOOL_ID,s.userId=USER_ID,s.teacherUserId=$("#teacherUserId").val(),console.log(s),s}function editAttendanceComments(t,e,a,n){return customLoader(!0),"theme1"==tt?hideMessage(""):hideMessageTheme2(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("report","edit-attendance-comment"),dataType:"JSON",data:JSON.stringify(getSaveAttendanceCommentRequest(t,e,a,n)),success:function(t){return customLoader(!1),"0"==t.statusCode||"2"==t.statusCode?"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(0,t.message,"",!0):"theme1"==tt?showMessage(!1,t.message):showMessageTheme2(1,t.message,"",!0),!1}}),!1}function getSaveAttendanceCommentRequest(t,e,a,n){var s={};return s.calltype=n,s.attendid=t,s.remarkId=e,s.remarkStatus=a,s.schoolId=SCHOOL_ID,s.userId=USER_ID,console.log(s),s}$(document).ready((function(){$("#studentDetailsDiv").hide(),$(".add-row").unbind("click").bind("click",(function(){if(document.getElementById("ct_blah").rows.length<5){var t=$("[id$=blah] tr:not('.ui-widget-header'):last"),e=t.clone("");e.find(":text").val(""),t.after(e)}else alert("You have reached maximum limit")})),$("#startDate").datepicker({format:"M dd, yyyy",autoclose:!0}),$("#endDate").datepicker({format:"M dd, yyyy",autoclose:!0}),$("#assignedGradeStudentDetailsDiv").hide(),$("#assignedgradeStudentDiv").hide(),$("#assignedTotalStudentDetailsDiv").hide()}));