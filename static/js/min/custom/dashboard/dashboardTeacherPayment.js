function searchPaymentHistory(e,a,t){var r=$("#"+e+" #paymentDateSearch").val(),i="";if(""!=r){var s=r.split("-");i=s[2]+"-"+s[0]+"-"+s[1]}callForPaymentHistory(!1,e,"add",$("#entityIdSearch").val(),$("#entityNameSearch").val(),i,$("#"+e+" #paymentModeSearch").val())}function callForPaymentHistory(e,a,t,r,i,s,o){hideMessage("");var l={controllType:t,entityId:r,entityName:i,paymentDate:s,paymentMode:o};$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","payments-by-entity-id"),data:JSON.stringify(l),dataType:"html",cache:!1,timeout:6e5,success:function(a){if(""!=a){var t;return"FAILED"==(t=a.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?showMessage(!0,t[1]):($("#commonPaymentModelContents").html(a),$("#entityIdSearch").val(r),$("#entityNameSearch").val(i),e&&$("#commonPaymentModel").modal("show")),!1}},error:function(e){return console.log(e),!1}})}function showAddPaymentForm(e,a,t,r,i){$("#commonAddPaymentModel").modal("show"),$("#entityId").val(t),$("#entityName").val(r),$("#userName").val(i),hideModalMessage("")}function savePaymentHistory(e,a,t,r,i){return""==$("#"+e+" #entityId").val()?(showModalMessage(!0,"Entity Id is required"),!1):""==$("#"+e+" #entityName").val()?(showModalMessage(!0,"Entity name is required"),!1):""==$("#"+e+" #paymentDate").val()?(showModalMessage(!0,"Payment date is required"),!1):""==$("#"+e+" #paymentMode").val()||null==$("#"+e+" #paymentMode").val()?(showModalMessage(!0,"Payment mode is required"),!1):""==$("#"+e+" #paymentCurrency").val()||null==$("#"+e+" #paymentCurrency").val()?(showModalMessage(!0,"Payment currency is required"),!1):""==$("#"+e+" #paymentAmount").val()?(showModalMessage(!0,"Payment amount is required"),!1):""==$("#"+e+" #remarks").val()?(showModalMessage(!0,"Remarks is required"),!1):""==$("#fileupload1").parent("span").parent("p").parent("div").find("span.fileName").html()?(showModalMessage(!0,"Attachment is required"),!1):void $.ajax({type:"POST",url:getURLForHTML("dashboard","save-payment-history"),contentType:"application/json",data:JSON.stringify(getRequestForSavePaymentHistory(e,moduleId)),dataType:"html",cache:!1,timeout:6e5,success:function(a){if(""!=a){var t;return"FAILED"==(t=a.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?showModalMessage(!0,t[1]):(showModalMessage(!1,t[1]),resetPaymentHistoryForm(e)),!1}},error:function(e){return!1}})}function getRequestForSavePaymentHistory(e,a){var t={},r={},i={};i.paymentId=$("#"+e+" #paymentId").val(),i.entityId=$("#"+e+" #entityId").val(),i.entityName=$("#"+e+" #entityName").val(),i.paymentDate=$("#"+e+" #paymentDate").val(),i.paymentMode=$("#"+e+" #paymentMode").val(),i.paymentCurrency=$("#"+e+" #paymentCurrency").val(),i.paymentAmount=$("#"+e+" #paymentAmount").val(),i.remarks=escapeCharacters($("#"+e+" #remarks").val());var s=$("#fileupload1").parent("span").parent("p").parent("div").find("span.fileName").html();return""!=s&&null!=s&&(-1==$.inArray($.trim(s.split(".").pop().toLowerCase()),["gif","png","jpg","jpeg","pdf"])||(i.attachment=s)),i.addedBy=$("#"+e+" #userId").val(),r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType=a,r.userId=$("#"+e+" #userId").val(),t.authentication=r,t.commonPaymentHistoryDTO=i,t}function resetPaymentHistoryForm(e){$("#"+e+" #paymentDate").val(""),$("#"+e+" #paymentMode").val(""),$("#"+e+" #paymentCurrency").val(""),$("#"+e+" #paymentAmount").val(""),$("#"+e+" #remarks").val(""),removeDocument("1","3")}function validateRequestForSaveTeacherOfficialMail(e,a,t){if("ADD"==t){if(!validateEmail($("#"+e+" #officialEmailId").val()))return showMessage(!0,"Email is invalid"),!1;if(!validateEmail($("#"+e+" #confirmOfficialEmailId").val()))return showMessage(!0,"Confirm Email is invalid"),!1;if($("#"+e+" #officialEmailId").val().trim()!=$("#"+e+" #confirmOfficialEmailId").val().trim())return showMessage(!0,"Email and Confirm Email are not same"),!1;if(1==$("#teamUserCheck").is(":checked")){if(""==$("#"+e+" #teamPassword").val())return showMessage(!0,"Password is invalid"),!1;if(""==$("#"+e+" #confirmTeamPassword").val())return showMessage(!0,"Confirm Password is invalid"),!1;if($("#"+e+" #teamPassword").val().trim()!=$("#"+e+" #confirmTeamPassword").val().trim())return showMessage(!0,"Password and Confirm Password are not same"),!1}}return!0}function saveTeacherBufferHoursToAddAvailability(e,a){if(hideMessage(""),null==$("#"+e+" #bufferHours").val()||""==$("#"+e+" #bufferHours").val())return showMessage(!0,"Either buffer hours are empty or invalid"),!1;var t={};t.userId=$("#"+e+" #userId").val(),t.teacherId=$("#"+e+" #teacherId").val(),t.bufferHours=$("#"+e+" #bufferHours").val(),t.sessionUserId=USER_ID,$.ajax({type:"POST",contentType:"application/json",url:getURLFor("dashboard","save-teacher-buffer-hours-for-availability"),data:JSON.stringify(t),dataType:"json",success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!1,e.message),$("#teacherAddBufferAvailaibilityModel").modal("hide"),setTimeout((function(){callDashboardPageSchool(a,"approved-teachers")}),1e3)),!1}})}function saveTeacherOfficialMail(e,a,t,r,i,s){if(hideMessage(""),!validateRequestForSaveTeacherOfficialMail(e,a,t,r))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLFor("dashboard","save-teacher-official-email"),data:JSON.stringify(getRequestForSaveTeacherOfficialMail(e,a,t,r,i)),dataType:"json",success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!1,e.message),"withdraw"==s?setTimeout((function(){callDashboardPageSchool(i,"withdraw-teachers")}),1e3):"ADD"==t?($("#teacherOfficialModel").modal("hide"),setTimeout((function(){callDashboardPageSchool(i,"approved-teachers")}),1e3)):"REFRESH_TOKEN"==t||setTimeout((function(){callDashboardPageSchool(i,"approved-teachers")}),1e3)),!1}})}function activateInactiveBookaClassForPtmAndCustom(e,a,t,r,i,s){hideMessage("");var o={};o.schoolId=SCHOOL_ID,o.moduleId=a,o.roleModuleId=i,o.userId=USER_ID,o.teacherId=r,o.showOption=s,o.controllType=t,$.ajax({type:"POST",contentType:"application/json",url:getURLFor("dashboard","active-inactive-teacher-book-class-options"),data:JSON.stringify(o),dataType:"json",success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!1,e.message),setTimeout((function(){callDashboardPageSchool(i,"approved-teachers")}),1e3)),!1}})}function getRequestForSaveTeacherOfficialMail(e,a,t,r){var i={},s={},o={};return o.controllType=t,o.userId=$("#userId").val(),o.gotoMeetingIdT=$("#"+e+" #teamMeetingId").val(),1==$("#teamUserCheck").is(":checked")?(o.teamUserCreationStatus="T",o.gotoMeetingPasswordT=$("#"+e+" #teamPassword").val()):o.teamUserCreationStatus="F","ADD"==t?(o.teacherId=$("#"+e+" #teacherId").val(),o.officialEmail=$("#"+e+" #officialEmailId").val().trim()):o.teacherId=r,s.hash=getHash(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=a,s.userId=$("#userId").val(),i.authentication=s,i.teacherRequestDTO=o,i}function callTeacherOfficialEmailModal(e,a,t,r,i,s,o){$("#teacherOfficialModel").modal("show"),$("#teacherOfficialMailForm #teamPassword").val(""),$("#teacherOfficialMailForm #confirmTeamPassword").val(""),$("#teacherOfficialMailForm #teacherId").val(e),$("#teacherOfficialMailForm #userId").val(a),$("#teacherOfficialMailForm #teamMeetingId").val(r),$("#teacherOfficialMailForm #officialEmailId").val(t),$("#teacherOfficialMailForm #confirmOfficialEmailId").val(t),$("#teacherOfficialMailForm #zoomPassword").val(s),$("#teamUserCreationDiv").show(),""==t&&(i=""),""==i||""==t?($(".switch-input").prop("checked",!1),$("#teamUserCheck").prop("disabled",!1),$(".paswrd").css("display","none")):($(".switch-input").prop("checked",!0),$("#teamUserCheck").prop("disabled",!0),$(".paswrd").css("display","block"),$("#teacherOfficialMailForm #teamPassword").val(i),$("#teacherOfficialMailForm #confirmTeamPassword").val(i)),"Active"!=o&&"Inactive"!=o&&$("#teamUserCreationDiv").hide()}function callTeacherAddBufferAvailaibilitylModal(e,a,t){$("#teacherAddBufferAvailaibilityModel").modal("show"),$("#teacherAddBufferAvailabilityForm #teacherId").val(e),$("#teacherAddBufferAvailabilityForm #userId").val(a),$("#teacherAddBufferAvailabilityForm #bufferHours").val(t)}$(document).ready((function(){}));