function validateRequestForSchoolAnnounce(e){if(""==$("#"+e+" #announceFor").val())return showMessage(1,"Please select announcement for"),!1;var a=$("#announceFor").val();if("STUDENT"==(a=a.toString())&&""==$("#"+e+" #enrollType").val())return showMessage(1,"Please select enrollment type"),!1;if(""==$("#"+e+" #announceTitle").val())return showMessage(1,"Please enter subject"),!1;if($("#"+e+" #announceTitle").val().length>100)return showMessage(1,"You cannot have more than 100 characters in Subject"),!1;if(null!=editor1&&""==escapeCharacters(editor1.getData()))return showMessage(1,"Please add description "),!1;return!0}function submitSchoolAnnounce(e,a){if(hideMessage(""),!validateRequestForSchoolAnnounce(e))return!1;var n=new FormData;n.append("userId",$("#"+e+" #userId").val()),n.append("announceId",$("#"+e+" #announceId").val()),n.append("enrollType",$("#"+e+" #enrollType").select2("val")),n.append("announceFor",$("#"+e+" #announceFor").val()),n.append("standardId",$("#"+e+" #standardId").select2("val")),n.append("batchId",$("#"+e+" #batchId").select2("val")),n.append("studentId",$("#"+e+" #studentId").select2("val")),n.append("schoolId",$("#"+e+" #schoolId").val()),n.append("subjectId",$("#"+e+" #subjectIds").select2("val")),"BATCH"==$("#"+e+" #enrollType").val()?n.append("lmsPlatform","38,39,40,41"):"ALL"==$("#"+e+" #enrollType").val()||"TEACHER"==$("#"+e+" #announceFor").val()?n.append("lmsPlatform","37,38,39,40,41"):"SSP"==$("#"+e+" #enrollType").val()?n.append("lmsPlatform","37,40,41"):"SCHOLARSHIP"==$("#"+e+" #enrollType").val()?n.append("lmsPlatform","37,39,40,41"):"ONE_TO_ONE_FLEX"==$("#"+e+" #enrollType").val()?n.append("lmsPlatform","37"):n.append("lmsPlatform","37,39,41"),"TEACHER"==$("#"+e+" #announceFor").val()&&n.append("lmsPlatform","37,38,39,40,41"),n.append("announceTitle",escapeCharacters($("#"+e+" #announceTitle").val())),n.append("attachment",$("#"+e+" #fileuploadAnnounce").get(0).files[0]),null!=editor1&&n.append("announceRemark",escapeCharacters(editor1.getData())),n.append("announceStartDate",""),n.append("startTime",$("#"+e+" #startTimeInHrs").val()+":"+$("#"+e+" #startTimeInMin").val()+":00");$.ajax({type:"POST",url:getURLForHTML("dashboard","teacher-school-announce-submit"),data:n,dataType:"json",type:"POST",processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(a){return"0"==a.status||"2"==a.status?showMessage(!0,a.message):($("#"+e+" #announceFor").val("").trigger("change"),$("#"+e+" #enrollType").val("").trigger("change"),$("#"+e+" #lmsPlatform").val("").trigger("change"),$("#"+e+" #standardId").val("").trigger("change"),$("#"+e+" #batchId").val("").trigger("change"),$("#"+e+" #studentId").val("").trigger("change"),$("#"+e+" #batchId").html(""),$("#"+e+" #studentId").html(""),$("#"+e+" #fileupload1Span").text("No file chosen..."),$("#"+e+" #checkAnnounceEnd").prop("checked",!1),$("#"+e+" #endDateDiv").show(),$("#"+e+" #endTimeStartDiv").show(),initEditor(1,"mymceAnnounce","Please start here",!0),$("#"+e)[0].reset(),showMessage(!1,a.message)),!1},error:function(e){return!1}})}function callSubjectNameMultipleList(e,a,n,t,o,s){a=a.toString(),console.log("Building Subject dropdown",a),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","SUBJECT-NAME-LIST-BASED-ON-BATCHES",n,t,o,s,a)),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(a){if("0"==a.status||"2"==a.status)showMessage(!0,a.message);else{var n=a.mastersData.courseList;console.log(n);var t=$("#"+e+" #subjectIds");t.html(""),$.each(n,(function(e,a){t.append('<option value="'+a.key+'">'+a.value+" </option>")}))}},error:function(e){console.log(e)}})}function updateSchoolAnnounce(e,a,n,t){hideMessage("");var o={};o.userId=e,o.announceId=a,o.controllType=n,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-school-announce-update"),data:JSON.stringify(o),dataType:"json",success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!1,e.message),setTimeout((function(){callDashboardPageSchool(t,"school-announce-list")}),1e3)),!1},error:function(e){return!1}})}function callAnnounceReplyList(e,a){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-announce-reply"),data:JSON.stringify({announceId:e}),dataType:"html",cache:!1,timeout:6e5,success:function(e){if(""!=e){var a;return"FAILED"==(a=e.split("|"))[0]||"EXCEPTION"==a[0]||"SESSIONOUT"==a[0]?showMessage(!0,a[1]):$("#announceReplyListContent").html(e),!1}},error:function(e){return console.log(e),!1}})}function courseProviderList(e,a){$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","ALL-COURSE-PROVIDER-LIST","courseProList")),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(n){if("0"==n.status||"2"==n.status)showMessage(!0,n.message);else{var t=n.mastersData.courseList,o=$("#"+e+" #"+a);o.html(""),$.each(t,(function(e,a){36!=a.key&&37!=a.key&&38!=a.key&&39!=a.key&&40!=a.key&&41!=a.key||o.append('<option value="'+a.key+'">'+a.value+" </option>")}))}}})}$(document).ready((function(){console.log("dashboardAnnouncement")}));