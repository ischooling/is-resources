function callForUserSignUp(e,a){if(hideMessage(""),!validateRequestForSignup(e,a))return!1;var s=$("#"+e+" #signupMode").val().trim();$("#signup").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:getURLForSignup("enrollment/stage-1"),data:JSON.stringify(getRequestForSignup(e,a)),dataType:"json",cache:!1,timeout:6e5,success:function(a){return"0"==a.status||"2"==a.status?("0001"==a.statusCode&&($("#allReadyEmail #emailNotVerify").hide(),$("#allReadyEmail #emailVerify").show(),$("#allReadyEmail").modal("toggle")),"SCHOLARSHIP"!=s&&showMessage(!0,a.message),showHideDiv(!1,"signupShortForm"),showHideDiv(!0,"accountConfirmation"),"0041"!=a.statusCode&&"0038"!=a.statusCode||refreshCaptcha("captchaImage")):(showHideDiv(!0,"signupShortForm"),showHideDiv(!1,"accountConfirmation"),$("#emailId").html($("#"+e+" #email").val().trim())),$("#signup").prop("disabled",!1),!1},error:function(e){$("#signup").prop("disabled",!1)}})}function validateRequestForSignup(e,a){if(!validateFormAscii(e))return showMessage(!1,"Please use the English Keyboard while providing information"),!1;if(!validateEmail($("#"+e+" #email").val().trim()))return $("#"+e+" #email").css("color","#a9a9a9"),"STUDENT"==a?showMessage(!1,"Student email is either empty or invalid"):showMessage(!1,"Email is either empty or invalid"),!1;if(!validateEmail($("#"+e+" #confirmEmail").val().trim()))return $("#"+e+" #confirmEmail").css("color","#a9a9a9"),"STUDENT"==a?showMessage(!1,"Either confirm student email is empty or invalid"):showMessage(!1,"Either confirm email is empty or invalid"),!1;if($("#"+e+" #email").val().trim()!=$("#"+e+" #confirmEmail").val().trim())return $("#"+e+" #email").css("color","#a9a9a9"),$("#"+e+" #confirmEmail").css("color","#a9a9a9"),"STUDENT"==a?showMessage(!1,"Student email and confirm student email are not same"):showMessage(!1,"Email and confirm email are not same"),!1;if(!validPassword($("#"+e+" #password").val().trim()))return $("#"+e+" #password").css("color","#a9a9a9"),showMessage(!1,"Either create your password is empty or invalid"),!1;if(!validPassword($("#"+e+" #confirmPassword").val().trim()))return $("#"+e+" #confirmPassword").css("color","#a9a9a9"),showMessage(!1,"Either confirm password is empty or invalid"),!1;if($("#"+e+" #password").val().trim()!=$("#"+e+" #confirmPassword").val().trim())return $("#"+e+" #password").css("color","#a9a9a9"),$("#"+e+" #confirmPassword").css("color","#a9a9a9"),showMessage(!1,"Create your password and Confirm Your Password do not match"),!1;var s=$("#"+e+" #password").val().trim();return pattern.test(s)?validateCaptcha($("#"+e+" #captcha").val().trim())?!!$("#"+e+" #checkTerms").is(":checked")||(showMessage(!1,"Please accept terms and conditions"),!1):($("#"+e+" #captcha").css("color","#a9a9a9"),showMessage(!1,"Either captcha is empty or invalid"),!1):(showMessage(!1,"Passwords must match all requirements."),!1)}function getRequestForSignup(e,a){var s={},o={},r={},i=window.location.href.split("?isDemoUser")[1];return r.location=$("#"+e+" #location").val(),r.signupMode=$("#"+e+" #signupMode").val().trim(),$("#"+e+" #courseProviderId").length>0?r.courseProviderId=$("#"+e+" #courseProviderId").val().trim():r.courseProviderId=37,r.unregisteredId=$("#"+e+" #unregisteredId").val(),r.ras=$("#"+e+" #ras").val(),r.email=$("#"+e+" #email").val(),r.confirmEmail=$("#"+e+" #confirmEmail").val(),r.password=encode($("#"+e+" #password").val()),r.confirmPassword=encode($("#"+e+" #confirmPassword").val()),r.captcha=$("#"+e+" #captcha").val(),r.signupType="Online",r.userType=a,r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,""!=i&&null!=i&&(i=i.split("=")[1],r.isDemoUser=i),o.hash=getHash(),o.schoolId=SCHOOL_ID,o.schoolUUID=SCHOOL_UUID,o.userType=a,s.authentication=o,s.data=r,s}function callReferralCodeCounselorCheck(e,a){if(hideMessage(""),""==$("#referralCode").val().trim())return showMessage(!1,"Referral Code empty or invalid"),!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("verify-referral"),data:JSON.stringify(getRequestForReferralCodeCheck(e,a)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"!=e.status&&"2"!=e.status||showMessage(!0,"This referral code is not available, please try again."),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForReferralCodeCheck(e,a){var s={},o={},r={requestKey:"REFERRAL-AVAILABLE"};return r.requestValue=$("#referralCode").val().trim(),o.hash=getHash(),o.schoolId=SCHOOL_ID,o.schoolUUID=SCHOOL_UUID,o.userType=a,s.authentication=o,s.requestData=r,s}function checkRequestIsEligibleForEnrollment(e,a,s,o,r,i,t){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("eligible-for-enrollment"),data:JSON.stringify(checkRequestIsEligibleForEnrollmentPayload(e,a,s,o,r,i,t)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?(window.location.replace(e.message),showMessage(!0,"The selected learning is not available in your region right now.")):($("#email").attr("disabled",!1),$("#confirmEmail").attr("disabled",!1)),!1}})}function checkRequestIsEligibleForEnrollmentPayload(e,a,s,o,r,i,t){var l={},n={},c={requestKey:"ELIGIBLE-FOR-ENROLLMENT"};return c.signupMode=s,c.schoolId=o,c.timeZone=r,c.countryName=i,c.SCHOOL_UUID=SCHOOL_UUID,c.email=t,n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=a,l.authentication=n,l.data=c,l}$(document).ready((function(){console.log("signupCommon"),$("#signupButton").click((function(e){e.preventDefault(),callForUserSignUp("userSignupForm",moduleId)})),$("#resendEmail").click((function(e){e.preventDefault(),callForEmailResend($("#userSignupForm #email").val().trim(),moduleId,"false")})),$("#email").blur((function(){callEmailCheck("userSignupForm",moduleId)})),$("#notVerify").click((function(){callForEmailResend($("#userSignupForm #email").val().trim(),moduleId,"false")})),$("#referralCode").blur((function(){""!=$("#referralCode").val().trim()&&callReferralCodeCounselorCheck("userSignupForm",moduleId)}))}));