function validateRequestForEvaluationFormDetails(e,r){hideMessageErrorNew("evaluationFieldError"),hideMessageErrorNew("studEmailIdError"),hideMessageErrorNew("studFirstNameError"),hideMessageErrorNew("studLastNameError"),hideMessageErrorNew("studGenderError"),hideMessageErrorNew("dobError"),hideMessageErrorNew("ptFirstNameError"),hideMessageErrorNew("ptLastNameError"),hideMessageErrorNew("studentContactNoError"),hideMessageErrorNew("studentContactNoError"),hideMessageErrorNew("ptEmailIdError"),hideMessageErrorNew("parentContactNoError"),hideMessageErrorNew("countryIdError"),hideMessageErrorNew("parentContactNoError"),hideMessageErrorNew("fileupload1Error"),hideMessageErrorNew("fileupload2Error"),hideMessageErrorNew("currentGradeIdError"),hideMessageErrorNew("gradeIdError"),hideMessageErrorNew("genderError"),hideMessageErrorNew("addressError"),hideMessageErrorNew("newDateslectedError"),hideMessageErrorNew("countryTimezoneIdError"),hideMessageErrorNew("freeSlotListError"),hideMessageErrorNew("evaluationDocsError"),hideMessageErrorNew("counselorIdError");var a=!0;if(0!=$("#"+e+" #currentGradeId").val()&&null!=$("#"+e+" #currentGradeId").val()||(showMessageErrorNew(!0,"Previous/Current Grade is required","currentGradeIdError"),a=!1),0!=$("#"+e+" #gradeId").val()&&null!=$("#"+e+" #gradeId").val()||(showMessageErrorNew(!0,"Enrolling in Grade is required","gradeIdError"),a=!1),""!=$("#"+e+" #studFirstName").val()&&null!=$("#"+e+" #studFirstName").val()||(showMessageErrorNew(!0,"Student Name is required","studFirstNameError"),a=!1),""!=$("#"+e+" #studLastName").val()&&null!=$("#"+e+" #studLastName").val()||(showMessageErrorNew(!0,"Last Name is required","studLastNameError"),a=!1),0!=$("#"+e+" #studGender").val()&&null!=$("#"+e+" #studGender").val()||(showMessageErrorNew(!0,"Student Gender is required","studGenderError"),a=!1),null!=$("#"+e+" #dob").val()&&""!=$("#"+e+" #dob").val()||(showMessageErrorNew(!0,"Date of Birth is required","dobError"),a=!1),null!=$("#"+e+" #dob").val()&&""!=$("#"+e+" #dob").val()){var t=getDateInDateFormat($("#"+e+" #dob").val()),o=(t=changeDateFormat(t,"mm-dd-yyyy")).split("-");t=t.split("-").length,(3!=parseInt(t)||parseInt(o[1])>31||parseInt(o[0])>12)&&(showMessageErrorNew(!0,"Date of Birth is not valid","dobError"),a=!1)}return""!=$("#"+e+" #counselorId").val()&&null!=$("#"+e+" #counselorId").val()||(showMessageErrorNew(!0,"Referral Code is required","counselorIdError"),a=!1),""!=$("#"+e+" #ptFirstName").val()&&null!=$("#"+e+" #ptFirstName").val()||(showMessageErrorNew(!0,"Parent Name is required","ptFirstNameError"),a=!1),""!=$("#"+e+" #ptLastName").val()&&null!=$("#"+e+" #ptLastName").val()||(showMessageErrorNew(!0,"Last Name is required","ptLastNameError"),a=!1),0!=$("#"+e+" #countryId").val()&&null!=$("#"+e+" #countryId").val()||(showMessageErrorNew(!0,"Country is required","countryIdError"),a=!1),0!=$("#"+e+" #stateId").val()&&null!=$("#"+e+" #stateId").val()||(showMessageErrorNew(!0,"Province is required","stateIdError"),a=!1),0!=$("#"+e+" #cityId").val()&&null!=$("#"+e+" #cityId").val()||(showMessageErrorNew(!0,"City is required","cityIdError"),a=!1),""!=$("#"+e+" #isdCodeStudent").val()&&null!=$("#"+e+" #isdCodeStudent").val()||(showMessageErrorNew(!0,"ISD Code is required","studentContactNoError"),a=!1),""!=$("#"+e+" #studentContactNo").val()&&null!=$("#"+e+" #studentContactNo").val()||(showMessageErrorNew(!0,"Phone Number is required","studentContactNoError"),a=!1),""!=$("#"+e+" #newDateslected").val()&&null!=$("#"+e+" #newDateslected").val()||(showMessageErrorNew(!0,"Please select a Date","newDateslectedError"),a=!1),""!=$("#"+e+" #countryTimezoneId").val()&&null!=$("#"+e+" #countryTimezoneId").val()||(showMessageErrorNew(!0,"Please select a Time Zone","countryTimezoneIdError"),a=!1),""!=$("#"+e+" #freeSlotList").val()&&null!=$("#"+e+" #freeSlotList").val()||(showMessageErrorNew(!0,"Please select any one Slot","freeSlotListError"),a=!1),validateEmail($("#"+e+" #studEmailId").val().trim())||(showMessageErrorNew(!0,"Email is either empty or invalid","studEmailIdError"),a=!1),a||$("#evaluationDataSubmit").attr("disabled",!1),a}function callForEvaluationForm(e,r){if(!validateRequestForEvaluationFormDetails(e,r))return!1;$.ajax({type:"POST",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/evaluation-form-content",contentType:"application/json",data:JSON.stringify(getRequestForEvaluation(e,r)),dataType:"html",success:function(e){if(""!=e){var r;return"FAILED"==(r=e.split("|"))[0]||"EXCEPTION"==r[0]||"SESSIONOUT"==r[0]||"NOPAYMENTGATEWAYENABLED"==r[0]?(showMessageErrorNew(!0,r[1],"evaluationFieldError"),$("#evaluationDataSubmit").attr("disabled",!1)):($("#paymentEvaluationMethodModel").html(e),$("#evaluationRequestFormModal").modal({backdrop:"static",keyboard:!1})),!1}return!1},error:function(e){showMessage(!0,e.responseText)}})}function getRequestForEvaluation(e,r){var a={},t={},o={},l=window.location.href.split("?isDemoUser")[1];null!=l&&""!=l&&(l=l.split("=")[1],o.isDemoUser=l),o.evaluationId=$("#"+e+" #evaluationId").val(),o.evaluationUUID=$("#"+e+" #evaluationUUID").val(),o.studFirstName=toTitleCase($("#"+e+" #studFirstName").val()),o.studLastName=toTitleCase($("#"+e+" #studLastName").val()),o.studGender=$("#"+e+" #studGender").val(),o.studEmailId=$("#"+e+" #studEmailId").val(),o.ptFirstName=toTitleCase($("#"+e+" #ptFirstName").val()),o.ptLastName=toTitleCase($("#"+e+" #ptLastName").val()),o.gradeId=$("#"+e+" #gradeId").val(),o.gradeName=$("#"+e+" #gradeId :selected").text();var s=getDateInDateFormat($("#"+e+" #dob").val());o.dob=changeDateFormat(s,"mm-dd-yyyy"),o.isdCodeStudent=$("#"+e+" #isdCodeStudent").val(),o.isdCodeStudentIcon=$("#"+e+" #isdCodeStudentIcon").val(),o.studentContactNo=$("#"+e+" #studentContactNo").val(),$("#"+e+" #sameWhatsapp").is(":checked")?o.sameWhatsapp="Y":o.sameWhatsapp="N",$("#"+e+" #wtspNumber").val()==$("#"+e+" #studentContactNo").val()?o.sameWhatsapp="Y":o.sameWhatsapp="N",o.isdCodeWtsp=$("#"+e+" #isdCodeWtsp").val(),o.isdCodeWtspIcon=$("#"+e+" #isdCodeWtspIcon").val(),o.wtspNumber=$("#"+e+" #wtspNumber").val(),o.countryId=$("#"+e+" #countryId").val(),o.stateId=$("#"+e+" #stateId").val(),o.cityId=$("#"+e+" #cityId").val(),o.additionalInfo=escapeCharacters(toSentenceCase($("#"+e+" #additionalInfo").val())),o.counselorId=$("#"+e+" #counselorId").val().trim(),o.prevGradeId=$("#"+e+" #currentGradeId").val(),o.prevGradeName=$("#"+e+" #currentGradeId :selected").text();var i,d=[];""!=$("#"+e+" #evluationATTachement1").val()&&null!=$("#"+e+" #evluationATTachement1").val()&&((i={}).attachment=$("#"+e+" #evluationATTachement1").val(),i.attachmentType="34",d.push(i));""!=$("#"+e+" #evluationATTachement2").val()&&null!=$("#"+e+" #evluationATTachement2").val()&&((i={}).attachment=$("#"+e+" #evluationATTachement2").val(),i.attachmentType="35",d.push(i));""!=$("#"+e+" #evluationATTachement3").val()&&null!=$("#"+e+" #evluationATTachement3").val()&&((i={}).attachment=$("#"+e+" #evluationATTachement3").val(),i.attachmentType="36",d.push(i));""!=$("#"+e+" #evluationATTachement4").val()&&null!=$("#"+e+" #evluationATTachement4").val()&&((i={}).attachment=$("#"+e+" #evluationATTachement4").val(),i.attachmentType="37",d.push(i));""!=$("#"+e+" #evluationATTachement5").val()&&null!=$("#"+e+" #evluationATTachement5").val()&&((i={}).attachment=$("#"+e+" #evluationATTachement5").val(),i.attachmentType="38",d.push(i));return o.evaluationFormAttachment=d,o.countryTimezoneId=$("#"+e+" #countryTimezoneId option:selected").attr("custom_timezone_id"),o.timeZoneValue=$("#"+e+" #countryTimezoneId option:selected").val(),o.meetingDate=$("#"+e+" #newDateslected option:selected").text().trim(),o.meetingSlotId=$("#"+e+" #freeSlotList option:selected").attr("custom_slotidattr"),o.meetingSlotTime=$("#"+e+" #freeSlotList option:selected").val(),o.meetingDuration=$("#"+e+" #freeSlotList option:selected").attr("slotDuration"),o.location=$("#"+e+" #location").val(),o.meetingType="CONNECTMEET",t.hash=getHash(),t.schoolId=SCHOOL_ID,t.schoolUUID=SCHOOL_UUID,t.userType=r,a.authentication=t,a.data=o,a}function validateElement(e,r,a){if(flag=!0,"studEmailId"==r)validateEmail($("#"+e+" #studEmailId").val().trim())&&hideMessageErrorNew("studEmailIdError");else if("studFirstName"==r)""==$("#"+e+" #studFirstName").val()||null==$("#"+e+" #studFirstName").val()||hideMessageErrorNew("studFirstNameError");else if("studLastName"==r)""==$("#"+e+" #studLastName").val()||null==$("#"+e+" #studLastName").val()||hideMessageErrorNew("studLastNameError");else if("dob"==r)if(null==$("#"+e+" #dob").val()||""==$("#"+e+" #dob").val());else if(null!=$("#"+e+" #dob").val()&&""!=$("#"+e+" #dob").val()){var t=getDateInDateFormat($("#"+e+" #dob").val()),o=(t=changeDateFormat(t,"mm-dd-yyyy")).split("-");t=t.split("-").length,3!=parseInt(t)||parseInt(o[1])>31||parseInt(o[0])>12||hideMessageErrorNew("dobError")}else hideMessageErrorNew("dobError");else if("ptFirstName"==r)""==$("#"+e+" #ptFirstName").val()||null==$("#"+e+" #ptFirstName").val()||hideMessageErrorNew("ptFirstNameError");else if("ptLastName"==r)""==$("#"+e+" #ptLastName").val()||null==$("#"+e+" #ptLastName").val()||hideMessageErrorNew("ptLastNameError");else if("studentContactNo"==r)""==$("#"+e+" #isdCodeStudent").val()||null==$("#"+e+" #isdCodeStudent").val()||""==$("#"+e+" #studentContactNo").val()||null==$("#"+e+" #studentContactNo").val()||""==$("#"+e+" #isdCodeStudent").val()||null==$("#"+e+" #isdCodeStudent").val()||hideMessageErrorNew("studentContactNoError");else if("ptEmailId"==r)validateEmail($("#"+e+" #ptEmailId").val().trim())?validateEmail($("#"+e+" #ptEmailId").val().trim())&&validateEmail($("#"+e+" #studEmailId").val().trim())?$("#"+e+" #ptEmailId").val().trim()==$("#"+e+" #studEmailId").val().trim()?(showMessageErrorNew(!0,"Student & Parent Email cannot be same","ptEmailIdError"),flag=!1):(hideMessageErrorNew("studEmailIdError"),hideMessageErrorNew("ptEmailIdError")):hideMessageErrorNew("ptEmailIdError"):(showMessageErrorNew(!1,"Parent Email is either empty or invalid","ptEmailIdError"),flag=!1);else if("parentContactNo"==r)""==$("#"+e+" #isdCodeParent").val()||null==$("#"+e+" #isdCodeParent").val()||""==$("#"+e+" #parentContactNo").val()||null==$("#"+e+" #parentContactNo").val()||hideMessageErrorNew("parentContactNoError");else if("wtspNumber"==r)""==$("#"+e+" #isdCodeWtsp").val()||null==$("#"+e+" #isdCodeWtsp").val()||""==$("#"+e+" #wtspNumber").val()||null==$("#"+e+" #wtspNumber").val()||hideMessageErrorNew("wtspNumberError");else if("countryId"==r)0==$("#"+e+" #countryId").val()||null==$("#"+e+" #countryId").val()||hideMessageErrorNew("countryIdError");else if("stateId"==r)0==$("#"+e+" #stateId").val()||null==$("#"+e+" #stateId").val()||hideMessageErrorNew("stateIdError");else if("cityId"==r)0==$("#"+e+" #cityId").val()||null==$("#"+e+" #cityId").val()||hideMessageErrorNew("cityIdError");else if("fileupload1"==r){""==(l=$("#"+e+" #evluationATTachement1").val()).trim()||null==l.trim()||($("#fileupload1").removeClass("w100"),hideMessageErrorNew("evaluationFieldError"),hideMessageErrorNew("fileupload1Error"))}else if("fileupload2"==r){""==(l=$("#"+e+" #evluationATTachement2").val()).trim()||null==l.trim()||($("#fileupload2").removeClass("w100"),hideMessageErrorNew("evaluationFieldError"),hideMessageErrorNew("fileupload2Error"))}else if("fileupload3"==r){""==(l=$("#"+e+" #evluationATTachement3").val()).trim()||null==l.trim()||($("#fileupload3").removeClass("w100"),hideMessageErrorNew("evaluationFieldError"),hideMessageErrorNew("fileupload3Error"))}else if("fileupload4"==r){""==(l=$("#"+e+" #evluationATTachement4").val()).trim()||null==l.trim()||($("#fileupload4").removeClass("w100"),hideMessageErrorNew("evaluationFieldError"),hideMessageErrorNew("fileupload4Error"))}else if("fileupload5"==r){var l;""==(l=$("#"+e+" #evluationATTachement5").val()).trim()||null==l.trim()||($("#fileupload5").removeClass("w100"),hideMessageErrorNew("evaluationFieldError"),hideMessageErrorNew("fileupload5Error"))}else"address"==r?""==$("#"+e+" #address").val()||null==$("#"+e+" #address").val()||hideMessageErrorNew("addressError"):"currentGradeId"==r?0==$("#"+e+" #currentGradeId").val()||null==$("#"+e+" #currentGradeId").val()||hideMessageErrorNew("currentGradeIdError"):"gradeId"==r?0==$("#"+e+" #gradeId").val()||null==$("#"+e+" #gradeId").val()||hideMessageErrorNew("gradeIdError"):"counselorId"==r?0==$("#"+e+" #counselorId").val()||null==$("#"+e+" #counselorId").val()||hideMessageErrorNew("counselorIdError"):"freeSlotList"==r?""==$("#"+e+" #freeSlotList").val()||null==$("#"+e+" #freeSlotList").val()||hideMessageErrorNew("freeSlotListError"):"countryTimezoneId"==r?""==$("#"+e+" #countryTimezoneId").val()||null==$("#"+e+" #countryTimezoneId").val()||hideMessageErrorNew("countryTimezoneIdError"):"newDateslected"==r?""==$("#"+e+" #newDateslected").val()||null==$("#"+e+" #newDateslected").val()||hideMessageErrorNew("newDateslectedError"):"studGender"==r&&(0==$("#"+e+" #studGender").val()||null==$("#"+e+" #studGender").val()||hideMessageErrorNew("studGenderError"));return flag}function callEvaluatonPay(e,r){hideModalMessage(!0),$("#evaluationDataSubmit").attr("disabled",!1),$("#callPaymentStudentModal").modal({backdrop:"static",keyboard:!1}),$("#evaluationRequestFormModal").modal("hide"),setTimeout((function(){$("body").addClass("modal-open")}),1e3)}function callEvaluationEmailCheck(e,r){var a={};a.studEmail=e,a.studUUID=r,$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/evaluation-email-check",data:JSON.stringify(getFinalValue(a)),dataType:"html",success:function(e){if(""!=e){var r;return"FAILED"==(r=e.split("|"))[0]||"EXCEPTION"==r[0]||"SESSIONOUT"==r[0]?showMessageErrorNew(!0,r[1],"evaluationFieldError"):"SUCCESS"==r[0]?"EF-INITIATED"==r[2]?($("#emailVerfystatusModel").modal({backdrop:"static",keyboard:!1}),$("#evaluationRequestMesgForm #userName").html("Dear "+r[3]),$("#evaluationRequestMesgForm #viewUrl").attr("href",r[5]),$("#evaluationRequestMesgForm #pendingMesg").html("Your Connect To Impact Program Fee payment is under verification.<br>You will be notified via email <b>once payment is received.</b> You can contact us at <b>info@internationalschooling.org</b> for more information.")):"EF-SUCCESS"==r[2]?($("#emailVerfystatusModel").modal({backdrop:"static",keyboard:!1}),$("#evaluationRequestMesgForm #userName").html("Dear "+r[3]),$("#evaluationRequestMesgForm #viewUrl").attr("href",r[5]),$("#evaluationRequestMesgForm #viewRecipt").attr("href",r[7]),$("#evaluationRequestMesgForm #viewUrl").css({display:"inline-block"}),$("#evaluationRequestMesgForm #viewRecipt").css({display:"inline-block"}),$("#evaluationRequestMesgForm #pendingMesg").html("You have already made payment for the Connect To Impact Program.<br> Our team will reach out to you to schedule the date and time of the Connect To Impact Program.")):r[2]:$("#evaluationRequestContents").html(e),!1}return!1},error:function(e){showMessage(!0,e.responseText)}})}function validateForEvaluationSlots(e){hideMessageErrorNew("newDateslectedError"),hideMessageErrorNew("countryTimezoneIdError"),hideMessageErrorNew("freeSlotListError");var r=$("#"+e+" #newDateslected").val(),a=$("#"+e+" #counselorId").val();if(""==r||null==r)return $("#freeSlotList").html(""),showMessageErrorNew(!0,"Please select a date","newDateslectedError","newDateslected"),!1;var t=$("#"+e+" #schoolId").val(),o=$("#"+e+" #countryTimezoneId").val();if(null==o||0==o)return $("#freeSlotList").html(""),showMessageErrorNew(!0,"Please select a Time Zone","countryTimezoneIdError","countryTimezoneId"),!1;var l="",s="";if(""!=$("#location").val()){var i=JSON.parse($("#location").val());l=i.lat,s=i.lon}console.log("callEvaluationFormFreeSlots"),callEvaluationFormFreeSlots("date="+r+"&countryTimezoneId="+o+"&lat="+l+"&lon="+s+"&requestType=CONNECTMEET&book=Y&schoolId="+t+"&referralCode="+a)}function callEvaluationFormFreeSlots(e){console.log("evalution"),$("#freeSlotList").html("");var r="/get-request-demo-free-slots?"+e;$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+r.split("?")[0],data:JSON.stringify(parseUrlToJson(r)),dataType:"html",success:function(e){if(""!=e){var r;return"FAILED"==(r=e.split("|"))[0]||"EXCEPTION"==r[0]||"SESSIONOUT"==r[0]?(showMessageErrorNew(!0,r[1],"countryTimezoneIdError","countryTimezoneId"),$("#freeSlotList").html("")):$("#freeSlotList").html(e),!1}return!1},error:function(e){showMessage(!0,e.responseText)}})}