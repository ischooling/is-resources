function resendOTP(e){if("email"==e){if(hideMessageRequestDemoPage("emailError","email"),hideMessageRequestDemoPage("otpCodeEmailError","otpCodeEmail"),null==$("#email").val())return showMessageRequestDemoPage(!0,"Email is either empty or invalid","emailError","email"),!1;var t=$(".formClass").attr("id");$("#otpCodeEmail").val(""),callForOTP(t,"B2B",2,"S","B2B-REQUEST","0","E")}else if("phone_number"==e){if(hideMessageRequestDemoPage("isdCodeMobileNoError","userphone"),hideMessageRequestDemoPage("otpCodePhoneNumberError","otpCodePhoneNumber"),null==M.isNRIMobile($("#userphone").val()))return showMessageRequestDemoPage(!0,"Number is either empty or invalid","isdCodeMobileNoError","userphone"),!1;t=$(".formClass").attr("id");$("#otpCodePhoneNumber").val(""),callForOTP(t,"B2B",2,"S","B2B-REQUEST","0","N")}else{if(hideMessageRequestDemoPage("wtspNumberNoError","wtspNumber"),hideMessageRequestDemoPage("otpCodeNumberError","otpCodeNumber"),null==M.isNRIMobile($("#wtspNumber").val()))return showMessageRequestDemoPage(!0,"WhatsApp Number is either empty or invalid","wtspNumberNoError","wtspNumber"),!1;t=$(".formClass").attr("id");$("#otpCodeNumber").val(""),callForOTP(t,"B2B",2,"S","B2B-REQUEST","0","W")}}function sendOTP(e){if("email"==e){if(hideMessageRequestDemoPage("emailError","email"),!validateEmail($("#email").val()))return showMessageRequestDemoPage(!0,"Email is either empty or invalid","emailError","email"),!1;$("#otpVerifiedBy").val("E");var t=$(".formClass").attr("id");callForOTP(t,"B2B",1,"S","B2B-REQUEST","0","E")}else if("phone_no"==e){if(hideMessageRequestDemoPage("isdCodeMobileNoError","userphone"),null==M.isNRIMobile($("#userphone").val()))return showMessageRequestDemoPage(!0,"Number is either empty or invalid","isdCodeMobileNoError","userphone"),!1;$("#otpVerifiedBy").val("N");t=$(".formClass").attr("id");callForOTP(t,"B2B",1,"S","B2B-REQUEST","0","N")}else{if(hideMessageRequestDemoPage("wtspNumberNoError","wtspNumber"),null==M.isNRIMobile($("#wtspNumber").val()))return showMessageRequestDemoPage(!0,"WhatsApp Number is either empty or invalid","wtspNumberNoError","wtspNumber"),!1;$("#otpVerifiedBy").val("W");t=$(".formClass").attr("id");callForOTP(t,"B2B",1,"S","B2B-REQUEST","0","W")}}function verifyOTP(e){if("email"==e){if(hideMessageRequestDemoPage("emailError","email"),hideMessageRequestDemoPage("otpCodeEmailError","otpCodeEmail"),6!=$("#otpCodeEmail").val().length)return showMessageRequestDemoPage(!0,"Please enter valid OTP","otpCodeEmailError","otpCodeEmail"),!1;var t=$(".formClass").attr("id");callForOTP(t,"B2B",3,"S","B2B-REQUEST","0","E")}else if("phone_number"==e){if(hideMessageRequestDemoPage("isdCodeMobileNoError","userphone"),hideMessageRequestDemoPage("otpCodePhoneNumberError","otpCodePhoneNumber"),6!=$("#otpCodePhoneNumber").val().length)return showMessageRequestDemoPage(!0,"Please enter valid OTP","otpCodePhoneNumberError","otpCodePhoneNumber"),!1;t=$(".formClass").attr("id");callForOTP(t,"B2B",3,"S","B2B-REQUEST","0","N")}else{if(hideMessageRequestDemoPage("wtspNumberNoError","wtspNumber"),hideMessageRequestDemoPage("otpCodeNumberError","otpCodeNumber"),6!=$("#otpCodeNumber").val().length)return showMessageRequestDemoPage(!0,"Please enter valid OTP","otpCodeNumberError","otpCodeNumber"),!1;t=$(".formClass").attr("id");callForOTP(t,"B2B",3,"S","B2B-REQUEST","0","W")}}function getDefaultDateListForDemo(e,t,o){for(var a=new Date,s=0;s<o;s++)$("#"+e+" #"+t).append('<option value="'+changeDateFormat(a,"mm-dd-yyyy")+'">'+changeDateFormat(a,"MMM-dd-yyyy")+"</option>"),a.setDate(a.getDate()+1)}function changeDateFormat(e,t){return"mm-dd-yyyy"==t?(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate())+"-"+e.getFullYear():"yyyy-mm-dd"==t?e.getFullYear()+"-"+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate()):"dd-mm-yyyy"==t?(e.getDate()>9?e.getDate():"0"+e.getDate())+"-"+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+e.getFullYear():"MMM-dd-yyyy"==t?months[e.getMonth()]+" "+(e.getDate()>9?e.getDate():"0"+e.getDate())+", "+e.getFullYear():e.getFullYear()+"-"+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate())}function removeAllError(e){for(var t=["username","lastName","wtspNumber","wtspNumberNoError","email","isdCodeMobileNo","countryId","cityId","contactNumber","stateId","userphone"],o=0;o<t.length;o++)$("#"+e+" #"+t[o]).length&&($("#"+e+" #"+t[o]).removeClass("error"),$("#"+e+" #"+t[o]).next("p").html(""));hideServerError(e,"serverError"),hideMessageRequestDemoPage("recaptchaError","")}function showServerError(e,t,o,a){$("#"+t+" #"+o).html(a),e?($("#"+t+" #"+o).removeClass("server-success"),$("#"+t+" #"+o).addClass("server-error")):($("#"+t+" #"+o).addClass("server-success"),$("#"+t+" #"+o).removeClass("server-error"))}function hideServerError(e,t){$("#"+e+" #"+t).html("")}function validateRequestForMaster(e,t){return!(""==$("#"+e+" #"+t).val()||$("#"+e+" #"+t).val()<=0)}function getRequestForMasterNew(e,t){var o={};return o.requestKey=e,o.requestValue=t,o}function encode(e){return window.btoa(encodeURI(e))}function getGradesData(e){for(var t=[],o=0;o<e.length;o++){var a={};"N"==e[o]?(a.key=17,a.value="Nursery",t.push(a)):"KG"==e[o]?(a.key=11,a.value="KG",t.push(a)):"1"==e[o]?(a.key=12,a.value="Grade 1",t.push(a)):"2"==e[o]?(a.key=13,a.value="Grade 2",t.push(a)):"3"==e[o]?(a.key=14,a.value="Grade 3",t.push(a)):"4"==e[o]?(a.key=15,a.value="Grade 4",t.push(a)):"5"==e[o]?(a.key=16,a.value="Grade 5",t.push(a)):"6"==e[o]?(a.key=1,a.value="Grade 6",t.push(a)):"7"==e[o]?(a.key=2,a.value="Grade 7",t.push(a)):"8"==e[o]?(a.key=3,a.value="Grade 8",t.push(a)):"9"==e[o]?(a.key=4,a.value="Grade 9",t.push(a)):"10"==e[o]?(a.key=5,a.value="Grade 10",t.push(a)):"11"==e[o]?(a.key=6,a.value="Grade 11",t.push(a)):"12"==e[o]&&(a.key=7,a.value="Grade 12",t.push(a))}return t}function getGrades(e,t,o){$.each(o,(function(o,a){$("#"+e+" #"+t).append('<option grade_id="'+a.key+'" value="'+a.value+'">'+a.value+"</option>")}))}function getAllCountryTimezone(e,t,o){$.each(JSON.parse(tomezoneAsJson).countryTimezoneList,(function(t,a){$("#"+e+" #"+o).append('<option custom_timezone_id="'+a.key+'" value="'+a.value+'">('+a.extra+") - "+a.extra1+"/"+a.extra3+"</option>")})),$("#"+e+"Alternet #"+o).length&&$("#"+e+"Alternet #"+o).html($("#"+e+" #"+o).html())}function callCountries(e,t,o){$("#"+e+" #"+o).html('<option value="">Select country*</option>');var a=$("#"+e+" #"+o);$.each(JSON.parse(countriesAsJson).data,(function(e,t){a.append('<option custom_country_icon="'+t.extra+'" custom_dial_code="'+t.extra1+'" value="'+t.value+'" custom_country_value="'+t.key+'"> '+t.value+"</option>")}))}function callLocationAndSelectCountryNew(e){$.ajax({global:!1,type:"GET",url:PRO_IP_API_URL,success:function(t){callLocationAndSelectCountryNewFill(e,t)},error:function(e){checkonlineOfflineStatus()}})}function callLocationAndSelectCountryNewFill(e,t){null!=t&&""!=t&&($("#"+e+" #countryTimezoneId").length&&$("#countryTimezoneId").val(t.timezone).trigger("change"),$("#countryId").val(t.country).trigger("change"),$("#"+e+" #location").val(JSON.stringify(t)))}function showErrorForPPC(e,t,o){$("#"+e+" #"+t).addClass("error"),$("#"+e+" #"+t).next("p").html(o)}function validateRequestForB2BRequest(e){removeAllError(e);var t=!0;if(""!=$("#"+e+" #username").val()&&null!=$("#"+e+" #username").val()||(showMessageRequestDemoPage(!1,"First name is required","usernameError","username"),t=!1),""!=$("#"+e+" #lastName").val()&&null!=$("#"+e+" #lastName").val()||(showMessageRequestDemoPage(!1,"Last name is required","lastNameError","lastName"),t=!1),validateEmail($("#"+e+" #email").val())||(showMessageRequestDemoPage(!1,"Email is either empty or invalid","emailError","email"),t=!1),""!=$("#"+e+" #countryId").val()&&null!=$("#"+e+" #countryId").val()||(showMessageRequestDemoPage(!1,"Country is required","countryIdError","countryId"),t=!1),""!=$("#"+e+" #stateId").val()&&null!=$("#"+e+" #stateId").val()&&"0"!=$("#"+e+" #stateId").val()||(showMessageRequestDemoPage(!1,"State/Province is required","stateIdError","stateId"),t=!1),""!=$("#"+e+" #cityId").val()&&null!=$("#"+e+" #cityId").val()&&"0"!=$("#"+e+" #cityId").val()||(showMessageRequestDemoPage(!1,"City is required","cityIdError","cityId"),t=!1),""!=$("#"+e+" #isdCodeMobileNo").val()&&null!=$("#"+e+" #isdCodeMobileNo").val()||(showMessageRequestDemoPage(!1,"ISD Code is required","isdCodeMobileNoError","isdCodeMobileNo"),t=!1),"N"==$("#"+e+" #preOtpVerifiedBy").val()||"E"==$("#"+e+" #preOtpVerifiedBy").val()?(""!=$("#"+e+" #userphone").val()&&null!=$("#"+e+" #userphone").val()&&"0"!=$("#"+e+" #userphone").val()||(showMessageRequestDemoPage(!1,"Phone Number is either empty or invalid","isdCodeMobileNoError","userphone"),t=!1),""!=$("#"+e+" #email").val()&&null!=$("#"+e+" #email").val()&&"0"!=$("#"+e+" #email").val()||(showMessageRequestDemoPage(!1,"Email is either empty or invalid","otpCodeEmailError","email"),t=!1)):(""==$("#"+e+" #wtspNumber").val()||null==$("#"+e+" #wtspNumber").val()||"0"==$("#"+e+" #userphone").val()?(showMessageRequestDemoPage(!1,"WhatsApp Number is either empty or invalid","wtspNumberNoError","wtspNumber"),t=!1):hideMessageRequestDemoPage("wtspNumberNoError","wtspNumber"),""==$("#"+e+" #email").val()||null==$("#"+e+" #email").val()||"0"==$("#"+e+" #email").val()?(showMessageRequestDemoPage(!1,"Email is either empty or invalid","otpCodeEmailError","email"),t=!1):hideMessageRequestDemoPage("isdCodeMobileNoError","isdCodeMobileNoError")),console.log("cv :"+cv),cv){var o=grecaptcha.getResponse();console.log("cv response:"+o),0==o.length&&(showMessageRequestDemoPage(!1,"Please verify that you are not a robot","recaptchaError",""),t=!1)}return t}function callForB2BRequestForm(e,t,o,a){if(hideMessage(""),!validateRequestForB2BRequest(e))return!1;if("E"==$("#"+e+" #preOtpVerifiedBy").val()){if("Y"!=$("#isOtpVerifed").val())return showMessageRequestDemoPage(!1,"Email is not verified","emailError","email"),!1}else if("N"==$("#"+e+" #preOtpVerifiedBy").val()){if("Y"!=$("#isOtpVerifed").val())return showMessageRequestDemoPage(!1,"Phone Number is not verified","isdCodeMobileNoError","userphone"),!1}else if("Y"!=$("#isOtpVerifed").val())return showMessageRequestDemoPage(!1,"WhatsApp Number is not verified","wtspNumberNoError","wtspNumber"),!1;var s=$(this);if(s.data("requestRunning"))return!1;s.data("requestRunning",!0),customLoader(!0),$("#sendRequest").prop("disabled",!0),$.ajax({type:"POST",url:getURLForCommon("save-b2b-request-content"),contentType:"application/json",data:JSON.stringify(getRequestForB2BRequest(e,t,o)),dataType:"json",global:!1,success:function(t){if(console.log("callForB2BRequestForm "+JSON.stringify(t)),customLoader(!1),"0"==t.status||"2"==t.status)showServerError(!0,e,"serverError",t.message),showMessageRequestDemoPage(!0,t.message,"serverError","");else{var s="";"uat"==ENVIRONMENT?(s="https://internationalschooling.org/en/is-b2b-thankyou/",s="https://www.internationalschooling.org/"+o+"/thank-you.html"):"dev"==ENVIRONMENT?(s="http://localhost:8080/istest/common/ppc-request-thank-you",s="https://internationalschooling.org/en/is-b2b-thankyou/"):"uat2"==ENVIRONMENT?(s=BASE_URL+"istest/common/ppc-request-thank-you",s="https://internationalschooling.org/en/is-b2b-thankyou/"):(null==a&&(a="https://internationalschooling.org"),s="https://internationalschooling.org/en/is-b2b-thankyou/"),window.location.href=s}},complete:function(){window.setTimeout((function(){s.data("requestRunning",!1)}),1e4)},error:function(e){checkonlineOfflineStatus()||($(".callBackSubmit").prop("disabled",!1),$(".reqeustDemo").prop("disabled",!1),customLoader(!1))}})}function toTitleCase(e){return e.toLowerCase().replace(/(?:^|\s)\w/g,(function(e){return e.toUpperCase()}))}function getRequestForB2BRequest(e,t,o){var a={};a.firstName=toTitleCase($("#"+e+" #username").val()),a.lastName=toTitleCase($("#"+e+" #lastName").val()),a.email=$("#"+e+" #email").val(),a.isdCode=$("#"+e+" #isdCodeMobileNo").val(),"W"==$("#otpVerifiedBy").val()?a.phone=getPlaneFormattedPhone($("#"+e+" #wtspNumber").val()):a.phone=getPlaneFormattedPhone($("#"+e+" #userphone").val());var s=getCheckedData();a.prefrence=s||"N/A",a.isdIso=$("#"+e+" #isdCodeStudentIcon").val(),a.demoCode=$("#"+e+" #demoCode").val(),a.isOtpVerifed=$("#"+e+" #isOtpVerifed").val(),a.otpVerifiedBy=$("#"+e+" #otpVerifiedBy").val(),a.countryId=$("#"+e+" #countryId option:selected").attr("custom_country_value"),a.stateId=$("#"+e+" #stateId option:selected").attr("value"),a.cityId=$("#"+e+" #cityId option:selected").attr("value"),a.countryName=$("#"+e+" #countryId").find(":selected").text(),a.message=escapeCharacters($("#"+e+" #description").val()),a.location=$("#"+e+" #location").val(),a.campaignName=o,a.schoolId=SCHOOL_ID,a.utmSource=getCookie("us"),a.utmMedium=getCookie("um"),a.utmDescription=getCookie("uc"),a.originalUrl=getCookie("cu"),a.gclid=getCookie("gclid");var r=getCookie("ucam");return a.utmCampaign="Test"==r?o:r,a.utmTerm=getCookie("ut"),a}function getCheckedData(){return $("#b2bRequest input[name='preferredCommunication']:checked").map((function(){return $(this).val()})).get().join(",")}function validateRequestForCommonForm(e,t){hideMessageRequestDemoPage("serverError",""),hideMessageRequestDemoPage("usernameError","username"),hideMessageRequestDemoPage("lastNameError","lastName"),hideMessageRequestDemoPage("emailError","email"),hideMessageRequestDemoPage("gradeError","grade"),hideMessageRequestDemoPage("demoCodeError","demoCode"),hideMessageRequestDemoPage("countryTimezoneIdError","countryTimezoneId"),hideMessageRequestDemoPage("countryIdError","countryId"),hideMessageRequestDemoPage("isdCodeMobileNoError","isdCodeMobileNo"),hideMessageRequestDemoPage("isdCodeMobileNoError","userphone"),hideMessageRequestDemoPage("isdCodeWhatsupNoError","isdCodeWhatsupNo"),$("#wtspNumber").length>0&&hideMessageRequestDemoPage("isdCodeWhatsupNoError","wtspNumber"),hideMessageRequestDemoPage("chooseDateError","chooseDate"),hideMessageRequestDemoPage("freeSlotListError","viewFreeSlot"),hideMessageRequestDemoPage("termsAndConditionsError","termsAndConditions"),hideMessageRequestDemoPage("callbackError","callback"),hideMessageRequestDemoPage("recaptchaError","");var o=!0,a=$("#leadType").val();if(""==a&&(showMessageRequestDemoPage(!0,"Please choose request type","leadTypeError","leadType"),o=!1),"CB"==a&&(""!=$("#"+e+" #callback").val()&&null!=$("#"+e+" #callback").val()||(showMessageRequestDemoPage(!0,"Please Select your call me back reason","callbackError","callback"),o=!1)),""!=$("#"+e+" #username").val()&&null!=$("#"+e+" #username").val()||(showMessageRequestDemoPage(!0,"First name is required","usernameError","username"),o=!1),""!=$("#"+e+" #lastName").val()&&null!=$("#"+e+" #lastName").val()||(showMessageRequestDemoPage(!0,"Last name is required","lastNameError","lastName"),o=!1),validateEmail($("#"+e+" #email").val())||(showMessageRequestDemoPage(!1,"Email is either empty or invalid","emailError","email"),o=!1),""!=$("#"+e+" #grade").val()&&null!=$("#"+e+" #grade").val()||(showMessageRequestDemoPage(!0,"Grade is required","gradeError","grade"),o=!1),""!=$("#"+e+" #countryTimezoneId").val()&&null!=$("#"+e+" #countryTimezoneId").val()||(showMessageRequestDemoPage(!0,"Timezone is required","countryTimezoneIdError","countryTimezoneId"),o=!1),""!=$("#"+e+" #countryId").val()&&null!=$("#"+e+" #countryId").val()||(showMessageRequestDemoPage(!0,"Country is required","countryIdError","countryId"),o=!1),""!=$("#"+e+" #isdCodeMobileNo").val()&&null!=$("#"+e+" #isdCodeMobileNo").val()||(showMessageRequestDemoPage(!0,"ISD Code is required","isdCodeMobileNoError","isdCodeMobileNo"),o=!1),""!=$("#"+e+" #userphone").val()&&null!=$("#"+e+" #userphone").val()||(showMessageRequestDemoPage(!0,"Phone Number is required","isdCodeMobileNoError","userphone"),o=!1),""!=$("#"+e+" #isdCodeWtspStudent").val()&&null!=$("#"+e+" #isdCodeWtspStudent").val()||(showMessageRequestDemoPage(!0,"Whatsapp ISD Code is required","isdCodeWhatsupNoError","isdCodeWtspStudent"),o=!1),$("#"+e+" #stateId").length&&(0!=$("#"+e+" #stateId").val()&&null!=$("#"+e+" #stateId").val()||(showMessageRequestDemoPage(!0,"State/Province is required","stateIdError","stateId"),o=!1)),$("#"+e+" #cityId").length&&(0!=$("#"+e+" #cityId").val()&&null!=$("#"+e+" #cityId").val()||(showMessageRequestDemoPage(!0,"City is required","cityIdError","cityId"),o=!1)),"I"!=a&&(null!=$("#"+e+" #chooseDate").val()&&""!=$("#"+e+" #chooseDate").val()||(showMessageRequestDemoPage(!0,"Please select a date","chooseDateError","chooseDate"),o=!1),null==$("input[name='slotTime']:checked").val()&&(showMessageRequestDemoPage(!0,"Please select any one Slot.","freeSlotListError","viewFreeSlot"),o=!1)),console.log("cv :"+cv),cv){var s=grecaptcha.getResponse();console.log("cv response:"+s),0==s.length&&(showMessageRequestDemoPage(!1,"Please verify that you are not a robot","recaptchaError",""),o=!1)}return o}function base64Encode(e){return btoa(unescape(encodeURIComponent(e)))}function encrypt(e,t){let o="";for(let a=0;a<e.length;a++){let s=e.charCodeAt(a)^t;o+=String.fromCharCode(s)}return o}function decrypt(e,t){let o="";for(let a=0;a<e.length;a++){let s=e.charCodeAt(a)^t;o+=String.fromCharCode(s)}return o}function callCommonFreeSlotsList(e){if(null==$("#"+e+" #chooseDate").val()||""==$("#"+e+" #chooseDate").val())return!1;customLoader(!0),$.ajax({global:!1,type:"POST",url:getURLForCommon("free-slots-list"),contentType:"application/json",data:JSON.stringify(getRequestForFreeSlotsList(e)),dataType:"json",success:function(e){customLoader(!1),"0"==e.statusResponse.statusCode||"2"==e.statusResponse.statusCode||buildListForFreeSlots(e.requestDemoFreeSlotsDTO,$("#viewFreeSlot"),"")},error:function(e){checkonlineOfflineStatus()||(showMessage(!0,e.responseText),customLoader(!1))}})}function getRequestForFreeSlotsList(e){var t={},o="",a="";if(""!=$("#location").val()){var s=JSON.parse($("#location").val());o=s.lat,a=s.lon}return t.date=$("#"+e+" #chooseDate").val(),t.countryTimezoneId=$("#"+e+" #countryTimezoneId").val(),t.lat=o,t.lon=a,t.requestType="REQUESTDEMO",t.book="Y",t.resStatus="fresh",t.schoolId=SCHOOL_ID,t}function buildListForFreeSlots(e,t,o){t.html(""),""!=e?(t.append('<option value="0">'+o+"</option>"),$.each(e,(function(e,o){null!=o.id&&null!=o.startTime&&t.append('<div class="slot-wrapper slot-wrapper-flex"><div class="time-slot"><div class="form-check"><input class="form-check-input time-radio" type="radio" name="slotTime" id="'+o.id+'" value="'+o.startTime+"-"+o.endTime+'" slotIdAttr="'+o.id+'" slotDateAttr="'+o.meetingDate+'"><label class="meeting-time" for="'+o.id+'">'+o.startTime+"-"+o.endTime+"</label></div></div></div>")}))):t.append("No slots available, please try with another date.")}function changeTimezone(e,t){console.log("provide : "+e);let o=e.toLocaleString("en-US",{timeZone:t});console.log("date with timezone: "+t+": "+o)}function calcTime(e){var t=new Date((new Date).toUTCString());return console.log("current date : "+t+" offset : "+t.getTimezoneOffset()+" getTime: "+t.getTime()),utc=t.getTime()+6e4*t.getTimezoneOffset(),console.log("utc : "+utc),nd=new Date(utc+36e5*e),"The local time in "+nd.toLocaleString()}function sendOTPVia(e,t,o){"Y"==e?($(".otp-process-wrapper, .via_mobile_otp, .via_mobile_otp_btns").show(),$(".via_email_otp_btns, .verify-email-info, .via_phone_otp_btns, .verify-phoneNumber-info").hide(),$(".phone_Sec").hide(),$("#preOtpVerifiedBy").val("W")):"Y"==t?($(".otp-process-wrapper, .via_mobile_otp_btns, .via_phone_otp_btns, .verify-phoneNumber-info").hide(),$(".otp-process-wrapper, .via_phone_otp").hide(),$(".via_mobile_otp").hide(),$(".via_email_otp_btns, .via_email_otp, .verify-email-info").show(),$(".via_email_otp_btns, .via_email_otp_btns").show(),$(".phone_Sec, .via_phone_otp").show(),$("#preOtpVerifiedBy").val("E")):"Y"==o&&($(".otp-process-wrapper .via_phone_otp_btns, .verify-phoneNumber-info").show(),$(".otp-process-wrapper .via_mobile_otp_btns").hide(),$(".via_email_otp_btns, .verify-email-info").hide(),$(".via_mobile_otp").hide(),$(".phone_Sec, .via_phone_otp").show(),$("#preOtpVerifiedBy").val("N"))}function getCountryOtpFlag(e){if(hideMessage(""),null==e||null==e||""==e)return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMasterNew("COUNTRY_OTP_FLAG",e)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message);else{var t=e.data[0].value,o=e.data[0].extra,a=e.data[0].extra1;"N"==$("#isOtpVerifed").val()&&sendOTPVia(t,o,a)}},error:function(e){customLoader(!1),showMessageRequestDemoPage(!0,e.responseText,"serverError","")}})}function validateCharacters(e){return/^[\x00-\x7F]*$/.test(e)}function validateFormAscii(e){var t=$("#"+e).find("input:text, input[type=password], textarea, input[type=email],input[type=file]"),o=!0;return $(t).each((function(e){var t=$(this);"location"==t.attr("name")||t.val()&&(validateCharacters(t.val())||(console.log("inside the illegal code"),o&&(o=!1)))})),o}function moveStep(e,t,o){if("1"==e)$(".step-1").removeClass("step"),$(".step-2, .step-3, .step-4").addClass("step");else if("2"==e){var a=!0;null!=$("#"+o+" #fname").val()&&null!=$("#"+o+" #fname").val()&&""!=$("#"+o+" #fname").val()||(showFromErrorMessage("fnameError",!1,"First name is required"),a=!1),null!=$("#"+o+" #lname").val()&&null!=$("#"+o+" #lname").val()&&""!=$("#"+o+" #lname").val()||(showFromErrorMessage("lnameError",!1,"Last name is required"),a=!1),null!=$("#"+o+" #email").val()&&null!=$("#"+o+" #email").val()&&""!=$("#"+o+" #email").val()||(showFromErrorMessage("emailError",!1,"Email is required"),a=!1),null!=$("#"+o+" #countryId").val()&&null!=$("#"+o+" #countryId").val()&&""!=$("#"+o+" #countryId").val()||(showFromErrorMessage("countryError",!1,"Country is required"),a=!1),null!=$("#"+o+" #stateId").val()&&null!=$("#"+o+" #stateId").val()&&"0"!=$("#"+o+" #stateId").val()||(showFromErrorMessage("stateError",!1,"State is required"),a=!1),null!=$("#"+o+" #cityId").val()&&null!=$("#"+o+" #cityId").val()&&"0"!=$("#"+o+" #cityId").val()||(showFromErrorMessage("cityError",!1,"City is required"),a=!1),null!=$("#"+o+" #wtspNumber").val()&&null!=$("#"+o+" #wtspNumber").val()&&""!=$("#"+o+" #wtspNumber").val()||(showFromErrorMessage("wtspNumberError",!1,"Whatsapp Number  is required"),a=!1),a&&($(".step-2").removeClass("step"),$(".step-1, .step-3, .step-4").addClass("step"))}else"3"==e?("email"==t?($(".email-verification").show(),$(".whatsapp-verification").hide(),$("#emailVerify").val($("#email").val())):($(".email-verification").hide(),$(".whatsapp-verification").show(),$("#wtspNumberVerify").val($("#wtspNumber").val())),$(".step-3").removeClass("step"),$(".step-1, .step-2, .step-4").addClass("step")):"4"==e&&($(".step-4").removeClass("step"),$(".step-1, .step-2, .step-3").addClass("step"))}function showFromErrorMessage(e,t,o){t?($("#"+e).show(),$("#"+e).text(o),$("#"+e).css({color:"green"})):($("#"+e).text(o),$("#"+e).css({color:"red"}),$("#"+e).show())}function checkField(e,t,o){e=$("#"+e).val(),""!=$("#"+e).val()&&null!=e&&null!=e&&$("#"+t).text("").hide()}$(document).ready((function(){$("#CB").click((function(){$("#callbackReason").show(),$("#demoDate").show(),$("#demoLabel").hide(),$("#callbackLabel").show(),$("#demoSlot").show(),$("#dateLabelTitle").html("Select Date for Callback*"),$("#demoTimeTitle").html("Select Time for Callback*"),$(".inquirySubmit").css("display","none"),$(".reqeustDemo").css("display","none"),$(".callBackSubmit").css("display","block"),$("#leadType").val("CB")})),$("#I").click((function(){$("#callbackReason").hide(),$("#demoDate").hide(),$("#demoSlot").hide(),$(".message-div").show(),$(".inquirySubmit").css("display","block"),$(".reqeustDemo").css("display","none"),$(".callBackSubmit").css("display","none"),$("#leadType").val("I")})),$("#BD").click((function(){$("#callbackReason").hide(),$("#demoDate").show(),$("#demoLabel").show(),$("#demoSlot").show(),$("#dateLabelTitle").html("Select Date for Demo*"),$("#demoTimeTitle").html("Select Time for Demo*"),$(".inquirySubmit").css("display","none"),$(".reqeustDemo").css("display","block"),$(".callBackSubmit").css("display","none"),$("#leadType").val("BD")})),$(".formtab label").click((function(){var e=$(this).parent().find("input").attr("value");$(".formClass").attr("id",e),$(".formClass").attr("name",e)}));var e=!1;if(!e){var t=document.querySelector("#userphone");if(itiContcat=window.intlTelInput(t,{separateDialCode:!0}),t.addEventListener("countrychange",(function(e){$("#isdCodeStudentIcon").val(itiContcat.getSelectedCountryData().iso2),$("#isdCodeMobileNo").val(itiContcat.getSelectedCountryData().dialCode),$("#isdCodeWtspStudentIcon").val(itiContcat.getSelectedCountryData().iso2),$("#isdCodeWtspStudent").val(itiContcat.getSelectedCountryData().dialCode)})),$("#wtspNumber").length>0){var o=document.querySelector("#wtspNumber");itiContcat2=window.intlTelInput(o,{separateDialCode:!0}),o.addEventListener("countrychange",(function(e){$("#isdCodeWtspStudentIcon").val(itiContcat2.getSelectedCountryData().iso2),$("#isdCodeWtspStudent").val(itiContcat2.getSelectedCountryData().dialCode),$("#isdCodeStudentIcon").val(itiContcat2.getSelectedCountryData().iso2),$("#isdCodeMobileNo").val(itiContcat2.getSelectedCountryData().dialCode)}))}e=!0}$(".same-as").css({opacity:"0.5"}),$("#chooseDate, #countryTimezoneId").on("change",(function(e){""!=$(this).val()?callCommonFreeSlotsList($(".formClass").attr("id")):($("#selectedMeetingDate").html(""),$("#bookMeetingslot").removeClass("active"))})),$("#stateId").on("change",(function(e){console.log(e.target.value),callCities("b2bRequest",e.target.value,"stateId")})),$("#countryId").on("change",(function(e){getCountryOtpFlag(e.target.value);let a=$("#b2bRequest #countryId option:selected").attr("custom_country_value");callStates("b2bRequest",a,"countryId"),("Y"!=$("#isOtpVerifed").val()||"N"!=$("#otpVerifiedBy").val()&&"W"!=$("#otpVerifiedBy").val())&&(t=document.querySelector("#userphone"),itiContcat.setCountry(""),itiContcat.setCountry($("#countryId option:selected").attr("custom_country_icon")),$("#isdCodeMobileNoIcon").val(itiContcat.getSelectedCountryData().iso2),$("#isdCodeMobileNo").val(itiContcat.getSelectedCountryData().dialCode),$("#wtspNumber").length>0&&(o=document.querySelector("#wtspNumber"),itiContcat2.setCountry(""),itiContcat2.setCountry($("#countryId option:selected").attr("custom_country_icon")),$("#isdCodeWhatsupNoIcon").val(itiContcat2.getSelectedCountryData().iso2),$("#isdCodeWhatsupNo").val(itiContcat2.getSelectedCountryData().dialCode)))})),$("#sameWhatsapp").on("click",(function(){var e=$("#userphone").val(),t=$("#isdCodeStudentIcon").val();1==$(this).is(":checked")?($("#wtspNumber").val(e),$("#userphone").attr("disabled",!0).css({background:"#e3e3e3"}),$("#wtspNumber").length>0&&($("#wtspNumber").attr("disabled",!0).css({background:"#e3e3e3"}),itiContcat2.setCountry(""),itiContcat2.setCountry(t),$("#isdCodeWtspStudentIcon").val(itiContcat2.getSelectedCountryData().iso2),$("#isdCodeWtspStudent").val(itiContcat2.getSelectedCountryData().dialCode))):($("#wtspNumber").length>0&&($("#wtspNumber").val(""),$("#wtspNumber").attr("disabled",!1).css({background:"#fff"})),$("#userphone").attr("disabled",!1).css({background:"#fff"}))})),$("#userphone").on("keyup",(function(){$("#userphone").val().length>6?($("#sameWhatsapp").attr("disabled",!1),$(".same-as").css({opacity:"1"})):($("#wtspNumber").length>0&&$("#wtspNumber").val(""),$("#sameWhatsapp").prop("checked",!1),$("#sameWhatsapp").attr("disabled",!0),$(".same-as").css({opacity:"0.5"}))})),callCountries("b2bRequest",0,"countryId"),getAllCountryTimezone("b2bRequest",0,"countryTimezoneId"),getGrades("b2bRequest","grade",getGradesData(actualGrades)),getDefaultDateListForDemo("b2bRequest","chooseDate",MAX_LIMIT),callLocationAndSelectCountryNew("b2bRequest"),$("#wtspNumber").on("keyup",(function(){var e=$("#wtspNumber").val().length;e>5&&e<11?$(".send-otp").removeClass("disable-btn"):$(".send-otp").addClass("disable-btn")})),$("#userphone").on("keyup",(function(){var e=$("#userphone").val().length;e>5&&e<11?$(".send-otp-to-phone").removeClass("disable-btn"):$(".send-otp-to-phone").addClass("disable-btn")})),$(".change-number").on("click",(function(){hideMessageRequestDemoPage("wtspNumberNoError","wtspNumber"),hideMessageRequestDemoPage("otpCodeNumberError","verifyOTP"),hideMessageRequestDemoPage("otpCodeNumberError","otpCodeNumber"),hideMessageRequestDemoPage("emailError","email"),hideMessageRequestDemoPage("otpCodeEmailError","verifyOTP"),hideMessageRequestDemoPage("otpCodeEmailError","otpCodeEmail"),hideMessageRequestDemoPage("isdCodeMobileNoError","userphone"),hideMessageRequestDemoPage("otpCodePhoneNumberError","verifyOTP"),hideMessageRequestDemoPage("otpCodePhoneNumberError","otpCodePhoneNumber"),$(".otp-message").css("display","inline-block"),$(".otp-field-wrapper").css("display","none"),$(".change-number").addClass("hide-btn"),$(this).parent().hasClass("via_email_otp_btns")?($("#email").attr("disabled",!1),$(".send-otp-to-mail").removeClass("hide-btn").addClass("disable-btn"),$("#email").val(""),$("#otpCodeEmail").val("")):$(this).parent().hasClass("via_phone_otp_btns")?($("#userphone").attr("disabled",!1),$(".send-otp-to-phone").removeClass("hide-btn").addClass("disable-btn"),$("#userphone").val(""),$("#otpCodePhoneNumber").val("")):($("#wtspNumber").attr("disabled",!1),$(".send-otp").removeClass("hide-btn").addClass("disable-btn"),$("#wtspNumber").val(""),$("#otpCodeNumber").val(""))})),$(".change-email").on("click",(function(){hideMessageRequestDemoPage("emailError","email"),hideMessageRequestDemoPage("otpCodeError","verifyOTP"),hideMessageRequestDemoPage("otpCodeError","otpCodeEmail"),$("#email").val(""),$("#otpCodeEmail").val(""),$("#email").attr("disabled",!1),$(".otp-message").css("display","inline-block"),$(".otp-field-wrapper").css("display","none"),$(".send-otp").removeClass("hide-btn").addClass("disable-btn"),$(".change-number").addClass("hide-btn")})),$("#email").on("keyup",(function(){validateEmail($("#email").val())?$(".send-otp-to-mail").removeClass("disable-btn"):$(".send-otp-to-mail").addClass("disable-btn")}))}));