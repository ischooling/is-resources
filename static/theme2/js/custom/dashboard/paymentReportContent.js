function paymentReport(){
	var html =
	'<div class="col-md-12 mt-4">'
		+'<div class="main-card mb-3">'
			+'<div class="full">'
				+'<h5 class="text-primary font-weight-semi-bold">STUDENT LIST</h5>'
				+'<div class="d-flex border-bottom full pb-2 border-primary">'
					+'<div class="search full mr-auto" style="max-width:450px">'
						+'<input type="text" id="studentName"  placeholder="Search by Student Name,Country/City or Enrollment No." class="form-control border-0 text-primary" style="background: #f0f9ff;"/>'
					+'</div>'
					+'<div class="filter-btn ml-2 d-inline-flex align-items-center">'
						+'<a href="javascript:void(0)" class="btn btn-outline-primary mr-1 showFilterForm">'
							+'<i class="fa fa-filter"></i>'
						+'</a>'
						// +'<a href="javascript:void(0)" class="btn btn-outline-primary" onclick="downloadStudentPaymentReport(\'\',false,1)">'
						// 	+'<i class="fa fa-download"></i>'
						// +'</a>'
					+'</div>'
				+'</div>'
				+filterStudentPaymentReportForm()
			+'</div>'
			+'<div class="row m-0" id="consolidate">'
				
			+'</div>'
			+'<div class="full mt-2" id="studentPaymentReport">'
				+'<table id="studentPaymentReportTable" class="table table-hover table-striped table-bordered">'
					// +'<thead>'
					// 	+'<tr>'
					// 		+'<th>&nbsp;</th>'
					// 	+'</tr>'
					// +'</thead>'
					+'<tbody>'
					+'</tbody>'
				+'</table>'
				+'<div class="full mt-2">'
					+'<ul id="pagination" class="pagination-sm"></ul>'
				+'</div>'
			+'</div>'
		+'</div>'
	+'</div>';
	return html;
}

function cardDetails(data){
	var html = '';
		$.each(data.reports, function(key, item) {
			html+='<tr>'
					+'<td class="p-0">'
						+'<div class="card border-primary pt-1 mb-3"style="border-left:8px solid">'
							+'<div class="card-body pt-4">'
								+'<div class="row">'
									+'<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 px-1">'
										+'<div class="d-flex">'
											+'<span class="serial-no text-primary font-weight-semi-bold d-inline-flex align-items-center font-size-sm p-2 mb-2 mr-2 rounded" style="background:#f0f9ff">'+((($('#pageNumber').val() - 1)*$('#pageSize').val())+(key+1))+'.</span>'
											+'<div class="p-2 mb-2 w-100 rounded" style="background:#f0f9ff">'
												+'<h6 class="full">'
													+'<span class="text-uppercase font-weight-semi-bold d-inline-block" style="font-size:12px">'+item.rollNumber+' | '+item.enrolledStatus+' | '+item.gradeName+ ' | '+item.learningPlan+ ' | '+item.lmsPlatform+ '</span>'
													// +'<span class="learningPlan d-inline-block opacity-7 font-size-sm float-right">'+item.learningPlan+'</span>'
												+'</h6>'
												+'<h5 class="mb-1">'
													+'<span class="font-weight-bold text-primary">'+item.studentName+'</span>'
													// +'<span class="font-weight-bold">'+item.gradeName+'</span>'
												+'</h5>'
											+'</div>'
										+'</div>'
									+'</div>'
									+'<div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 col-12 px-1">'
										+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
											+'<h5 class="font-weight-semi-bold">Parent | Guardian Name</h5>'
											+'<div class="opacity-7 font-size-sm">'+item.parentName+'</div>'
										+'</div>'
									+'</div>'
									+'<div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 col-12 px-1">'
										+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
											+'<h5 class="font-weight-semi-bold">City | Country</h5>'
											+'<div class="opacity-7 font-size-sm">'+item.cityName +' | '+item.countryName+'</div>'
										+'</div>'
									+'</div>'
									+'<div class="col-xl-2 col-lg-4 col-md-6 col-sm-6 col-12 px-1 dropdown cursor">'
										+'<div class="full p-2 mb-2 dropdown-toggle rounded" aria-haspopup="true" aria-expanded="true" data-toggle="dropdown" style="background:#f0f9ff">'
											+'<h5 class="font-weight-semi-bold">Overall Progress Report</h5>'
											+'<div class="opacity-7 font-size-sm">'+item.progressReport+'</div>'
										+'</div>';
										if(item.creditDetails!=null && item.creditDetails.length>0){
											html+=
											'<div tabindex="-1" role="menu" aria-hidden="true" class="dropdown-menu-xl dropdown-menu p-2">'
												+'<table class="table mb-0">'
													+'<thead>'
														+'<tr>'
															+'<th>Course Name</th>'
															+'<th>Credit</th>'
															+'<th>Score</th>'
														+'</tr>'
													+'</thead>'
													+'<tbody>';
														$.each(item.creditDetails, function(key, progress) {
															html+=
															'<tr>'
																+'<td>'+progress.subjectName+'</td>'
																+'<td>'+progress.credits+'</td>'
																+'<td>'+progress.progress+'</td>'
															+'</tr>';
														});
													html+=
													'</tbody>'
												+'</table>'
											+'</div>';
										}
									html+=
									'</div>'
									+'<div class="col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12">'
										+'<div class="row pl-4">'
											+'<div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 px-1">'
												+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
													+'<h5 class="font-weight-semi-bold">Enrollment Date</h5>'
													+'<div class="opacity-7 font-size-sm">'+item.semesterStartDate+'</div>'
												+'</div>'
												+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
													+'<h5 class="font-weight-semi-bold">Fee Details <span class="font-weight-semi-bold  d-inline-block float-right font-size-md '+(item.overDue <0? 'text-danger':'text-success')+' ">'+(item.overDue <0? 'Overdue by ':'Scheduled in ')+item.overDue+' days</span></h5>'
													+'<div>'
														+'<span class="font-weight-semi-bold opacity-7 font-size-sm">Total -&nbsp;</span>'
														+'<span class="opacity-7 font-size-sm">'+item.totalFee+' | Pending - '+item.pendingFee+'</span>'
													+'</div>'
												+'</div>'
												+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
													+'<h5 class="font-weight-semi-bold">Enrollment | Recommended By</h5>'
													+'<div class="opacity-7 font-size-sm mb-1">'+item.counselorName+'</div>'
												+'</div>'
											+'</div>'
											+'<div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 mb-1 px-1">'
												+'<div class="full p-2 rounded" style="background:#f0f9ff">'
													+'<h5 class="font-weight-semi-bold">Academic Dates</h5>'
													+'<div>'
														+'<span class="font-weight-semi-bold opacity-7 font-size-sm mt-4">Start Date -&nbsp;</span>'
														+'<span class="opacity-7 font-size-sm">'+item.enrollmentStartDate+'</span>'
													+'</div>'
													+'<br/>'
													+'<br/>'
													+'<div>'
														+'<span class="font-weight-semi-bold opacity-7 font-size-sm">End Date -&nbsp;</span>'
														+'<span class="opacity-7 font-size-sm">'+item.enrollmentEndDate+'<span>'
													+'</div>'	
													+'<br/>'
													+'<br/>'
													+'<div>'
														+'<span class="font-weight-semi-bold opacity-7 font-size-sm">Remaining Days -&nbsp;</span>'
														+'<span class="opacity-7 font-size-sm">'+item.remainingDays+'<span>'
													+'</div>'
													
													+'<br/>'
												+'</div>'
											+'</div>'
											+'<div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 mt-1 px-1 scrollbar-container ps--active-y ps">'
												+'<div class="full">'
													+'<h5 class="font-weight-semi-bold p-2 mb-2" style="background:#f0f9ff">Payment Details | '+item.paymentPlanName+'</h5>'
													+'<div class="perfectScroll"  style="height:166px;overflow-y:auto;">'
														+'<div class="p-2 mb-2" style="background:#f0f9ff">'
															+'<h5 class="font-weight-semi-bold">Past</h5>'
															+'<span class="font-weight-semi-bold opacity-7 font-size-sm">Past -&nbsp;</span>'
															+'<span class="opacity-7 font-size-sm">'+item.paid.date+ ' | '+item.paid.amount +'</span>'
															// +'<span class="font-weight-semi-bold opacity-7 font-size-sm">Plan -&nbsp;</span>'
															// +'<span class="opacity-7 font-size-sm">'+item.paid.paymentPlanName+'</span>'
															+'<div>'
																+'<span class="font-weight-semi-bold opacity-7 font-size-sm">Payment Title -&nbsp;</span>'
																+'<span class="opacity-7 font-size-sm">'+item.paid.paymentTitle+'</span>'
															+'</div>'
														+'</div>'
														+'<div class="p-2 mb-2" style="background:#f0f9ff">'
															+'<h5 class="font-weight-semi-bold">Upcoming</h5>'
															+'<span class="font-weight-semi-bold opacity-7 font-size-sm">Upcoming -&nbsp;</span>'
															+'<span class="opacity-7 font-size-sm">'+item.upcoming.date+ ' | '+item.upcoming.amount +'</span>'
															// +'<span class="font-weight-semi-bold opacity-7 font-size-sm">Plan -&nbsp;</span>'
															// +'<span class="opacity-7 font-size-sm">'+item.upcoming.paymentPlanName+'</span>'
															+'<div>'
																+'<span class="font-weight-semi-bold opacity-7 font-size-sm">Payment Title -&nbsp;</span>'
																+'<span class="opacity-7 font-size-sm">'+item.upcoming.paymentTitle+'</span>'
															+'</div>'
														+'</div>'
													+'</div>'
												+'</div>'
											+'</div>'
										+'</div>'
									+'</div>'
									+'<div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 mt-1 px-1 scrollbar-container ps--active-y ps">'
										+'<div class="full p-2 mb-2" style="background:#f0f9ff">'
											+'<h5 class="font-weight-semi-bold">Comments</h5>'
											+'<div class="perfectScroll" style="max-height: 166px;overflow-y:auto;">';
												if(item.comments.length>0){
													$.each(item.comments, function(key, item) {
														html+='<div class="full">'
																	+'<span class="font-weight-semi-bold opacity-7 font-size-sm">By -&nbsp;</span>'
																	+'<span class="opacity-7 font-size-sm">'+item.addedBy+',&nbsp;'+item.createdAt+'</span>'
																+'<div>'
																+'<div class="full">'
																	+'<div class="opacity-7 font-size-sm">'+item.comment+'</div>'
																	
																+'<div>';
													});
												}else{
													html+= '<div class="full">'
																+'<span class="font-weight-semi-bold opacity-7 font-size-sm full">No Comments -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>'
																+'<span class="font-weight-semi-bold opacity-7 font-size-sm full">No Comments -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>'
																+'<span class="font-weight-semi-bold opacity-7 font-size-sm full">No Comments -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>'
															+'<div>'
												}
											+'</div>'
										+'</div>'
									+'</div>'
								+'</div>'
							+'</div>'
						+'</div>'
					+'</td>'
			+'</tr>';
	});
	return html;
}

function filterStudentPaymentReportForm(){
	var html = 
	'<div class="filterStudentPaymentReportForm" style="display:none">'
		+'<div class="card">'
			+'<div class="card-body">'
				+'<form id="studentPaymentForm">'
					+'<div class="row">'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Academic Session</label>'
							+'<select id="sessionId" class="form-control selectReset">'
							+'</select>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Start Date</label>'
							+'<input type="text" id="startDate" class="form-control" placeholder="Select Start Date">'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>End Date</label>'
							+'<input type="text" id="endDate" class="form-control" placeholder="Select End Date">'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Select LMS Platform</label>'
							+'<select id="learningPlatform" class="form-control selectReset multiple-select-option" multiple="multiple">'
								+getLmsPlatformContent(SCHOOL_ID)
							+'</select>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Select Enroll Type</label>'
							+'<select id="learningProgram" class="form-control selectReset multiple-select-option" multiple="multiple">'
								+getLearningProgramContent(SCHOOL_ID)
							+'</select>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Grade</label>'
							+'<select id="gradeId" class="form-control selectReset multiple-select-option" multiple="multiple">'
							+'</select>'
						+'</div>'
						
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Enroll Status</label>'
							+'<select id="enrollStatus" class="form-control selectReset multiple-select-option" multiple="multiple">'
								// +'<option value="">ALL</option>'
								+'<option value="0">Completed</option>'
								+'<option value="1">Withdrawn</option>'
								+'<option value="2">Partial entry - New enrollment</option>'
								+'<option value="3">Partial entry - Re-enrollment</option>'
							+'</select>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Payment Status</label>'
							+'<select id="paymentStatus" class="form-control selectReset multiple-select-option" multiple="multiple">'
								+'<option value="SUCCESS">Success</option>'
								+'<option value="ODUE">Overdue</option>'
								+'<option value="DUE">Upcoming</option>'
							+'</select>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Over Due By (Days in Numbers)</label>'
							+'<input type="text" id="overDueBy" class="form-control" placeholder="Enter days count" value="45">'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<label>Enrolled By</label>'
							+'<select id="userId" class="form-control selectReset">'
								+'<option value="">ALL</option>'
								+getUserBasedOnCriteria('USER_LIST_BY_ROLE_SCHOOL', SCHOOL_ID, 'STUDENT_COUNSELOR', '')
							+'</select>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12 d-none">'
							+'<label>Page Number</label>'
							+'<input type="text" id="pageNumber" value="0" class="form-control" placeholder="Page Number">'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">'
							+'<div class="row">'
								+'<div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">'
									+'<label>Page Size</label>'
									+'<select id="pageSize" class="form-control">'
										+'<option value="10">10</option>'
										+'<option value="25">25</option>'
										+'<option value="50">50</option>'
									+'</select>'
								+'</div>'
							+'</div>'
						+'</div>'
						+'<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12 text-right">'
							+'<label class="full">&nbsp;</label>'
							+'<a href="javascript:void(0)" class="btn btn-primary searchStudentPaymentRecord" onClick="getPaymentReportData(\'\',false,1);" >Search</a>'
							+'<a href="javascript:void(0)" class="btn btn-danger ml-1 resetStudentPaymentRecord" onClick="resetStudentPaymentForm(\'studentPaymentForm\');" >Reset</a>'
						+'</div>'
					+'</div>'
				+'</form>'
			+'</div>'
		+'</div>'
	+'</div>';
	return html;
}
function consolidateContent(data, count){
	html =  
		'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Total Count</h5>'
				+'<div class="opacity-7 font-size-sm">'+count+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">One-to-One Learning</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.oneToOneCount+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Group Learning</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.groupCount+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Self Study Learning</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.scholarshipCount+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Flexy Learning Program</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.flexyCount+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Self Study Plus</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.sspCount+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Already Paid</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.paidFee+'</div>'
			+'</div>'
		+'</div>'
		+'<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 px-1 mt-2">'
			+'<div class="full p-2 mb-2 rounded" style="background:#f0f9ff">'
				+'<h5 class="font-weight-semi-bold">Overdue/Upcoming</h5>'
				+'<div class="opacity-7 font-size-sm">'+data.dueOrUpcomingFee+'</div>'
			+'</div>'
		+'</div>';
	return html;
}