function validateRequestForLogin(e){return validateEmail($("#"+e+" #email").val().trim())?validPassword($("#"+e+" #password").val().trim())?!!validateCaptcha($("#"+e+" #captcha").val().trim())||(showMessage(!1,"Either captcha is empty or invalid"),!1):(showMessage(!1,"Either password is empty or invalid"),!1):(showMessage(!1,"Email is either empty or invalid"),!1)}function getRequestForLogin(e,a,o){var s={},i={},l={},t=getSystemTimezone();return"Asia/Calcutta"==t&&(t="Asia/Kolkata"),l.timezone=t,l.userName=$("#"+e+" #email").val().trim(),l.password=encode($("#"+e+" #password").val().trim()),l.captcha=$("#"+e+" #captcha").val().toUpperCase().trim(),l.location=$("#"+e+" #location").val().trim(),i.hash=getHash(),i.schoolId=SCHOOL_ID,i.schoolUUID=SCHOOL_UUID,i.userType=a,s.authentication=i,s.login=l,s}function getRequestForProceedToChangeTimezoneForCommon(e,a){var o={},s={},i={};return s.userType="common",s.userId=a,s.hash=getHash(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,i.timezoneId=e,o.authentication=s,o.data=i,o}function proceedWithUserChangedTimezone(e,a){return $("#modalMessage.in").length>0?(hideMessage(""),!1):null!=(e=$("#countryTimezoneFromId").val())&&null!=e&&""!=e&&($("#proceed").prop("disabled",!0),customLoader(!0),void $.ajax({type:"POST",contentType:"application/json",url:getURLFor("common","save-user-new-timezone"),data:JSON.stringify(getRequestForProceedToChangeTimezoneForCommon(e,a)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message),customLoader(!1);else if("3"==e.status)showMessage(!0,e.message),customLoader(!1),redirectLoginPage();else{customLoader(!1);var a=$("#ssoUrl").val();goAhead(a,$("#hash").val()),$("#proceed").prop("disabled",!1)}},error:function(e){$("#proceed").prop("disabled",!1)}}))}var debouncing=function(e,a){var o;return function(...s){clearTimeout(o),o=setTimeout((()=>{e(...s)}),a)}};const callUserLogin=debouncing(callUserLoginFun,300);function callUserLoginFun(e,a,o){return $("#modalMessage.in").length>0?(hideMessage(""),!1):!!validateRequestForLogin(e)&&($("#"+e+" #login").prop("disabled",!0),void $.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("login"),data:JSON.stringify(getRequestForLogin(e,a,o)),dataType:"json",cache:!1,timeout:6e5,success:function(s){if(localStorage.setItem("welcome",!1),"0"==s.status||"2"==s.status)"0043"==s.statusCode?($("#allReadyEmail #emailNotVerify").show(),$("#allReadyEmailFooter").show(),$("#allReadyEmail #emailVerify").hide(),$("#allReadyEmail #userDeclined").hide(),$("#allReadyEmail").modal("toggle")):"02"==s.statusCode?($("#allReadyEmail #emailNotVerify").hide(),$("#allReadyEmail #emailVerify").hide(),$("#allReadyEmail #userDeclined").show(),$("#allReadyEmail").modal("toggle")):"STUDENT"==a?(showMessage(!1,s.message,"",!0),validEndInvalidField(!1,"email"),validEndInvalidField(!1,"password"),validEndInvalidField(!1,"captcha")):(showMessage(!1,s.message),validEndInvalidField(!1,"email"),validEndInvalidField(!1,"password"),validEndInvalidField(!1,"captcha")),customLoader(!1);else{customLoader(!0),UNIQUEUUID=s.uniqueId;var i=s.redirectUrl;console.log("redirectUrl :: "+i),i.startsWith("http")?"FRESH"==o?(showMessage(!0,s.message),goAhead(i,s.userLoginHash)):"CONTINUE"==o&&(customLoader(!1),"STUDENT"==a?showMessage(!0,s.message,"",!0):showMessage(!0,s.message),$("#sessionOutPermission").modal("hide")):showMessage(!0,i),validEndInvalidField(!0,"email"),validEndInvalidField(!0,"password"),validEndInvalidField(!0,"captcha")}return $("#"+e+" #login").prop("disabled",!1),!1},error:function(a){$("#"+e+" #login").prop("disabled",!1)}}))}