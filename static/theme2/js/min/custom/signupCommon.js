var role;function callForUserSignUp(e,a){if($(".error-msg").html(""),!validateRequestForSignup(e,a))return!1;var r=$("#"+e+" #learningProgram").val().trim();$("#signup").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:getURLForSignup("enrollment/stage-1"),data:JSON.stringify(getRequestForSignup(e,a)),dataType:"json",success:function(a){return"0"==a.status||"2"==a.status?("SCHOLARSHIP"!=r&&showServerMessage(!1,a.message),"0001"==a.statusCode?(hideStep1Div(),showWrapper(!0),$("#emailVerify").show()):"0041"==a.statusCode||"0038"==a.statusCode?refreshCaptcha("captchaImage"):hideStep1Div()):a.emailVerified?goAhead(a.redirectUrl,""):(showWrapper(!0),$("#emailNotVerify").hide(),$("#userDeclined").hide(),$("#emialLimit").hide(),$("#emailVerify").hide(),$("#accountConfirmation").show(),$("#emailId").html($("#"+e+" #email").val())),$("#signup").prop("disabled",!1),!1},error:function(e){$("#signup").prop("disabled",!1)}})}function hideStep1Div(){$("#accountConfirmation").hide(),$("#emailNotVerify").hide(),$("#userDeclined").hide(),$("#emialLimit").hide(),$("#emailVerify").hide()}function validateRequestForSignup(e,a){var r=!0;validateFormAscii(e)||(showServerMessage(!1,"Please use the English Keyboard while providing information"),r=!1),validateEmail($("#"+e+" #email").val().trim())||($("#"+e+" #email").css("color","#a9a9a9"),showElementErrorMessage(!1,"email","Email is either empty or invalid"),r=!1),validateEmail($("#"+e+" #confirmEmail").val().trim())?$("#"+e+" #email").val().trim()!=$("#"+e+" #confirmEmail").val().trim()&&($("#"+e+" #email").css("color","#a9a9a9"),$("#"+e+" #confirmEmail").css("color","#a9a9a9"),showElementErrorMessage(!1,"confirmEmail","STUDENT"==a?"Student email and confirm student email are not same":"Email and confirm email are not same"),r=!1):($("#"+e+" #confirmEmail").css("color","#a9a9a9"),showElementErrorMessage(!1,"confirmEmail","Confirm email is either empty or invalid"),r=!1);var i=$("#"+e+" #password").val().trim();pattern.test(i)?validPassword($("#"+e+" #password").val().trim())||($("#"+e+" #password").css("color","#a9a9a9"),showElementErrorMessage(!1,"password","Password is either empty or invalid"),r=!1):(showElementErrorMessage(!1,"password","Create your own password must match all requirements."),r=!1);var o=$("#"+e+" #confirmPassword").val().trim();return validPassword($("#"+e+" #confirmPassword").val().trim())?pattern.test(o)?$("#"+e+" #password").val().trim()!=$("#"+e+" #confirmPassword").val().trim()&&($("#"+e+" #password").css("color","#a9a9a9"),$("#"+e+" #confirmPassword").css("color","#a9a9a9"),showElementErrorMessage(!1,"confirmPassword","Create your own password and Confirm your own Password do not match"),r=!1):(showElementErrorMessage(!1,"confirmPassword","Confirm your own Passwords must match all requirements."),r=!1):($("#"+e+" #confirmPassword").css("color","#a9a9a9"),showElementErrorMessage(!1,"confirmPassword","Confirm password is either empty or invalid"),r=!1),validateCaptcha($("#"+e+" #captcha").val().trim())||($("#"+e+" #captcha").css("color","#a9a9a9"),showElementErrorMessage(!1,"captcha","Captcha is either empty or invalid"),r=!1),$("#"+e+" #checkTerms").is(":checked")?showElementErrorMessage(!1,"checkTerms",""):(showElementErrorMessage(!1,"checkTerms","Please accept terms and conditions"),r=!1),r}function getRequestForSignup(e,a){var r={},i={},o={},l=window.location.href.split("?isDemoUser")[1];return o.location=$("#"+e+" #location").val(),o.learningProgram=$("#"+e+" #learningProgram").val().trim(),o.enrollmentFor=$("#"+e+" #enrollmentFor").val().trim(),o.unregisteredId=$("#"+e+" #unregisteredId").val(),o.ras=$("#"+e+" #ras").val(),o.email=$("#"+e+" #email").val(),o.confirmEmail=$("#"+e+" #confirmEmail").val(),o.password=encode($("#"+e+" #password").val()),o.confirmPassword=encode($("#"+e+" #confirmPassword").val()),o.captcha=$("#"+e+" #captcha").val(),o.referralCode=$("#"+e+" #referralCode").val(),o.discount=$("#"+e+" #discount").val(),o.signupType="Online","ONE_TO_ONE_FLEX"==$("#"+e+" #learningProgram").val()&&(o.signupType="Online-Flex"),o.userType=a,o.schoolId=SCHOOL_ID,o.schoolUUID=SCHOOL_UUID,""!=l&&null!=l&&(l=l.split("=")[1],o.isDemoUser=l),o.utmSource=getCookie("us"),o.utmMedium=getCookie("um"),o.utmDescription=getCookie("uc"),o.originalUrl=getCookie("cu"),o.gclid=getCookie("gclid"),o.utmCampaign=getCookie("ucam"),o.utmTerm=getCookie("ut"),i.hash=getHash(),i.schoolId=SCHOOL_ID,i.schoolUUID=SCHOOL_UUID,i.userType=a,r.authentication=i,r.data=o,r}function callReferralCodeCounselorCheck(e,a){if(hideMessage(""),""==$("#referralCode").val().trim())return showServerMessage(!1,"Referral Code empty or invalid"),!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("verify-referral"),data:JSON.stringify(getRequestForReferralCodeCheck(e,a)),dataType:"json",success:function(e){return"0"!=e.status&&"2"!=e.status||showServerMessage(!0,"This referral code is not available, please try again."),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForReferralCodeCheck(e,a){var r={},i={},o={requestKey:"REFERRAL-AVAILABLE"};return o.requestValue=$("#referralCode").val().trim(),i.hash=getHash(),i.schoolId=SCHOOL_ID,i.schoolUUID=SCHOOL_UUID,i.userType=a,r.authentication=i,r.requestData=o,r}function showServerMessage(e,a){e?$("#servermessage").html(""):$("#servermessage").html("<b>"+a+"</b>")}function showServerMessageWrapper(e,a){e?$("#servermessagewrapper").html(""):$("#servermessagewrapper").html("<b>"+a+"</b>")}function showElementErrorMessage(e,a,r){e?$("#"+a+"-error-message").html(""):$("#"+a+"-error-message").html(r)}function checkRequestIsEligibleForEnrollment(e,a,r,i,o,l,s){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("eligible-for-enrollment"),data:JSON.stringify(checkRequestIsEligibleForEnrollmentPayload(e,a,r,i,o,l,s)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?(window.location.replace(e.message),showMessage(!0,"The selected learning is not available in your region right now.")):($("#email").attr("disabled",!1),$("#confirmEmail").attr("disabled",!1)),!1}})}function checkRequestIsEligibleForEnrollmentPayload(e,a,r,i,o,l,s){var n={},m={},t={requestKey:"ELIGIBLE-FOR-ENROLLMENT"};return t.learningProgram=r,t.schoolId=i,t.timeZone=o,t.countryName=l,t.SCHOOL_UUID=SCHOOL_UUID,t.email=s,m.hash=getHash(),m.schoolId=SCHOOL_ID,m.schoolUUID=SCHOOL_UUID,m.userType=a,n.authentication=m,n.data=t,n}function validMailPermission(e,a){e?(validEndInvalidField(!0,"email"),$("#email").val().trim()==$("#confirmEmail").val().trim()?validEndInvalidField(!0,"confirmEmail"):(validEndInvalidField(!0,"email"),validEndInvalidField(!1,"confirmEmail"),showElementErrorMessage(!1,"email",""),"STUDENT"==moduleId?showElementErrorMessage(!1,"confirmEmail",role+" email and confirm student email are not same"):showElementErrorMessage(!1,"confirmEmail","Email and confirm email are not same"))):(validEndInvalidField(null,"email"),validEndInvalidField(null,"confirmEmail"),$("#email").val(""),$("#confirmEmail").val(""),showElementErrorMessage(!1,"email",""),showElementErrorMessage(!1,"confirmEmail","")),$(".emailValidatorModal").removeClass("animate__fadeInUpBig"),$(".emailValidatorModal").addClass("animate__fadeOutUpBig"),$(".blur-overlary").hide()}function getLearningProgram(e){var a={},r={};return r.schoolId=SCHOOL_ID,r.learningProgram=e,$.ajax({type:"POST",contentType:"application/json",url:getURLFor("learning-program",""),data:JSON.stringify(r),dataType:"json",async:!1,global:!1,success:function(e){a=e},error:function(e){showMessage(!0,e.responseText)}}),a}$(document).ready((function(){"TEACHER"==moduleId?role="":"STUDENT"==moduleId&&(role="Student"),console.log("signupCommon"),$("#signupButton").click((function(e){e.preventDefault(),""==$("#captcha").val().trim()&&validEndInvalidField(!1,"captcha"),callForUserSignUp("userSignupForm",moduleId)})),$("#resendEmail").click((function(e){e.preventDefault(),callForEmailResend($("#userSignupForm #email").val().trim(),moduleId,"false")}));var e="";$("#email").blur((function(){var a=$(this).val();$(this).val().trim().length>0&&(validateEmail($("#userSignupForm #email").val().trim())?e!=a?(validEndInvalidField(null,"email"),callEmailCheck("userSignupForm",moduleId),""!=$("#confirmEmail").val().trim()&&$("#email").val().trim()!=$("#confirmEmail").val().trim()&&$("#email").val().trim().length>0?(validEndInvalidField(!1,"email"),"STUDENT"==moduleId?showElementErrorMessage(!1,"email",role+"email and confirm "+role+" email are not same"):showElementErrorMessage(!1,"email","Email and confirm email are not same")):$("#email").val().trim()==$("#confirmEmail").val().trim()&&""!=$("#email").val().trim()&&(validEndInvalidField(!0,"email"),validEndInvalidField(!0,"confirmEmail"),showElementErrorMessage(!1,"confirmEmail",""),showElementErrorMessage(!1,"email","")),e=a):$("#email").val().trim()==$("#confirmEmail").val().trim()&&(validEndInvalidField(!0,"email"),validEndInvalidField(!0,"confirmEmail"),showElementErrorMessage(!1,"confirmEmail",""),showElementErrorMessage(!1,"email","")):(validEndInvalidField(!1,"email"),"STUDENT"==moduleId?showElementErrorMessage(!1,"email",role+" email is either empty or invalid."):showElementErrorMessage(!1,"email","Email is either empty or invalid")))})),$("#confirmEmail").blur((function(){validateEmail($("#userSignupForm #confirmEmail").val().trim())?""!=$("#email").val().trim()&&$("#email").val().trim()!=$("#confirmEmail").val().trim()&&$("#confirmEmail").val().trim().length>0?(validEndInvalidField(!1,"confirmEmail"),"STUDENT"==moduleId?showElementErrorMessage(!1,"confirmEmail",role+" email and confirm "+role.toLowerCase()+" email are not same"):showElementErrorMessage(!1,"confirmEmail","Email and confirm email are not same")):$("#email").val().trim()==$("#confirmEmail").val().trim()&&""!=$("#confirmEmail").val().trim()?(validEndInvalidField(!0,"email"),validEndInvalidField(!0,"confirmEmail"),showElementErrorMessage(!1,"confirmEmail",""),showElementErrorMessage(!1,"email","")):(validEndInvalidField(null,"confirmEmail"),showElementErrorMessage(!1,"confirmEmail","")):$("#confirmEmail").val().trim().length>0?(validEndInvalidField(!1,"confirmEmail"),"STUDENT"==moduleId?showElementErrorMessage(!1,"confirmEmail","Confirm "+role+" email empty or invalid."):showElementErrorMessage(!1,"confirmEmail","Confirm email is either empty or invalid")):(validEndInvalidField(null,"confirmEmail"),showElementErrorMessage(!1,"confirmEmail",""))})),$("#password").blur((function(){if($(this).val().trim().length>0){var e=$("#userSignupForm #password").val().trim();pattern.test(e)?validPassword($("#userSignupForm #password").val().trim())?(validEndInvalidField(!0,"password"),showElementErrorMessage(!0,"password",""),$(this).val().trim()!=$("#confirmPassword").val().trim()&&$("#confirmPassword").val().trim().length>0?(validEndInvalidField(!1,"confirmPassword"),showElementErrorMessage(!1,"confirmPassword","Create your own password and Confirm your own Password do not match")):0==$("#confirmPassword").val().trim().length?validEndInvalidField(null,"confirmPassword"):(validEndInvalidField(!0,"confirmPassword"),showElementErrorMessage(!1,"confirmPassword",""))):($("#userSignupForm #password").css("color","#a9a9a9"),showElementErrorMessage(!1,"password","Password is either empty or invalid"),validEndInvalidField(!1,"password"),flag=!1):(showElementErrorMessage(!1,"password","Create your own password must match all requirements."),$(this).val().trim()!=$("#userSignupForm #confirmPassword").val().trim()&&$("#userSignupForm #confirmPassword").val().trim().length>0?(showElementErrorMessage(!1,"confirmPassword","Create your own password and Confirm y our own Password do not match"),validEndInvalidField(!1,"confirmPassword")):(showElementErrorMessage(!1,"password","Create your own password must match all requirements."),validEndInvalidField(null,"confirmPassword")),validEndInvalidField(!1,"password"),flag=!1)}else validEndInvalidField(null,"password")})),$("#confirmPassword").blur((function(){if($(this).val().length>0){var e=$("#userSignupForm #confirmPassword").val().trim();validPassword($("#userSignupForm #confirmPassword").val().trim())?pattern.test(e)?$("#userSignupForm #password").val().trim()!=$("#userSignupForm #confirmPassword").val().trim()?($("#userSignupForm #password").css("color","#a9a9a9"),$("#userSignupForm #confirmPassword").css("color","#a9a9a9"),showElementErrorMessage(!1,"confirmPassword","Create your own password and Confirm your own Password do not match"),validEndInvalidField(!1,"confirmPassword"),flag=!1):(validEndInvalidField(!0,"confirmPassword"),showElementErrorMessage(!0,"confirmPassword","")):(showElementErrorMessage(!1,"confirmPassword","Confirm your own Passwords must match all requirements."),validEndInvalidField(!1,"confirmPassword"),flag=!1):($("#userSignupForm #confirmPassword").css("color","#a9a9a9"),showElementErrorMessage(!1,"confirmPassword","Confirm password is either empty or invalid"),validEndInvalidField(!1,"confirmPassword"),flag=!1)}else validEndInvalidField(null,"confirmPassword")})),$("#captcha").blur((function(){$(this).val().length>0&&(validEndInvalidField(null,"captcha"),showElementErrorMessage(!1,"captcha",""))})),$("#notVerify").click((function(){callForEmailResend($("#userSignupForm #email").val().trim(),moduleId,"false")})),$("#referralCode").blur((function(){""!=$("#referralCode").val().trim()&&callReferralCodeCounselorCheck("userSignupForm",moduleId)}))}));