function resetForm(e,s,l){$("#"+e+" .class-type-dorpdown option:first-child").prop("selected",!0),$("#"+e+" .meeting-id").val(""),$("#userIdOfflineClass option:eq(0)").select2().prop("selected",!0),$("#userIdOfflineClass").trigger("change"),$("#"+e+" .offline-classes-wrapper .clone-row-offline-classes").length>1&&($("#"+e+" .offline-classes-wrapper .clone-row-offline-classes:nth-child(n + 2)").remove(),$("#"+e+" .delete-row-btn").hide()),$("#"+e+" .offline-classes-wrapper .clone-row-offline-classes:first-child .class-type-dorpdown").attr("id","class_Type_1"),$("#"+e+" .offline-classes-wrapper .clone-row-offline-classes:first-child .meeting-id").attr("id","meetingId_1"),$(".meeting-id-check").remove(),!0&&$("#"+s).modal("hide")}function offlineClassSearchReset(e){$("#"+e)[0].reset(),$("#classType").val("").trigger("change"),$("#sortBy").val("DESC").trigger("change"),"TEACHER"==USER_ROLE?$("#"+e+" #userId").val(USER_ID).trigger("change"):$("#"+e+" #userId").val("").trigger("change")}function validateOfflineClasses(e){if(null==$("#"+e+" #userIdOfflineClass").val()||""==$("#"+e+" #userIdOfflineClass").val())return"theme1"==tt?showMessage(!1,"Plase select Teacher"):showMessageTheme2(0,"Plase select Teacher","",!0),!1;var s=!0,l=$(".offline-classes-wrapper .clone-row-offline-classes").length;for(i=0;i<l;i++){var a=$(".offline-classes-wrapper .clone-row-offline-classes:eq("+i+") .class-type-dorpdown").val();if(null==a||""==a){"theme1"==tt?showMessage(!1,"Plase select class type"):showMessageTheme2(0,"Plase select class type","",!0),s=!1;break}if(""==$(".offline-classes-wrapper .clone-row-offline-classes:eq("+i+") .meeting-id").val().replaceAll(/\s/g,"")){"theme1"==tt?showMessage(!1,"Plase enter valid meeting ID"):showMessageTheme2(0,"Plase enter valid meeting ID","",!0),s=!1;break}}return s}function saveOfflineClasses(e,s){return customLoader(!0),validateOfflineClasses(e)?($.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("meeting","offline"),data:JSON.stringify(getRequestForOfflineClass(e)),dataType:"json",success:function(l){return"0"==l.status||"2"==l.status||"3"==l.status?"3"==l.status?redirectLoginPage():("theme1"==tt?showMessage(!1,l.message):showMessageTheme2(0,l.message,"",!0),$(".meeting-id-check").remove(),$.each(l.meetingDetails,(function(s,l){offlineClassUploaded(e,l.elementId,l.status,l)}))):($(".meeting-id-check").remove(),$.each(l.meetingDetails,(function(s,l){offlineClassUploaded(e,l.elementId,l.status,l)})),advanceofflineClassSearch("offlineClassFilter","offlineClassesTable",roleAndModule.moduleId,USER_ID,USER_ROLE),resetForm(e,s,!0),"theme1"==tt?showMessage(!0,l.message):showMessageTheme2(1,l.message,"",!0)),customLoader(!1),!1}}),!1):(customLoader(!1),!1)}function getRequestForOfflineClass(e){var s={crontrolType:"Add"};s.schoolId=SCHOOL_ID,s.userId=$("#"+e+" #userIdOfflineClass").val();var l=[],a=$(".offline-classes-wrapper .clone-row-offline-classes").length;for(i=0;i<a;i++){var t={};t.elementId=$(".offline-classes-wrapper .clone-row-offline-classes:eq("+i+") .meeting-id").attr("id"),t.meetingType=$(".offline-classes-wrapper .clone-row-offline-classes:eq("+i+") .class-type-dorpdown").val(),t.meetingId=$(".offline-classes-wrapper .clone-row-offline-classes:eq("+i+") .meeting-id").val().replaceAll(/\s/g,""),l.push(t)}return s.meetingDetails=l,s}function advanceofflineClassSearch(e,s,l,a,t){checkTextBox(e),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("meeting","offline-list"),data:JSON.stringify(getRequestForOfflineClassFilter(e)),dataType:"json",success:function(e){($("#"+s+" > tbody").html(""),"0"==e.status||"2"==e.status||"3"==e.status)?"3"==e.status?redirectLoginPage():"theme1"==tt?showMessage(!1,e.message):showMessageTheme2(0,e.message,"",!0):($("#offlineMeetingContentDiv").html(offlineClassTable(s,t)),$("#"+s+" > tbody").append(getOfflineClassTableBody(e.meetingDetails,a,t)),$.fn.dataTable.isDataTable("#"+s)&&$("#"+s).dataTable().fnDestroy(),$("#"+s).DataTable());return!1}}),bindHover()}function getRequestForOfflineClassFilter(e){var s={};return s.schoolId=SCHOOL_ID,s.userId=$("#"+e+" #userId").val(),s.classType=$("#"+e+" #classType").val(),s.meetingId=$("#"+e+" #meetingId").val().replaceAll(/\s/g,""),s.sortBy=$("#"+e+" #sortBy").val(),s.pageSize=$("#"+e+" #pageSize").val(),s}function validateDeleteOfflineClasses(e){return""!=e||("theme1"==tt?showMessage(!1,"Invalid offline class"):showMessageTheme2(0,"Invalid offline class","",!0),!1)}function deleteOfflineClasses(e){return!!validateDeleteOfflineClasses(e)&&($.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("meeting","offline"),data:JSON.stringify(getRequestForDeleteOfflineClass(e)),dataType:"json",success:function(s){return"0"==s.status||"2"==s.status||"3"==s.status?"3"==s.status?redirectLoginPage():"theme1"==tt?showMessage(!1,s.message):showMessageTheme2(0,s.message,"",!0):($("#actionOfflineClasses"+e).html("Deleted"),"theme1"==tt?showMessage(!0,s.message):showMessageTheme2(1,s.message,"",!0)),!1}}),!1)}function getRequestForDeleteOfflineClass(e){var s={crontrolType:"delete"};s.schoolId=SCHOOL_ID;var l=[],a={};return a.offlineId=e,l.push(a),s.meetingDetails=l,s}function showOfflineClassModel(e,s){resetForm(e,s,!1),$("#offlineClassesModal").modal({backdrop:"static",keyboard:!1}),$("#offlineClassAdd #userIdOfflineClass").hasClass("select2-hidden-accessible")||$("#offlineClassAdd #userIdOfflineClass").select2({theme:"bootstrap4",dropdownParent:"#offlineClassesModal .modal-body"})}function showOfflineAddContent(){$(".offline-classes-container").show()}function cloneRowOfflineClasses(){var e=parseInt($(".offline-classes-wrapper .clone-row-offline-classes:last-child .class-type-dorpdown").attr("id").split("_").pop())+1;return $(".offline-classes-wrapper").append($(".offline-classes-wrapper .clone-row-offline-classes:last-child").clone()).html(),$(".offline-classes-wrapper .clone-row-offline-classes:last-child .class-type-dorpdown").attr("id","class_Type_"+e),$(".offline-classes-wrapper .clone-row-offline-classes:last-child .meeting-id").attr("id","meetingId_"+e),$(".offline-classes-wrapper .clone-row-offline-classes:last-child  .error").attr("id","meetingId_"+e+"-error"),$(".offline-classes-wrapper .clone-row-offline-classes \t#meetingId_"+e).val(""),$("#meetingId_"+e).next().remove(),$(".offline-classes-wrapper .clone-row-offline-classes").length>1&&$(".delete-row-btn").show(),!1}function deleteRow(e){$(e).parent().closest(".clone-row-offline-classes").remove(),$(".offline-classes-wrapper .clone-row-offline-classes").length<=1&&$(".delete-row-btn").hide()}function joinOfflineMeeting(e,s){$.ajax({type:"GET",contentType:"application/json",url:getURLForHTML("meeting","offline-join/"+e+"/"+s),dataType:"json",success:function(e){return"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():"theme1"==tt?showMessage(!1,e.message):showMessageTheme2(0,e.message,"",!0):window.open(e.joinUrl,"_blank"),!1}})}