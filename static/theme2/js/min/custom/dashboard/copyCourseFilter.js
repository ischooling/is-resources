function callAllStandardList(e,s){resetDropdown($("#"+e+" #"+s),"Select Grade"),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","ALL-STANDARD-LIST","gradeList")),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(t){if("0"==t.status||"2"==t.status)showMessage(!0,t.message);else{var r=t.mastersData.standards,o=$("#"+e+" #"+s);o.html(""),o.append('<option value="0">Select Grade</option>'),$.each(r,(function(e,s){o.append('<option value="'+s.key+'">'+s.value+" </option>")}))}}})}function callCourseProviderList(e,s){resetDropdown($("#studentFilter #lmsPlatform"),"Select LMS Platform"),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","ALL-COURSE-PROVIDER-LIST","courseProList")),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(t){if("0"==t.status||"2"==t.status)showMessage(!0,t.message);else{var r=t.mastersData.courseList,o=$("#"+e+" #"+s);o.html(""),$.each(r,(function(e,s){s.key>=36&&o.append('<option value="'+s.key+'">'+s.value+" </option>")}))}}})}function callCategoryNameList(e,s,t){resetDropdown($("#"+e+" #"+t),"Select Category Name");var r=$("#lmsPlatform").val()[0];if(null==r||""==r)return $("#duplicateCourseForm #duplicateCourseErrMessage").text("Please choose LMS Platform"),!1;null!=s&&""!=s||(s=0),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("formId","ALL-CATEGORY-NAME-LIST",s,r)),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(s){if("0"==s.status||"2"==s.status)showMessage(!0,s.message);else{var r=s.mastersData.courseList,o=$("#"+e+" #"+t);o.html(""),o.append('<option value="0">Select Category Name</option>'),$.each(r,(function(e,s){"categoryNameDC"==t?o.append('<option value="'+s.key+'">'+s.value+" </option>"):o.append('<option value="'+s.value+'">'+s.value+" </option>")}))}}})}function resetCourseSearchFilter(e){$("#"+e+" #courseName").val("").trigger("change"),$("#"+e+" #searchFor").val("CC").trigger("change"),$("#"+e+" #lmsPlatform").val("").trigger("change"),$("#"+e+" #gradeDropDown").val("").trigger("change"),$("#"+e+" #categoryName").val("").trigger("change"),$("#"+e+" #courseType").val("").trigger("change"),$("#"+e+" #lmsCourseType").val("").trigger("change"),$("#"+e+" #lmsCourseId").val("").trigger("change"),$("#"+e+" #SyncedLms").val("").trigger("change"),$("#"+e+" #courseStatus").val("").trigger("change")}function advanceCourseSearchFilter(e){if($("#lmsPlatform").val()<=0)return $("#searchCourseErrMessage").text("Please choose LMS Platform"),setTimeout((function(){$("#searchCourseErrMessage").text("")}),3e3),!1;hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","filter-copy-course-content"),data:JSON.stringify(getCallRequestForAdvanceCourseSearchFilter(e)),dataType:"json",success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,stringMessage[1]);else{if($("#copyCourseTable tbody").html(""),console.log("Subject data",e.subjectListB2CInfoDTO),e.subjectListB2CInfoDTO.length>0){var s=0;$.each(e.subjectListB2CInfoDTO,(function(e,t){s++,copyCourseTableTr='<tr id="'+t.entityId+'" entityName="'+t.entityName+'"><td><input type="checkbox" class="checkCopySubject" value="'+t.subjectId+'"></td><td>'+s+"</td><td>"+t.courseProviderName+"</td><td>"+t.standardName+"</td><td>"+t.courseName+"</td><td>"+t.courseType+"</td><td>"+t.parentsId+"</td><td>"+t.subjectName+'</td><td> <span id="courseIdFromLmsError'+t.subjectId+'" class="text-danger"></span><br/><input type="text" id="courseIdFromLms'+t.subjectId+'" class="form-control" onkeydown="return M.digit(event);" value="'+t.lmsCourseId+'"/>'+t.syncedStatus+'</td><td class="text-center"><button class="btn btn-sm btn-primary" onclick="saveCourseLmsId('+t.subjectId+');">Save</button></td></tr >',$("#copyCourseTable tbody").append(copyCourseTableTr)}))}else copyCourseTableTr='<tr><td colspan=10 style="font-size:22px; text-align:center"> No data available in table</td></tr>',$("#copyCourseTable tbody").append(copyCourseTableTr);var t=new Date;t.setDate(t.getDate()+1),$(".subjectSemesterStartDateCl").datepicker({startDate:t,format:"mm-dd-yyyy",autoclose:!0})}}}),$("#selectallrow").prop("checked",!1),$("#copyCourseTable  tbody .checkCopySubject").click((function(){$("#copyCourseTable  tbody .checkCopySubject").length===$("#copyCourseTable  tbody .checkCopySubject:checked").length?$("#selectallrow").prop("checked",!0):$("#selectallrow").prop("checked",!1)}))}function getCallRequestForAdvanceCourseSearchFilter(e){var s={},t={},r={};return r.gradeId=$("#"+e+" #gradeDropDown").select2("val"),r.lmsPlatform=$("#"+e+" #lmsPlatform").select2("val"),r.courseName=$("#"+e+" #courseName").val().trim(),r.numberOfRecords=$("#"+e+" #numberOfRecords").val().trim(),$("#"+e+" #lmsCourseId").val().length>0&&(r.lmsCourseId=$("#"+e+" #lmsCourseId").val().replace(/ /g,"").split(",")),r.categoryName=$("#"+e+" #categoryName").select2("val"),r.lmsCourseType=$("#"+e+" #lmsCourseType").select2("val"),r.courseType=$("#"+e+" #courseType").select2("val"),r.syncedLms=$("#"+e+" #SyncedLms").select2("val"),r.courseStatus=$("#"+e+" #courseStatus").select2("val"),r.schoolUUID=SCHOOL_UUID,r.schoolId=SCHOOL_ID,s.filterAndCopyCourseDTO=r,t.hash=getHash(),t.schoolId=SCHOOL_ID,t.schoolUUID=SCHOOL_UUID,t.userType="SCHOOL",t.schoolId=SCHOOL_ID,t.schoolUUID=SCHOOL_UUID,s.authentication=t,s}function validateRequestForCopyCourse(e,s){if("SYNC"!=s&&"UPDATECOURSE"!=s){if(""==$("#"+e+" #suffixNo").val())return $("#copyCourseForm #copyCourseErrMessage").text("Please enter suffix number"),!1;if(""==$("#"+e+" #type").val()||null==$("#"+e+" #type").val())return $("#copyCourseForm #copyCourseErrMessage").text("Please choose type"),!1;if("Range"==$("#"+e+" #type").val()){if(""==$("#"+e+" #startDate").val()||null==$("#"+e+" #startDate").val())return $("#copyCourseForm #copyCourseErrMessage").text("Please choose start Date"),!1;if(""==$("#"+e+" #endDate").val()||null==$("#"+e+" #endDate").val())return $("#copyCourseForm #copyCourseErrMessage").text("Please choose end Date"),!1}if("Continous"==$("#"+e+" #type").val()&&""==$("#"+e+" #daysCount").val())return $("#copyCourseForm #copyCourseErrMessage").text("Please enter days"),!1}return!($("#lmsPlatform").val()<=0)||($("#copyCourseForm #copyCourseErrMessage").text("Please choose LMS Platform"),!1)}function copySelectedCourse(e,s,t){$("#copyCourseForm #copyCourseErrMessage").text("");var r="";return $("#"+s+"> tbody  > tr").each((function(e,s){$(this).find(".checkCopySubject").is(":checked")&&(r=r+$(this).find(".checkCopySubject").val()+",")})),""==r?($("#copyCourseForm #copyCourseErrMessage").parent().removeClass("text-success"),$("#copyCourseForm #copyCourseErrMessage").parent().addClass("text-danger"),void $("#copyCourseForm #copyCourseErrMessage").text("Please select atleast one subject to copy")):($("#copyCourseForm #copyCourseErrMessage").parent().removeClass("text-success"),$("#copyCourseForm #copyCourseErrMessage").parent().addClass("text-danger"),$("#copyCourseForm #selectSubjectIds").val(r.substring(0,r.length-1)),!!validateRequestForCopyCourse(e,t)&&($.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","copy-course"),data:JSON.stringify(getRequestForCopyCourse(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)$("#copyCourseForm #copyCourseErrMessage").text(e.message),$("#copyCourseForm #copyCourseErrMessage").parent().removeClass("text-success"),$("#copyCourseForm #copyCourseErrMessage").parent().addClass("text-danger");else if($("#copyCourseForm #copyCourseErrMessage").parent().removeClass("text-danger"),$("#copyCourseForm #copyCourseErrMessage").parent().addClass("text-success"),"SAVE"!=t){var s=e.copyCourseSyncStatus,r=$("#copyCourseForm #copyCourseErrMessage");$.each(s,(function(e,s){r.append(s.message+"<br/>")}))}else $("#copyCourseForm #copyCourseErrMessage").text(e.message),$("#copyCourseForm #forTeacher").val("0").trigger("change");return!1},error:function(e){console.log("ERROR : ",e)}}),$("#type").val(""),void $("#type").select2({theme:"bootstrap4"}).trigger("change")))}function getRequestForCopyCourse(e,s){var t={},r={},o={},a={};return("SAVE"==s||"SAVEANDSYNC"==s)&&""!=$("#forTeacher").val()?(a.userId=$("#forTeacher").val(),a.forTeacher=$("#"+e+" #forTeacher").val()):(a.userId="",a.forTeacher=""),a.controlType=s,a.copySubjectIds=$("#"+e+" #selectSubjectIds").val(),a.derivative=$("#"+e+" #derivative").val(),a.suffix=$("#"+e+" #suffix").val(),0!=$("#"+e+" #suffixNo").val()?a.suffixNo=$("#"+e+" #suffixNo").val():a.suffixNo="00",a.externalId=$("#"+e+" #externalId").val(),a.type=$("#"+e+" #type").val(),a.daysCount=$("#"+e+" #daysCount").val(),a.startDate=$("#"+e+" #startDate").val(),a.endDate=$("#"+e+" #endDate").val().trim(),a.term=$("#"+e+" #term").val(),a.lmsPlatform=$("#lmsPlatform").val(),a.schoolId=SCHOOL_ID,o.filterAndCopyCourseDTO=a,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType="SCHOOL",t.authentication=r,t.requestData=o,t}function saveCourseLmsId(e){if(""==$("#courseIdFromLms"+e).val()||null==$("#courseIdFromLms"+e).val())return $("#courseIdFromLmsError"+e).text("Lms Course Id is mandatory."),!1;var s=$("#courseIdFromLms"+e).val();$.ajax({type:"GET",contentType:"application/json",url:getURLForHTML("dashboard","save-copy-course-lms-id"),data:"subjectId="+e+"&lmsCourseId="+s,dataType:"json",cache:!1,timeout:6e5,success:function(s){return"0"==s.status||"2"==s.status?$("#courseIdFromLmsError"+e).text("Lms Course Id not saved."):($("#courseIdFromLmsError"+e).removeClass("text-danger"),$("#courseIdFromLmsError"+e).addClass("text-success"),$("#courseIdFromLmsError"+e).text("Lms Course Id saved successfully.")),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForDuplicateCourse(e,s){var t={},r={},o={};return o.controlType=s,o.copySubjectIds=$("#"+e+" #selectSubjectIdsDC").val(),o.shownOnSignup=$("#"+e+" #shownOnSignup").val(),o.shownOnMigration=$("#"+e+" #shownOnMigration").val(),o.standardId=$("#"+e+" #gradeDropDownDC").val(),o.lmsPlatform=$("#lmsPlatform").val(),o.courseId=$("#"+e+" #categoryNameDC").val(),o.schoolId=SCHOOL_ID,t.filterAndCopyCourseDTO=o,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType="SCHOOL",t.authentication=r,t}function duplicateSelectedCourse(e,s,t){$("#"+e+" #duplicateCourseErrMessage").text("");var r="";if($("#"+s+"> tbody  > tr").each((function(e,s){$(this).find(".checkCopySubject").is(":checked")&&(r=r+$(this).find(".checkCopySubject").val()+",")})),""!=r){if($("#"+e+" #selectSubjectIdsDC").val(r.substring(0,r.length-1)),!validateRequestForDuplicateCourse(e,t))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","duplicate-course"),data:JSON.stringify(getRequestForDuplicateCourse(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(s){if("0"==s.status||"2"==s.status)$("#"+e+" #duplicateCourseErrMessage").text(s.message),$("#"+e)[0].reset();else{var t=s.message,r=$("#"+e+" #duplicateCourseErrMessage");$.each(t,(function(s,t){r.append(t+"<br/>"),t.includes("not")?($("#"+e+" #duplicateCourseErrMessage").parent().addClass("text-danger"),$("#"+e+" #duplicateCourseErrMessage").parent().removeClass("text-success")):($("#"+e+" #duplicateCourseErrMessage").parent().removeClass("text-danger"),$("#"+e+" #duplicateCourseErrMessage").parent().addClass("text-success"))})),$("#"+e)[0].reset()}return!1},error:function(e){console.log("ERROR : ",e)}})}else $("#"+e+" #duplicateCourseErrMessage").text("Please select atleast one course to create duplicate course.")}function validateRequestForDuplicateCourse(e,s){if($("#"+e+" #duplicateCourseErrMessage").text(""),""!=$("#"+e+" #gradeDropDownDC").val())if("0"!=$("#"+e+" #categoryNameDC").val()&&null!=$("#"+e+" #categoryNameDC").val())if(""!=$("#"+e+" #shownOnSignup").val()){if(""!=$("#"+e+" #shownOnMigration").val())return!($("#lmsPlatform").val()<=0)||($("#"+e+" #duplicateCourseErrMessage").text("Please choose LMS Platform"),!1);$("#"+e+" #duplicateCourseErrMessage").text("Please select shown on migration")}else $("#"+e+" #duplicateCourseErrMessage").text("Please select shown on signup");else $("#"+e+" #duplicateCourseErrMessage").text("Please select atleast one master course to duplicate course");else $("#"+e+" #duplicateCourseErrMessage").text("Please select copy to grade")}