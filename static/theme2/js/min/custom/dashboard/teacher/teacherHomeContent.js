var commonProfileDTO,chatEligibility;async function rendereTeacherHomeContent(){commonProfileDTO=await getUserShortProfile(USER_ID),chatEligibility=await getChatEligibility(USER_ID,SCHOOL_ID),customLoader(!0),commonProfileDTO.lastPassUpdatedDate||window.setTimeout((function(){callCommonDashboardPageForPasswordChange("14","No")}),1e3);var e={};e.userId=USER_ID;var t=await getDashboardDataBasedUrlAndPayload(!1,!1,"get-teacher-dashboard",e);renderTeacherDashboard(t),getTeacherTimePreference(),renderAnnouncement(t.userId),renderActitify(t.userId),callTeacherLastAttendance("",t.userId,"",""),getChat(t.email,t.userRole,t.userId),"show"==commonProfileDTO.declarecheckshow&&commonProfileDTO.isAgreementUpdated&&($("head").append(`<script src="${PATH_FOLDER_JS2}${RESOURCES_FROM_MIN_LOCATION}custom/teacher/signupTeacherStage6.js${SCRIPT_VERSION}">`),$("#teacherAgreementModal").length>0&&$("#teacherAgreementModal").remove(),null!=t.teacherAgreementDTO&&($("body").append(teacherAgreementContent(commonProfileDTO,JSON.parse(t.teacherAgreementDTO))),$("#teacherAgreementModal").modal("show"),$("#preferenceTimeavailabilityFlag").val(!0)))}async function renderTeacherDashboard(e){$("#dashboardContentInHTML").html(dashboardContentTeacher(e)),$("#currentTimeForUser").html(convertUTCToTimezoneAs(getUTCTime(),DATETIME_FORMATTER,e.userTimezone).format("MMM DD, YYYY hh:mm:ss a")),setInterval((function(){$("#currentTimeForUser").html(convertUTCToTimezoneAs(getUTCTime(),DATETIME_FORMATTER,e.userTimezone).format("MMM DD, YYYY hh:mm:ss a"))}),1e3);var t=new Date,a=moment(t).format("YYYY-MM-DD"),n=moment(t).add(1,"days").format("YYYY-MM-DD");callSchoolCalendar("",USER_ID,UNIQUEUUID,"agendaDay",a,n,!1),calendarEventBind(),setTimeout((function(){$("button.fc-today-button").unbind("click").bind("click",(function(){$("#schoolcalendar").fullCalendar("today");var e=$("#schoolcalendar").fullCalendar("getView").name,t=$("#schoolcalendar").fullCalendar("getDate");if("agendaDay"===e)var a=new Date,n=moment(a).format("YYYY-MM-DD"),l=moment(a).add(1,"days").format("YYYY-MM-DD");else if("agendaWeek"===e){n=t.format("YYYY-MM-DD");var s=new Date(n),i=startAndEndOfWeek(s);n=i[0],l=i[1]}callSchoolCalendar("",USER_ID,UNIQUEUUID,e,n,l,!0)}))}),1e3),e.schoolId,$("#moveToTimePreferencePopup").click((function(){$("#mandatoryVideoModal").modal("hide"),$("#timePreferencePopup").removeClass("d-none"),$("#timePreferencePopup").modal("show")})),null!=schoolSettingsLinks.dashboardVideoUrl&&onYouTubeIframeAPIReady(schoolSettingsLinks.dashboardVideoUrl),"Y"==e.firstTimeRequest&&($("#welcomeNoteModal").modal("show"),window.setTimeout((function(){$("#welcomeNoteModal").modal("hide")}),8e3))}function dashboardContentTeacher(e){return'<div class="app-page-title pt-1 pb-1 mb-2"><div class="page-title-wrapper"><div class="page-title-heading w-100"></div></div>'+dashboardSchoolCalendar(e)+calendarMeetingLinkValidate()}function teacherClassModal(){return html+='<div class="modal fade" id="modalTeacherClass" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-lg" role="document">\n                <div class="modal-content ">\n                    <div class="modal-header text-white theme-bg py-2">\n                        <h5 class="modal-title">Your Last Class Duration Break up </h5>\n                        <button type="button" class="close text-white" data-dismiss="modal"\n                            aria-label="Close">\n                            <span aria-hidden="true"><i class="fa fa-times"></i></span>\n                        </button>\n                    </div>\n                    <div id="mteacherLastClass" class="modal-body"></div>\n                </div>\n            </div>\n        </div>',html}function teacherAgreementContent(e,t){var a=`<div class="modal fade " id="teacherAgreementModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1" data-backdrop="static">\n            <input type="hidden" id="userId" value="${e.userId}">\n            <div class="modal-dialog modal-xl" role="document" style="top:0%;">\n                <div class="modal-content">\n                    <div class="modal-header text-white theme-bg py-2">\n                        <h4 class="modal-title" id="exampleModalLabel1" style="color:#fff;">Teacher Agreement</h4>\t\n                        \n                    </div>\n                    <div class="modal-body" style="height:400px;overflow:auto;width:100%;">\n                        <section id="section-linebox" class="text-left">`;return a+=teacherAgreementView(t),a+='</section>\n                    </div>\n                    <div class="modal-footer">',"show"==e.declarecheckshow&&(a+=`<div class="form-check flex-grow-1">\n                                <label class="form-check-label text-dark custom-checkbox">\n                                    <input class="form-check-input" type="checkbox" id="agreementDeclarationConfirm">\n                                        <span class="ml-4"> By clicking (ticking) the box here, I understand the responsibility to abide by all the rules, regulations and the above mentioned policies/points as established by ${schoolSettings.schoolName}</span>\n                                        <span class="form-check-sign">\n                                            <span class="check"></span>\n                                        </span>\n                                </label> \n                            </div>`),a+=`\n                        <button type="submit" onclick="callForSignupTeacherAgreement('','${e.userId}','${t.agreementLogId}','${e.agreementAcceptanceFrom}');" class="btn btn-info" style="float:right;">Confirm</button>\n                    </div>\n                </div>\n            </div>\n        </div>`}function teacherAgreementView(e){return`\n        <body style="font-family: 'Times New Roman', Times, serif; height: 100%; text-align: justify">\n            <div class="contract-page" style="width: 21cm; margin: 0 auto; padding: 10px 10px 20px; page-break-after: always; ">\n                <div>\n                    <img src="${PATH_FOLDER_IMAGE}${e.agreementLetterHeadImg}${SCRIPT_VERSION}" width="300px;" />\n                    \n                </div>\n                <span style="float: left; width: 50%; height: 75px;">\n                    \n                </span>\n                <span style="float: right; width: 50%; height: 75px; text-align: right;">\n                    ${e.addressSchool}\n                </span>\n                <span style="float: left; width: 50%; margin-top: 5px;">\n                    <strong>Ref No.:</strong> ${e.agreementRefNumber}\n                </span>\n                <span style="float: right; width: 50%; margin-top: 5px; text-align: right;">\n                    <strong>Date:</strong> ${e.agreementDate}\n                </span>\n                <span style="float: left; width: 100%; margin-top: 20px; font-weight: bold; height: auto;">\n                    ${e.salutation}${""!=e.salutation?". ":""}${e.name},<br />\n                </span>\n                <span style="float: left; width: 100%; margin-top: 0px; font-weight: normal; height: auto;">\n                    ${e.address1}${""!=e.address1?",<br />":""}\n                    ${e.address2}${""!=e.address2?",<br />":""}\n                    ${e.city}${""!=e.city?",<br />":""}\n                    ${e.state}${""!=e.state?",<br />":""}\n                    ${e.country}${""!=e.country?",<br />":""}\n                    ${e.pincode}\n                </span>\n                <span style="float: left; width: 45%; margin-top: 10px;"></span>\n                <span style="text-align: center; margin-top: 10px;">\n                    <strong><u>Sub: Offer Letter</u></strong>\n                </span>\n                <span style="float: left; width: 100%; margin-top: 10px;margin-bottom:10px;">\n                    Dear <strong>${e.salutation}${""!=e.salutation?". ":""}${e.name}</strong>\n                </span>\n                ${e.content}\n                <p style="margin-bottom: 40px;">With Best Regards</p>\n                <span style="width: 50%; height: 85px;">\n                    <img src="${PATH_FOLDER_IMAGE}${e.agreementSignImg}${SCRIPT_VERSION}"\n                        alt="Authorized Signature" title="Authorized Signature" style="width: 150px;"/>\n                </span>\n                <p style="width: 100%; float: left; text-align: left; margin-top: 40px; margin-bottom: 50px;">\n                    ${schoolSettingsTechnical.authorizedPersonName} <br />\n                    ${e.schoolName} <br />\n                    (Authorised Signatory for ${e.schoolName})\n                </p>\n                <p style="margin-bottom: 0; margin-top: 50px;">\n                    <strong>Acceptance of Offer:</strong>\n                </p>\n                <p style="margin-top: 0;">\n                    I have read the above offer letter and\n                    hereby acknowledge my acceptance of the above terms and conditions of\n                    employment.\n                </p>\n                <span style="width: 50%; float: left; height: 28px;">\n                    <span><strong>Place:</strong>${e.schoolCountry}</span>\n                </span>\n                <span style="width: 50%; float: right; text-align: right; height: 28px;">\n                    \n                </span>\n                <span style="width: 50%; float: left;">\n                <strong>Date:</strong> ${e.agreementDate}</span>\n                <span style="float: right; width: 50%; text-align: right">\n                    <strong>Name:</strong> ${e.salutation}${""!=e.salutation?". ":""}${e.name}\n                </span>\n                \n            </div>\n        </body>\n    `}function dashboardSchoolCalendar(e){return'<div class="main-card mb-3"><div class="full"><div class="card-body pt-lg-3 pt-0 px-0 pb-0"><div class="home-page-wrapper"><div class="row"><div class="col-lg-8 col-md-12 col-sm-12 col-12 pt-2"><div class="full mt-1"><div class="card"><div class="card-body"><span id="currentTimeForUser" class="d-none"></span><div class="text-center mb-2"><span class="user_timezone font-size-lg"><label>'+e.userTimezone+'&nbsp;</label></span><span class="clock-box ml-1"><label class="user_current_day bg-primary text-white clock-bg font-size-lg time-label"></label></span><span class="clock-box ml-1"><label class="user_current_hour bg-primary text-white clock-bg font-size-lg time-label"></label></span><span class="clock-box ml-1 position-relative mr-3"><label class="user_current_mins bg-primary text-white clock-bg font-size-lg time-label"></label><label class="user_current_second bg-primary text-white clock-bg time-label"></label></span><span class="clock-box ml-2"><label class="user_current_am_pm bg-primary text-white clock-bg font-size-lg time-label"></label></span></div><hr/><div class="position-relative" style="z-index:0;" id="schoolcalendar"></div></div></div></div></div><div class="col-lg-4 col-md-12 col-sm-12 pt-2 col-12"><div class="full" id="announcementDiv"></div><div class="full mt-3" id="activityDiv"></div></div></div></div></div></div></div><div id="announceDataId" class="full"></div>'+holidayOne()+onBordingMandotryVideo()}function holidayOne(){return'<div class="modal fade calendarbox" id="holiday1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-modal="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header pt-2 pb-2 theme-bg text-white"><h5 class="modal-title" id="calendarbox_title"></h5><button type="button" class="close text-white" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">X</span></button></div><div class="modal-body"><p class="activity_type"><b><span class="activity"></span></b></p></div></div></div></div>'}function onBordingMandotryVideo(){return'\n            <div class="modal fade fade-scale" id="mandatoryVideoModal" data-backdrop="static">\n            <div class="modal-dialog modal-lg modal-dialog-centered box-shadow-none" role="document">\n                <div class="modal-content text-center">\n                    <div class="modal-header pt-2 pb-2 bg-primary text-white justify-content-center">\n                        <h5 class="heading">Welcome! '+USER_FULL_NAME+'</h5>\n                    </div>\n                    <div class="modal-body d-flex flex-wrap px-1 full pt-1">\n                        <div class="d-flex w-100 my-2">\n                            <div class="header-dots mr-0 position-relative ml-auto" style="min-width: 60px;">\n                                <a target="_blank" href="https://chat.internationalschooling.org/signIn?uuid='+UNIQUEUUID+'" class="notify-bell-chat d-flex justify-content-center align-items-center group">\n                                    <svg class="chat-logo bg-primary" width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path d="M16.0156 16.0156V16.7969C16.0156 17.4414 15.4883 17.9688 14.8438 17.9688H7.61719L7.42188 18.125L4.88281 20.0781V17.9688H3.32031C2.67578 17.9688 2.14844 17.4414 2.14844 16.7969V8.59375C2.14844 7.94922 2.67578 7.42188 3.32031 7.42188H7.8125V6.64062H3.32031C2.24609 6.64062 1.36719 7.51953 1.36719 8.59375V16.7969C1.36719 17.8711 2.24609 18.75 3.32031 18.75H4.10156V21.6797L7.89063 18.75H14.8438C15.918 18.75 16.7969 17.8711 16.7969 16.7969V16.0156H16.0156Z" fill="white"/>\n                                        <path d="M21.6797 4.29688C22.3242 4.29688 22.8516 4.82422 22.8516 5.46875V13.6719C22.8516 14.3164 22.3242 14.8438 21.6797 14.8438H20.1172V16.9727L17.5781 15.0195L17.3828 14.8438H10.1562C9.51172 14.8438 8.98438 14.3164 8.98438 13.6719V5.46875C8.98438 4.82422 9.51172 4.29688 10.1562 4.29688H21.6797ZM21.6797 3.51562H10.1562C9.08203 3.51562 8.20312 4.39453 8.20312 5.46875V13.6719C8.20312 14.7461 9.08203 15.625 10.1562 15.625H17.1094L20.8984 18.5547V15.625H21.6797C22.7539 15.625 23.6328 14.7461 23.6328 13.6719V5.46875C23.6328 4.39453 22.7539 3.51562 21.6797 3.51562Z" fill="white"/>\n                                    </svg>\n                                    <span class="chat-message" style="box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.5) !important;">Talk to School Administration</span>\n                                    <span class="UNSEEN start-100 translate-middle badge position-absolute"></span>\n                                </a>\n                            </div>\n                        </div>\n                        <div class="full">\n                            <div id="player"></div>\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button href="javascript:void(0)" id="play-again-btn" class="btn btn-outline-gray" onclick="playAgain()" disabled>Watch Again</button>\n                        <button href="javascript:void(0)" id="moveToTimePreferencePopup" class="btn btn-gray" disabled>Book System Training</button>\n                    </div>\n                </div>\n            </div>\n        </div>'}function getDashboardSkeleton(){return'<div class="row">\n            <div class="col-lg-8 col-md-12 col-sm-12 col-12 pt-2">\n                <div class="full animated zoomIn mt-1 skeleton">\n                    <div class="card">\n                        <div class="card-body">\n                            <div class="text-center mb-2" style="height: 33px;">\n                                <span class="user_timezone font-size-lg skeleton" style="width: 157px;height: 24px;"></span>\n                                <span class="user_timezone font-size-lg skeleton" style="width: 217px;height: 24px;"></span>\n                            </div>\n                            <hr/>\n                            <div class="schoolcalendar fc fc-bootstrap4 fc-ltr" class="position-relative" style="z-index:0;" >\n                                <div class="fc-toolbar fc-header-toolbar">\n                                    <div class="fc-left mb-1">\n                                        <div class="btn-group">\n                                            <div class="fc-prev-button btn skeleton" style="width: 33.6px;height: 32.8px;"></div>\n                                            <div class="fc-next-button btn skeleton" style="width: 33.6px;height: 32.8px;"></div>\n                                        </div>\n                                        <div class="fc-today-button btn disabled skeleton" style="width: 59.96px;height: 32.8px;"></div>\n                                    </div>\n                                    <div class="fc-right skeleton rounded-5 mb-1" style="width: 122px;height:32.8px;"></div>\n                                    <div class="fc-center skeleton mb-1" style="width: 235px;height: 32.8px;"></div>\n                                </div>\n                                <div class="fc-view-container">\n                                    <div class="fc-view fc-agendaDay-view fc-agenda-view">\n                                        <div class="table-bordered">\n                                            <div class="fc-head skeleton" style="height: 23px;"></div>\n                                            <div class="fc-body">\n                                                <div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                    <div class="full skeleton" style="height: 21.51px; margin-bottom: 3px;"></div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-lg-4 col-md-12 col-sm-12 pt-2 col-12">\n                <div class="full bg-white" style="height: 300px;">\n                    <div class="card-header text-white  justify-content-between card-header-primary d-flex">\n                        <div class="pull-left m-0 font-size-md skeleton" style="width: 118px;">&nbsp;</div>\n                    </div>\n                    <div class="card-body announcement-card-scroll">\n                        <div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="full bg-white" style="height: 300px;">\n                    <div class="card-header text-white  justify-content-between card-header-primary d-flex">\n                        <div class="pull-left m-0 font-size-md skeleton" style="width: 118px;">&nbsp;</div>\n                    </div>\n                    <div class="card-body announcement-card-scroll">\n                        <div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                            <div class="full skeleton" style="height: 35px; margin-bottom: 3px;"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>'}function displayCourseDetails(e){window.open(e)}