function teacherTimepreferencePageOnLoadEvent(e){$("#saveFeedbackPop").on("click",(function(){saveFeedbackQuestion()})),$("#btnAvailability").on("click",(function(){$("#warningMsgPopup").modal("hide"),callDashboardPageSchool(moduleId,"teacher-manage-slot"),setTimeout((function(){$("html, body").animate({scrollTop:0},"slow")}),4e3)})),$(".leaveDates").datepicker({startDate:new Date,multidate:!0,format:"M dd, yyyy",container:"#timePreferencePopup .modal-body"}).on("change",(function(e){LEAVE_DATES=$(this).val(),LEAVE_DATES=LEAVE_DATES.match(/[^,]+,[^,]+/g),$(".leave_dates").show(),$(".leave_dates").html(""),$.each(LEAVE_DATES,(function(e,t){$(".leave_dates").append("<p class='mb-0 full font-weight-bold text-left'>"+t+"</p>")}))})),$(".play-icon").click((function(){$(this).parent().fadeOut();var e=$("#video-player").attr("src");$("#videoIframe").attr("src",e+"&autoplay=1")})),$("#teacherTimeSaveDismiss").hide(),$("#teacherTimeSave").hide(),$(".leave_dates").hide();var t=$("#showTimePrefModal").val(),a=$("#isAgreementUpdated").val();null==t&&(t=e.showTimePrefModal),"true"==t&&"false"==a?$("#timePreferencePopup").modal("show"):$("#timePreferencePopup").modal("hide"),"Y"==e.changeNextSlot?($("#warningMsgPopup").modal("show"),$("#warningMsgPopup #monthName").text(e.monthName),$("#warningMsgPopup #contractHour").text(e.agreedHours),$("#warningMsgPopup #availabilityGiven").text(getTimeFormat(e.totalAvailabelHrs))):$("#warningMsgPopup").modal("hide"),$(".timepicker").length>0&&($(".timepicker").timepicker({format:"HH:mm"}),$(".timepicker").on("click",(function(){var e=parseInt($(this).closest(".modal.fade-scale").css("z-index"))+1999;$(".popover.timepicker-popover").css({"z-index":e})}))),$(".startTime").empty(),$(".startTime").html('<option value="">Select Start Time</option>'),$(".startTime").append(getHoursAndMinsWithGapDuration(0,0,30)),$(".endTime").on("change",(function(){var e=$("#startTime").val(),t=$(this).val();e&&t&&(parseTime(e)>=parseTime(t)&&$(this).val("").trigger("change"))})),$(".startTime").on("change",(function(){var e=$(this).val();if($(".endTime").empty(),$(".endTime").append('<option value="">Select End Time</option>'),e)for(var t=parseTime(e)+30;t<1440;t+=30){var a=Math.floor(t/60),i=t%60,o=a>=12?"PM":"AM";a>12&&(a-=12),0===a&&(a=12);var n=a+":"+i.toString().padStart(2,"0")+" "+o;$(".endTime").append("<option value="+a+":"+i.toString().padStart(2,"0")+"_"+o+">"+n+"</option>")}})),$("#teacherTimeSave").on("click",(function(){var e=$("#timePreferencePopup #controlType").val(),t=$("#slotTillDate").val(),a=new Date(t).toDateString().split(" "),i="Are you sure want to lock your availability till - "+(a=a[1]+" "+a[2]+", "+a[3])+"?";(null==e||"edit"==e)&&(i="You have added more available times for Classes/Admin Tasks. Please note that once you click on Confirm, you won't be able to edit/delete this time slot."),showWarningMessage(i,"saveTeacherTimePreference('TEACHER','timePreferencePopup','true')")})),$("#remarksresetDelete").on("hidden.bs.modal",(function(){$(".modal.show").length>0&&$("body").addClass("modal-open")})),$("#orientStartDate").length>0&&$("#orientStartDate").datepicker({startDate:new Date,multidate:!0,format:"M dd, yyyy",container:"#timePreferencePopup .modal-body"}),$(window).resize((function(){$(window).width()<600?($("#thankyouClassesMsg p .circle-info").length<1&&$("#thankyouClassesMsg p").prepend('<svg xmlns="http://www.w3.org/2000/svg" class="circle-info mr-2 mb-1" width="16px"  viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>'),$("#thankyouClassesMsg p").css({"text-overflow":"ellipsis","-webkit-line-clamp":"1","white-space":"normal","max-height":"38px",overflow:"hidden","word-break":"break-word",display:"-webkit-box","-webkit-box-orient":"vertical"}),$("#thankyouClassesMsg p").addClass("btn btn-outline-primary"),$("#thankyouClassesMsg p").removeClass("text-primary")):($("#thankyouClassesMsg p .circle-info").length>0&&$("#thankyouClassesMsg p .circle-info").remove(),$("#thankyouClassesMsg p").css({"text-overflow":"inherit","-webkit-line-clamp":"inherit","white-space":"inherit","max-height":"inherit",overflow:"inherit","word-break":"inherit",display:"block","-webkit-box-orient":"inherit"}),$("#thankyouClassesMsg p").removeClass("btn btn-outline-primary"),$("#thankyouClassesMsg p").addClass("text-primary"))}))}function parseTime(e){var t=e.split(":"),a=new Date;return a.setHours(parseInt(t[0],10)),a.setMinutes(parseInt(t[1],10)),a}function selfCloseModal(e,t){$("#"+t).modal("hide")}function showAddNewAvailabilityModal(e){$("#"+e).modal("show")}function callTeacherAvailabilityMenu(e){$("#"+e).modal("hide"),callDashboardPageSchool(moduleId,"teacher-manage-slot")}async function getTeacherTimePreference(){var e={};e.userId=USER_ID;var t=await getDashboardDataBasedUrlAndPayload(!1,!1,"get-teacher-time-preference",e);"1"==t.status&&($("#timePreferencePopup").length>0&&$("#timePreferencePopup").remove(),$("body").append(renderTeacherTimepreferenceContent(t.details)),teacherTimepreferencePageOnLoadEvent(t.details))}