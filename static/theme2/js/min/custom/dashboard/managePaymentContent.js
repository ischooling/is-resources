function getAddPaymentSearchResult(e){var a="";return $.each(e.results,(function(e,t){if(a+="<tr><td>"+t.fullName+"</td><td>"+t.studentStringId+"</td><td>"+t.email+"</td><td>"+t.standard+"</td><td>",""!=t.fullName&&null!=t.standard){if(a+='<a id="addPaymentId" class="btn btn-info btn-sm m-0 text-white" onClick="addPayment(\'addStudentPaymentForm\',\''+t.email+"',"+t.studentStandardId+",'"+t.advanceOrCustom+"', true, '"+t.eligibleForAdvance+"')\">&nbsp;Add Payment</a>","C"==t.advanceOrCustom){var l="/dashboard/fee-calculation/?type=C&studentStandardId="+t.studentStandardId;a+='<a class="btn btn-info btn-sm m-0 text-white" href="javascript:void(0)" onClick="getAsPost(\''+l+"')\">&nbsp;Custom Payment Details</a>"}else if("A"==t.advanceOrCustom){l="/dashboard/fee-calculation/?type=A&studentStandardId="+t.studentStandardId;a+='<a class="btn btn-info btn-sm m-0 text-white" href="javascript:void(0)" onClick="getAsPost(\''+l+"')\">&nbsp;Advance Payment Details</a>"}}else a+="Not eligible for Add payment";a+="</td></tr>"})),a}function getAdvancePaymentSearchResult(e,a){roleAndModule=getUserRights(SCHOOL_ID,USER_ROLE_ID,USER_ID,moduleId);var t="";return $.each(a.advancePaymentSearchResponseDTO,(function(a,l){if(t+='<tr id="row_'+a+'"><td>'+l.serialNum+"</td><td><span>",null!=l.shareLink&&""!=l.shareLink&&(t+='<input type="text" id="copyId'+l.serialNum+'" style="float:right; opacity:0; height:0;padding:0;" value="'+l.shareLink+'"><div class="d-flex align-items-center mb-3"><a href="javascript:void(0)" class="btn btn-primary btn-sm" onclick="copyToClipboardNew(\'copyId'+l.serialNum+"', 'copy-message"+l.serialNum+'\')"><i class="fa fa-clone" aria-hidden="true">Copy Payment Link</i></a><span id="copy-message'+l.serialNum+'" style="display:block; color: green; margin-left: 6px; font-weight:600;"></span></div>'),t+="<strong>Trans. Ref. No.:</strong>"+l.transactionRefNumber+"<br><strong>User Ref. No.:</strong>"+l.userRefNumber+"<br>",null!=l.signupUrl&&""!=l.signupUrl&&(t+='<input type="text" id="signupCopyId'+l.serialNum+'" style="float:right; opacity:0; height:0;padding:0;" value="'+l.signupUrl+'"></br><a href="javascript:void(0)" class="btn btn-primary btn-sm" onclick="copyToClipboard(\'signupCopyId'+l.serialNum+'\')"><i class="fa fa-clone" aria-hidden="true">Copy Signup Url</i></a>'),t+="</span></td><td><span><strong>Student ID:</strong>"+l.studentRollNumber+"<br><strong>Name:</strong>"+l.studentName+"<br><strong>Email:</strong>"+l.studentEmail+"<br><strong>Grade:</strong>"+l.gradeName+"<br><strong>Learning Program:</strong>"+l.registrationType+"<br><strong>LMS Platform:</strong>"+l.lmsPlatform+"<br></span></td><td><span><strong>Plan Name:</strong>"+l.planName+"<br><strong>Payment Name:</strong>"+l.paymentName+"<br><strong>Payment Title:</strong>"+l.paymentTitleLabel+"<br><strong>Scheduled Payment Date:</strong>"+l.scheduledPayDate+"<br><strong>Payment Date:</strong>"+l.payDate+"</span></td><td><span><strong>Payment Amount:</strong>"+l.payAmount+"<br><strong>Additional Amount:</strong>"+l.additionalPayment+"<br>",null!=l.selectedCurrency&&""!=l.selectedCurrency&&(t+="<strong>Selected Currency:</strong>"+l.selectedCurrency+"-"+l.payCurrency+"("+l.conversionRation+")<br>"),t+="<strong>Payment Via:</strong>"+l.paymentTransferType+"<br>",l.pgName.toLowerCase()=="WIRETRANSFER".toLowerCase()?t+="<strong>Payment Gateway Used:</strong>Bank Transfer":l.pgName.toLowerCase()=="CASH".toLowerCase()?t+="<strong>Payment Gateway Used:</strong>Cash":t+="<strong>Payment Gateway Used:</strong>"+l.pgName,t+="</span></td><td><span>","SUCCESS"==l.paymentStatus?t+='<i id="payment-status-'+l.serialNum+'" class="fa fa-check text-success"></i><span id="payment-status-message-'+l.serialNum+'">&nbsp;'+l.paymentStatus+"</span><br>":"SCHEDULED"==l.paymentStatus?t+='<i id="payment-status-'+l.serialNum+'" class="fa fa-calendar-check-o text-success"></i><span id="payment-status-message-'+l.serialNum+'">&nbsp;'+l.paymentStatus+"</span><br>":"INITIATED"==l.paymentStatus?t+='<i id="payment-status-'+l.serialNum+'" class="fa fa-hourglass-start text-success"></i><span id="payment-status-message-'+l.serialNum+'">&nbsp;'+l.paymentStatus+"</span><br>":"REJECTED"==l.paymentStatus&&(t+='<i id="payment-status-'+l.serialNum+'" class="fa fa-times text-success"></i><span id="payment-status-message-'+l.serialNum+'">&nbsp;'+l.paymentStatus+"</span><br>"),t+="<strong>Receipt:</strong>","N/A"!=l.recieptLink?(t+='<a href="'+l.recieptLink+'" target="_blank" class="btn btn-outline-info"><i class="fa fa-eye"></i>&nbsp;View Receipt </a>',1==SCHOOL_ID&&(t+='<a href="'+l.recieptLink+'&withStamp=Y" target="_blank" class="btn btn-outline-info"><i class="fa fa-eye"></i>&nbsp;View Receipt with Authorized Signatory and School Stamp </a>')):t+=l.recieptLink,t+="<br>","CONVERA"==$("#"+e+" #paymentGateway").select2("val")&&(t+="<strong>Convera Pay Status:</strong>","N/A"!=l.wurecieptLink?t+='<a href="'+l.wurecieptLink+'" target="_blank" ><i class="fa fa-eye"></i>&nbsp;Convera Pay Receipt </a>':t+=l.wurecieptLink,t+="<br>"),t+="<strong>Proof of Payment:","Credit Card/Debit Card"!=l.paymentTransferType||"CASH"==l.pgName?t+="</strong>"+l.proofOfPayment+"<br>":t+="N/A",t+="</span></td><td><span><strong>Added By:</strong>"+l.paymentAddedBy+"<br><strong>Updated By:</strong>"+l.paymentUpdatedBy+'<br><strong>Remarks:</strong><span id="remarks-'+l.serialNum+'">'+l.remarks+'</span><br><strong>Review Payment:</strong><span id="review-'+l.serialNum+'">',("Credit Card/Debit Card"==l.paymentTransferType||"INITIATED"!=l.paymentStatus||"Y"!=roleAndModule.updated&&"Y"!=roleAndModule.added)&&("CASH"!=l.pgName||"INITIATED"!=l.paymentStatus||"Y"!=roleAndModule.updated&&"Y"!=roleAndModule.added)?t+=" - ":t+="<a onclick=\"return showPaymentRemarksModal('paymentRemarksForm','STUDENT',"+l.userId+","+l.userPaymentDetailsId+",'"+l.studentName+"','"+l.paymentTitleLabel+"',"+l.serialNum+');" href="javascript:void(0);">Review </a>',t+="</span></td><td>",t+='<span class="btn btn-sm btn-primary" onclick="showPaymentPopup('+l.userPaymentDetailsId+",'V');\">View</span>","Y"==roleAndModule.added||"Y"==roleAndModule.updated)if("CUSTOMIZED_REGISTRATION_SUBJECT_FEE"==l.paymentTitle||"CUSTOMIZED_SUBJECT_FEE"==l.paymentTitle){if(1==l.standardStatus)t+="<span class=\"btn btn-sm btn-primary\" onclick=\"return showWarningMessage('This is a customized payment plan. Would you like to make changes?','getAsPost(\\'/dashboard/fee-calculation/?type=C&studentStandardId="+l.studentStandardId+"\\')'); \">Edit Custom Payment</span>";else if(0==l.standardStatus){var s=!1;("SUCCESS"!=l.paymentStatus||"DIRECTOR"==USER_ROLE)&&(s=!0),s&&(t+='<span class="btn btn-sm btn-primary" onclick="showPaymentPopup('+l.userPaymentDetailsId+",'E');\">Edit</span>")}}else if("REGISTRATION_SUBJECT_FEE_ADV"==l.paymentTitle||"SUBJECT_FEE_ADV"==l.paymentTitle){s=!1;3==l.standardStatus?t+="<span class=\"btn btn-sm btn-primary\" onclick=\"return showWarningMessage('This is a advanced payment plan. Would you like to make changes?','getAsPost(\\'/dashboard/fee-calculation/?type=A&studentStandardId="+l.studentStandardId+"\\')'); \">Edit Advance Payment</span>":0==l.standardStatus&&("SUCCESS"!=l.paymentStatus||"DIRECTOR"==USER_ROLE)&&(s=!0),s&&(t+='<span class="btn btn-sm btn-primary" onclick="showPaymentPopup('+l.userPaymentDetailsId+",'E');\">Edit</span>")}else if("REGISTRATION_SUBJECT_FEE"==l.paymentTitle||"SUBJECT_FEE"==l.paymentTitle){s=!1;0==l.standardStatus?("SUCCESS"!=l.paymentStatus||"DIRECTOR"==USER_ROLE)&&(s=!0):t+="<span class=\"btn btn-sm btn-primary\" onclick=\"return showWarningMessage('Once you create a custom payment, it can not be changed. If you need to make changes, you will have to create a new one. Would you like to continue?','getAsPost(\\'/dashboard/fee-calculation/?type=C&studentStandardId="+l.studentStandardId+"\\')'); \">Create Custom Payment</span>",s&&(t+='<span class="btn btn-sm btn-primary" onclick="showPaymentPopup('+l.userPaymentDetailsId+",'E');\">Edit</span>")}else{s=!1;("SUCCESS"!=l.paymentStatus||"DIRECTOR"==USER_ROLE)&&(s=!0),s&&(t+='<span class="btn btn-sm btn-primary" onclick="showPaymentPopup('+l.userPaymentDetailsId+",'E');\">Edit</span>")}"Y"==roleAndModule.deleted&&(t+="<span class=\"btn btn-sm btn-primary\" onclick=\"return showWarningMessage('Are you sure you want to delete?','deletePayment("+l.userPaymentDetailsId+", \\'row_"+a+"\\')'); \">Delete</span>"),"Y"!=roleAndModule.added&&"Y"!=roleAndModule.updated||("SUCCESS"==l.paymentStatus&&(t+="<span class=\"btn btn-sm btn-primary\"  onclick=\"return showWarningMessageShow('Are you sure you want to re-send mail?','sendmail("+l.userPaymentDetailsId+")'); \">Resend Mail</span>"),null!=l.signupUrl&&""!=l.signupUrl&&(t+='<span class="btn btn-sm btn-primary" onclick="return mapUnregisteredUserPayment(\'mapStudentForm\','+l.entityId+","+SCHOOL_ID+",'STUDENT','10,11,12,13,14,15,16','"+l.studentName+"','"+l.studentEmail+"'); \">Map to Student</span>"),null!=l.isPaymentFailed&&"SUCCESS"!=l.paymentStatus&&(t+="<span class=\"btn btn-sm btn-primary\" onclick=\"return showWarningMessageShow('Are you sure you want to approve payment and send mails?','callStudentRedirectToDashboard("+l.userId+","+l.userPaymentDetailsId+",\\'Y\\')',false);\">Approve Payment With Mail</span>",t+="<span class=\"btn btn-sm btn-primary\" onclick=\"return showWarningMessageShow('Are you sure you want to approve payment witout sending mails?','callStudentRedirectToDashboard("+l.userId+","+l.userPaymentDetailsId+",\\'N\\')',false);\">Approve Payment Without Mail</span>")),t+="</td></tr>"})),t}function mapStudentModal(){return'<div id="mapStudentModal" class="modal fade bd-example-modal-lg fade-scale square-field" tabindex="" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-md"><div class="modal-content border-0"><div class="modal-header theme-bg text-white"><h4 class="modal-title" id="exampleModalLabel">Student Payment Mapping</h4><button type="button" class="close text-white" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><form action="javascript:void(0);" id="mapStudentForm" name="mapStudentForm" autocomplete="off"><div class="modal-body"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class="form-row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-3"><p><i></i></p><h3 class="text-center" id="mapToStudentId"></h3><input type="hidden" id="unregistredPaymentId" name="unregistredPaymentId" value="" class="form-control"><input id="mapToUsers" name="mapToUsers" class="form-control" value=""></div><div class="col-md-12"><button type="button" class="btn btn-sm btn-primary btn-shadow float-right pr-4 pl-4 ml-2" onclick="mapUnregisteredUserPaymentProcess(\'mapStudentForm\')">Map</button></div></div></div></div></form></div></div></div>'}function getManagePaymentContent(e,a,t,l,s){var o='<div class="main-card mb-3 card responsive-adv-payment"><div class="card-body"><div class="full" style="overflow-x:inherit"><div class="advance-serach full">';return"Y"==a.viewed&&(o+='<a href="javascript:void(0)" class="btn btn-info" data-toggle="modal" onClick="advancePaymentSerch()"><i class="fa fa-search"></i>&nbsp;Advanced Search</a>'),"Y"==a.added&&(o+='<a href="javascript:void(0)" class="btn btn-info pull-right" onclick="addCustomPayment()">Add Payment/Custom Payment</a>'),1==SCHOOL_ID&&"Y"==a.added&&(o+='<a href="javascript:void(0)" class="btn btn-info pull-right" onclick="addExternalPayment(\'addStudentPaymentForm\')">Add External/Unregistered Student Payment</a>'),o+="</div>","Y"==a.added&&(o+='<div class="addPayment-wrapper"><div class="col-md-4 col-sm-6 col-xs-12"><label>School Name</label><select name="schoolId" id="schoolId" class="multiselect-dropdown form-control">'+getSchoolContent(SCHOOL_ID)+'</select></div><div class="col-md-4 col-sm-6 col-xs-12"><label>Name</label><input type="text" name="firstName" id="searchName" style="text-transform:capitalize" class="form-control"></div><div class="col-md-4 col-sm-6 col-xs-12"><label>Student ID</label><input type="text" name="studentId" id="studentId" style="text-transform:capitalize" class="form-control"></div><div class="col-md-4 col-sm-12 col-xs-12"><label>Email</label><input type="text" name="firstName" id="searchEmail" class="form-control"></div><div class="col-md-12 col-sm-12 col-xs-12 mt-2"><a href="javascript:void(0)" class="btn btn-info pull-right" onclick="searchStudentByNameAndEmail();"><i class="fa fa-search"></i>&nbsp;Search</a></div></div><div class="payment-search-table mb-3" id="paymentTableSearch"><table class="table responsive table-bordered text-left" id="paymentTable" style="width:100%"><thead><tr><th>Name</th><th>Student ID</th><th>Email</th><th>Grade</th><th>Action</th></tr></thead><tbody></tbody></table></div>'),o+='<div id="advance-serach-content" style="width:100%;display:inline-block;overflow-x:hidden"><table id="advPaymentSearch" class="table table-bordered responsive nowrap" style="width:100%"><thead><tr><th>S.No</th><th>Copy link.<br>Transaction Reference No.<br>User Reference No.</th><th>Student ID/Name/Email/Grade/Learning Program/LMS Platform</th><th>Payment Name<br>Payment Title<br>Scheduled Payment Date<br>Payment Date</th><th>Plan Name<br>Payment Amount<br>Additional Amount<br>Payment Via<br>Payment Gateway Used</th><th>Payment Status<br>Receipt<br>Proof of Payment</th><th>Added By<br>Updated By<br>Remarks<br>Review Payment</th><th>Edit</th></tr></thead><tbody></tbody></table><br/></div></div></div></div><div id="showEditPopupContainer"></div>'+getAddPaymentModal(t,a.moduleId)+getAdvancePaymentSearch(t,a.moduleId)+getPaymentRemark(t,moduleId)+mapStudentModal()}function getAddPaymentModal(e,a){return'<div id="addPaymentModal" class="modal fade bd-example-modal-lg fade-scale square-field" tabindex="" data-backdrop="static" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content border-0"><div class="modal-header theme-bg text-white"><h4 class="modal-title" id="exampleModalLabel">Payment Details</h4></div><form action="javascript:void(0);" id="addStudentPaymentForm" name="addStudentPaymentForm" autocomplete="off"><div class="modal-body"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class="form-row"><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12" style="display:none"><div class="form-group mb-2 p-0"><label class="mb-0">Student Standard Id</label><input id="studentStandardId" name="studentStandardId" type="text" class="form-control"></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Student Email<sup class="text-danger">*</sup></label><input id="studentEmail1" name="studentEmail1" type="text" class="form-control" style="padding-right:22px" onblur="getStudentDetailsForPayment(\'addStudentPaymentForm\',\'true\')"></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Student Name<sup class="text-danger">*</sup></label><input id="studentName1" name="studentName1" type="text" class="form-control"></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Learning Program<sup class="text-danger">*</sup></label><select id="learningProgram1" name="learningProgram1" class="multiselect-dropdown form-control"><option value="">Select Learning Program</option>'+getLearningProgramContent(e)+'</select></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Grade<sup class="text-danger hideWhenlearningProgramFlexy">*</sup></label><select id="standardId1" name="standardId1" class="multiselect-dropdown form-control"><option value="" disabled>Select Grade*</option>'+getStandardContent(e,!1,!1)+'</select></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Fee Title<sup class="text-danger">*</sup></label><select id="paymentType1" name="paymentType" class="multiselect-dropdown form-control"></select></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Name<sup class="text-danger">*</sup></label><input id="paymentName1" name="paymentName1" type="text" class="form-control"></div></div><div class="col-lg-4 col-md-12 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Alternate Payment Name</label><div class="row"><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><label style="line-height:33px; color:#000"><span id="paymentAlternateName"></span> - </label></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><select id="installmentNumber1" name="installmentNumber1" class="form-control">'+getIntallmentNumbre()+'</select></div><div class="col-lg-1 col-md-1 col-sm-12 col-xs-12 p-0 text-center"><label style="line-height:33px; color:#000">of</label></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><select id="numberOfMonth1" name="numberOfMonth1" class="form-control">'+getNumberOfMonths()+'</select></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 pr-0"><label style="line-height:33px; color:#000">Installment</label></div></div></div></div><div class="col-lg-2 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">User Reference No.</label> <input id="userRefNumber1" name="userRefNumber" type="text" class="form-control"></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Fee Amount<sup class="text-danger">*</sup></label> <input id="payableAmount" name="payableAmount" type="tel" class="form-control" onkeydown="return M.floatDigit(event);"></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Additional Fee</label> <input id="additionalAmount" name="additionalAmount" type="tel" class="form-control" onkeydown="return M.floatDigit(event);" disabled></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Currency<sup class="text-danger">*</sup></label><select id="currency1" name="currency" class="multiselect-dropdown form-control">'+getCurrenciesBySchoolId(e)+'</select></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Gateway Used</label><select id="paymentGateway1" name="paymentGateway" class="multiselect-dropdown form-control">'+getPaymentGateway(e)+'</select></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Status<sup class="text-danger">*</sup></label><select id="status1" name="status" class="multiselect-dropdown form-control"><option value="0" selected >Select Status</option><option value="SCHEDULED" >SCHEDULED</option><option value="SUCCESS">SUCCESS</option></select></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Date<sup class="text-danger hideWhenStatusScheduled">*</sup></label><input type="text" id="paymentDate1" name="paymentDate1" class="form-control" data-toggle="datepicker" onkeydown="return false" readonly disabled></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Schedule Date<sup class="text-danger">*</sup></label><input type="text" id="scheduleDate1" name="scheduleDate1" class="form-control" data-toggle="datepicker" onkeydown="return false" readonly></div></div><div class="col-lg-3 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Transaction No.</label><input id="transactionNumber" name="transactionNumber" type="text" class="form-control"></div></div><div class="col-lg-9 col-md-9 col-sm-12 col-xs-12"><label class="mb-0">Add Description(If any):</label><div name="descriptionDiv" id="descriptionDiv" style="max-height:100px"></div></div><div class="col-md-12"><div class="d-flex flex-wrap"><div style="flex:1;width:1080" id="viewPaymentUrlElementWrapper" style="display:none"><input style="width:100%;float:left;margin-top:20px;border:none" id="viewPaymentUrlElement"  readonly="readonly"></div><div style="margin-left:auto;min-width:400px"><button type="button" class="btn btn-danger btn-shadow float-right pr-4 pl-4 ml-2" data-dismiss="modal" id="closePaymentModal">Close</button><button type="button" class="btn btn-success btn-shadow float-right pr-4 pl-4 ml-2" id="addStudentPaymentbtn" onclick="addStudentPayment(\'addStudentPaymentForm\','+a+')">Add</button><button type="button" class="btn btn-primary btn-shadow float-right pr-4 pl-4" id="copyViewPaymentUrlElement" style="display:none" onclick="copyToClipboard(\'viewPaymentUrlElement\',\'closePaymentModal\')">Copy Payment Url</button></div></div></div></div></div></div></form></div></div></div>'}function getAdvancePaymentSearch(e,a){return'<div id="advSerch" class="modal fade bd-example-modal-lg fade-scale square-field" tabindex="" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content border-0"><div class="modal-header theme-bg text-white"><h4 class="modal-title" id="exampleModalLabel">Advance Search</h4><button type="button" class="close text-white" data-dismiss="modal" paria-label="Close"><span aria-hidden="true">×</span></button></div><form action="javascript:void(0);" id="advancePaymentSearchForm" name="advancePaymentSearchForm" autocomplete="off"><div class="modal-body"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class="form-row"><div class="col-lg-2 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 schoolName"><label class="mb-0">School Name</label><select name="schoolId" id="schoolId" class="multiselect-dropdown form-control">'+getSchoolContent(e)+'</select></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Academic Session</label><select id="academicSession" name="academicSession" class="multiselect-dropdown form-control"></select></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 registeredStudent"><label class="mb-0">Unregistered/Registered Student</label><select id="userRegistrationType" name="userRegistrationType" class="multiselect-dropdown form-control"><option value="Registered">Registered</option><option value="Unregistered">Unregistered</option></select></div></div><div class="col-lg-4 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 paymentType"><label class="mb-0">Payment Title</label><select id="paymentType" name="paymentType" multiple="multiple" class="multiselect-dropdown form-control"></select></div></div><div class="col-lg-2 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 paymentVia"><label class="mb-0">Payment Via</label><select id="paymentVia" name="paymentVia" multiple="multiple" class="multiselect-dropdown form-control">'+paymentVia(e)+'</select></div></div><div class="col-lg-2 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 paymentGateway"><label class="mb-0">Payment Gateway Used</label><select id="paymentGateway" name="paymentGateway" class="multiselect-dropdown form-control">'+getPaymentGateway(e)+'</select></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 enrollmentType"><label class="mb-0">Select Enrollment Type</label><select name="registrationType" id="registrationType" class="multiselect-dropdown form-control"><option value="">Select Learning Program</option>'+getLearningProgramContent(e)+'</select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 gradeID"><label class="mb-0">Grade</label><select id="gradeId" name="gradeId" multiple="multiple" class="multiselect-dropdown form-control"><option value="" disabled>Select Grade*</option>'+getStandardContent(e,!0,!1)+'</select></div></div><div class="col-md-3 col-sm-12 col-xs-12 enrollStatus"><label>Enroll Status</label><select name="enrollStatus" id="enrollStatus" class="multiselect-dropdown form-control"><option value="">Enroll Status</option><option value="0">Completed</option><option value="1">Withdrawn</option><option value="2">Partial entry - New enrollment</option><option value="3">Partial entry - Re-enrollment</option></select></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Name</label><input id="studentName" name="studentName" type="text" class="form-control" autocomplete="off"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Student Id</label><input id="studentId" name="studentId" type="text" class="form-control" autocomplete="off"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Email</label><input id="studentEmail" name="studentEmail" type="email" class="form-control"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 countryId"><label class="mb-0">Country</label><select id="countryId" name="countryId" multiple="multiple" class="multiselect-dropdown form-control"></select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 paymentMode"><label class="mb-0">Student’s Selected Payment Mode</label><select id="paymentMode" name="paymentMode" multiple="multiple" class="multiselect-dropdown form-control">'+getPaymentMode(e)+'</select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Transaction Reference No.</label><input id="transactionRefNumber" name="transactionRefNumber" type="text" class="form-control"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">User Reference No.</label><input id="userRefNumber" name="userRefNumber" type="text" class="form-control"></div></div><div class="col-lg-2 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 paymentStatus"><label class="mb-0">Payment Status</label><select id="paymentStatus" name="paymentStatus" multiple="multiple" class="multiselect-dropdown form-control"><option value="SUCCESS" selected>SUCCESS</option><option value="INITIATED" selected>INITIATED</option><option value="SCHEDULED">SCHEDULED</option><option value="REJECTED">REJECTED</option></select></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Date From</label><input type="text" id="paymentDateFrom" name="paymentDateFrom" class="form-control" data-toggle="datepicker" onkeydown="return false" readonly></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Date To</label><input type="text" id="paymentDateTo" name="paymentDateTo" class="form-control" data-toggle="datepicker" onkeydown="return false" readonly></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 sortBy"><label class="mb-0">Sort in</label><select id="sortBy" name="sortBy" class="multiselect-dropdown form-control"><option value="DESC">Descending</option><option value="ASC">Ascending</option></select></div></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0 orderBy"><label class="mb-0">Order by</label><select id="orderBy" name="orderBy" class="multiselect-dropdown form-control"><option value="PAY_DATE">Payment Date</option><option value="SCHEDULED_PAY_DATE">Scheduled Payment Date</option></select></div></div><div class="col-lg-1 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Start Position</label><input type="text" id="startPosition" name="startPosition" class="form-control" value="0" onkeydown="return M.digit(event);"></div></div><div class="col-lg-1 col-md-2 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">No of Records</label><input type="text" id="numberOfRecords" name="numberOfRecords" class="form-control" value="10" onkeydown="return M.digit(event);"></div></div></div><button type="button" class="btn btn-danger btn-shadow float-right pr-4 pl-4 ml-2" onclick="advancePaymentSearchStudentReset(\'advancePaymentSearchForm\')">Reset</button><button type="button" class="btn btn-info btn-shadow float-right pr-4 pl-4 ml-2" data-dismiss="modal">Close</button><button type="button" class="btn btn-success btn-shadow float-right pr-4 pl-4" onclick="advancePaymentSearchStudent(\'advancePaymentSearchForm\','+a+');" id="advSearchSubmitButtion">Search</button></div></div></form></div></div></div>'}function getPaymentRemark(e,a){return'<div class="modal fade" id="paymentRemarks" tabindex="-1" role="dialog" aria-labelledby="paymentRemarksTitle"><div id="proileApproval" class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title" id="paymentRemarksTitle" style="color:#fff;">Payment Approval - Student Name - Payment Title</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="color:#fff;">&times;</span></button></div><div class="modal-body"><form autocomplete="off" id="paymentRemarksForm"><input type="hidden" id="userPaymentDetailsId" value=""><input type="hidden" id="userId" value=""><input type="hidden" id="moduleId" value=""><input type="hidden" id="serialNumber" value=""><div class="form-group"><label for="remarksStatus" class="control-label">Status:</label><select class="form-control" name="remarksStatus" id="remarksStatus" onchange="changeRemark();"><option value="">Select status</option><option value="Approve">Approve</option><option value="Decline">Reject</option></select></div><div id="pendingRemark" class="form-group"><label for="message-text" class="control-label">Remarks:</label><textarea class="form-control" id="remarks" id="message-text" maxlength="200" style="padding:6px 0"></textarea></div><div><span><strong style="color:green"> Note: </strong> Review once submitted will not be editable until user makes payment again.</span></div></form></div><div id="showRemark" class="modal-footer"><button type="button" class="btn btn-danger" data-dismiss="modal">Close</button><button type="button" class="btn btn-primary" id="addApproveRejectRemarks" onclick="return updatePaymentRemarks(\'paymentRemarksForm\',\''+a+"');\">Add Remarks</button></div></div></div></div>"}function editPaymentContent(e,a,t,l){var s='<div id="editPaymentModal" class="modal fade bd-example-modal-lg fade-scale square-field" tabindex="" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content border-0"><div class="modal-header theme-bg text-white"><h4 class="modal-title" id="exampleModalLabel">Payment Details</h4><button type="button" class="close text-white" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><form action="javascript:void(0);" id="addStudentPaymentForm" name="addStudentPaymentForm" autocomplete="off"><div class="modal-body"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class="form-row"><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Fee Title</label><select id="paymentType2" name="paymentType" class="multiselect-dropdown form-control" disabled>'+getPaymentTitle(a.schoolId)+'</select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Name</label>';return"Reserve an Enrollment Seat - Advance"==a.paymentName||"Reserve a Seat for Next Grade"==a.paymentName?s+='<input id="paymentName2" name="paymentName2" type="text" value="Reserve a Seat for Next Grade" class="form-control" disabled>':"Reserve an Enrollment Seat"==a.paymentName?s+='<input id="paymentName2" name="paymentName2" type="text" value="'+a.paymentName+'" class="form-control" disabled>':s+='<input id="paymentName2" name="paymentName2" type="text" value="'+a.paymentName+'" class="form-control">',s+='</div></div><div class="col-lg-4 col-md-6 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Alternate Payment Name</label><div class="row"><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><label style="line-height:33px; color:#000">'+l+' - </label></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12"><select id="installmentNumber2" name="installmentNumber2" class="form-control">'+getIntallmentNumbre()+'</select></div><div class="col-lg-1 col-md-1 col-sm-12 col-xs-12 p-0 text-center"><label style="line-height:33px; color:#000">of</label></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><select id="numberOfMonth2" name="numberOfMonth2" class="form-control">'+getNumberOfMonths()+'</select></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 pr-0"><label style="line-height:33px; color:#000">Installment</label></div></div></div></div><div class="col-lg-2 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">User Reference No.</label><input id="userRefNumber2" name="userRefNumber" type="text" class="form-control" value="'+a.referenceNumber+'"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Fee Amount</label><input id="payableAmount2" name="payableAmount" type="tel" class="form-control" onkeydown="return M.floatDigit(event);" value="'+a.payAmount+'"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Additional Fee</label><input id="additionalAmount2" name="additionalAmount" type="tel" class="form-control" onkeydown="return M.floatDigit(event);" value="'+a.additionalPayment+'" disabled></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Currency</label><select id="currency2" name="currency2" class="multiselect-dropdown form-control">'+getCurrenciesBySchoolId(a.schoolId)+'</select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Gateway Used</label><select id="paymentGateway2" name="paymentGateway2" class="multiselect-dropdown form-control">'+getPaymentGateway(a.schoolId)+'</select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Status</label><select id="status2" name="status2" class="multiselect-dropdown form-control">'+getPaymentStatus()+'</select></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Payment Date</label><input type="text" id="paymentDate2" name="paymentDate2" class="form-control" data-toggle="datepicker" value="" onkeydown="return false" readonly></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Schedule Date</label><input type="text" id="scheduleDate2" name="scheduleDate2" class="form-control" data-toggle="datepicker" value="" onkeydown="return false" readonly></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12"><div class="form-group mb-2 p-0"><label class="mb-0">Transaction No.</label><input id="transactionNumber2" name="transactionNumber2" type="text" class="form-control" value="'+a.transactionId+'"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12" style="display: none"><div class="form-group mb-2 p-0"><label class="mb-0">User Id</label><input id="userIdSearch" name="userId2" type="text" class="form-control" value="'+a.userId+'"></div></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12" style="display: none"><div class="form-group mb-2 p-0"><label class="mb-0">User Payment Id</label><input id="userPayId" name="userPayId" type="text" class="form-control" value="'+a.id+'"></div></div><div class="row"><div class="col-md-12"><label class="mb-0">Add Description(If any):</label><div name="descriptionDiv" id="descriptionDivBox" style="max-height:100px" onkeydown="return M.isampersandDisable(event);">'+(null!=a.description?a.description:"")+'</div></div></div><div class="col-md-12"><button type="button" class="btn btn-danger btn-shadow float-right pr-4 pl-4 ml-2" data-dismiss="modal">Close</button>',s+="V"==t?"":'<button type="button" class="btn btn-success btn-shadow float-right pr-4 pl-4" onclick="editStudentPayment(\'editPaymentModal\','+e+');">Save</button>',s+="</div></div></div></div></form></div></div></div>"}