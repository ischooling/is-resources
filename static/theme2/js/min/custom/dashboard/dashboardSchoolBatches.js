var flag_Change_Batch_Start_And_EndDate=!1,teacherMappingSetTime=[];function createBatchByStudent(e,t,a){hideMessageTheme2("");var s=$("#batchForm #callFrom").val();console.log("callFrom : "+s),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","create-batch-student"),data:JSON.stringify(getRequestForCreateBatchByStudent(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?showMessageTheme2(!1,t.message):(showMessageTheme2(!0,t.message),$("#"+e)[0].reset(),$("#addBatchModal").modal("hide"),"ManageBatch"==s?setTimeout((function(){callDashboardPageSchool(a,"manage-batch-student")}),1e3):"ManageUser"==s&&setTimeout((function(){advanceStudentSearch("studentFilter",a)}),1e3)),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForCreateBatchByStudent(e,t){var a={},s={},c={};return c.userId=$("#"+e+" #userId").val(),c.batchStudentIds=$("#"+e+" #selectStudentIds").val(),c.standardId=$("#"+e+" #standardId").val(),c.batchName=$("#"+e+" #batchName").val(),c.batchCategory=$("#"+e+" #batchCategory").val(),c.batchStartDate=$("#"+e+" #batchStartDate").val(),c.batchEndDate=$("#"+e+" #batchEndDate").val().trim(),c.batchHolidayDate=$("#"+e+" #batchHolidayDate").val(),c.timeHrsFrom=$("#"+e+" #timeHrsFrom").val(),c.timeMinFrom=$("#"+e+" #timeMinFrom").val(),c.timeInterval=$("#"+e+" #timeInterval").val(),c.periodTime=$("#"+e+" #batchPeriodTime").val(),c.batchDuration=$("#"+e+" #batchDuration").val(),c.sessionId=$("#"+e+" #sessionId").val(),c.timeZoneFrom=$("#"+e+" #countryTimezoneFromId").val(),c.timeZoneTo=$("#"+e+" #countryTimezoneToId").val(),c.classRoomLink=$("#"+e+" #batchLink").val(),c.meetingVendor=$("#"+e+" #meetingVendor").val(),c.joiningType=$("#"+e+" #joiningType").val(),c.schoolId=SCHOOL_ID,a.batchDTO=c,s.hash=getHash(),s.userId=$("#"+e+" #userId").val(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=t,s.sessionUserId=USER_ID,a.authentication=s,a}function saveAcceleratedModeSignupContent(e,t){if(hideMessageTheme2(""),""==$("#"+e+" #studentEmail").val()||null==$("#"+e+" #studentEmail").val())return showMessageTheme2(!1,"Student Email is required to send link"),!1;var a={email:$("#"+e+" #studentEmail").val()};$.ajax({type:"POST",url:getURLForHTML("dashboard","accelerated-mode-signup-student-content"),contentType:"application/json",data:JSON.stringify(a),dataType:"html",cache:!1,success:function(e){if(""!=e){var a;return a=e.split("|"),console.log("stringMessage: "+a),"FAILED"==a[0]||"EXCEPTION"==a[0]||"SESSIONOUT"==a[0]?(showMessageTheme2(!1,a[1]),$("#accModeStudentContentModal").modal("show")):(showMessageTheme2(!0,a[1]),$("#accModeStudentContentModal").modal("hide"),setTimeout((function(){callDashboardPageSchool(t,"accelerated-mode")}),1e3)),!1}},error:function(e){$("#nextStep").prop("disabled",!1),tabActiveStatus(1)}})}function sendAcceleratedModeSignupLinkContent(e,t){hideMessageTheme2("");var a={accModeId:e};$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","accelerated-mode-signup-mail"),data:JSON.stringify(a),dataType:"html",cache:!1,success:function(e){if(""!=e){var a;return a=e.split("|"),console.log("stringMessage: "+a),"FAILED"==a[0]||"EXCEPTION"==a[0]||"SESSIONOUT"==a[0]?showMessageTheme2(!1,a[1]):(showMessageTheme2(!0,a[1]),setTimeout((function(){callDashboardPageSchool(t,"accelerated-mode")}),1e3)),!1}},error:function(e){}})}function callBatchSubjectAndTeacherMapping(e,t,a,s,c,n){hideMessage("");var o={};o.batchId=t,o.standardId=s,o.controllType=c,o.batchName=a,o.moduleId=n,o.userId=USER_ID,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","batch-subject-and-teacher-mapping"),data:JSON.stringify(o),dataType:"html",cache:!1,timeout:6e5,success:function(e){if(""!=e){var t;return"FAILED"==(t=e.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?showMessage(!0,t[1]):$("#batchSubjectTeacherSupportContent").html(e),!1}},error:function(e){return console.log(e),!1}})}function callAssignBatchSubjectTeacherContent(e){var t=$("#subjectTeacherMappingModalLabel #batchId").html(),a=$("#subjectTeacherMappingModalLabel #batchName").html(),s=$("#subjectTeacherMappingModalLabel #standardId").html(),c=$("#subjectTeacherMappingModalLabel #moduleId").html(),n=$("#subjectTeacherMappingModalLabel #controllType").html();$("#viewStudentTeacherTab").removeClass("active"),$("#viewStudentTeacherTab").removeClass("inactive-tab"),$("#assignStudentTeacherTab").removeClass("active"),$("#assignStudentTeacherTab").removeClass("inactive-tab"),$("#viewPastStudentTeacherTab").removeClass("active"),$("#viewPastStudentTeacherTab").removeClass("inactive-tab"),"View"==e?($("#viewStudentTeacherTab").addClass("active"),$("#assignStudentTeacherTab").addClass("inactive-tab"),$("#viewPastStudentTeacherTab").addClass("inactive-tab"),callForDashboardData("formIdIfAny","batch-subject-teacher-linking-content?batchId="+t+"&callFor="+e+"&standardId="+s+"&controllType="+n+"&batchName="+a+"&moduleId="+c,"studentTeacherLinkingContent")):"Assign"==e?($("#viewStudentTeacherTab").addClass("inactive-tab"),$("#assignStudentTeacherTab").addClass("active"),$("#viewPastStudentTeacherTab").addClass("inactive-tab"),callForDashboardData("formIdIfAny","batch-subject-teacher-linking-content?batchId="+t+"&callFor="+e+"&standardId="+s+"&controllType="+n+"&batchName="+a+"&moduleId="+c,"studentTeacherLinkingContent")):"view-assignPastStudentTeacher"==e&&($("#viewStudentTeacherTab").addClass("inactive-tab"),$("#assignStudentTeacherTab").addClass("inactive-tab"),$("#viewPastStudentTeacherTab").addClass("active"),callForDashboardData("formIdIfAny","student-teacher-linking-content?studentId="+studentId+"&callFor="+e+"&standardId="+s+"&controllType="+n,"studentTeacherLinkingContent"))}function submitBatchSubjectTeacherAssign(e,t){var a=$("#subjectIds option:selected").val(),s=$("#subjectIds option:selected").attr("data-standardId"),c=$("#subjectIds option:selected").attr("data-studentId"),n=$("#subjectIds  option:selected").attr("data-assignId"),o=$("#subjectIds option:selected").attr("data-courseType"),r=$("#subjectIds option:selected").attr("data-subjectPId");return hideMessage(""),"Select Subject"==a?(showMessage(!0,"Please select subject to update."),$("#modalMessage").click((function(){setTimeout((function(){$("body").addClass("modal-open")}),1e3)})),!1):validateRequestBatchSubjectTeacherAssign(e,t,a)?void $.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","batch-teacher-assign-submit"),data:JSON.stringify(getRequestForBatchTeacherAssign(e,t,a,s,c,n,o,r)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):showMessage(!0,"Batch Subject-teacher updated successfully."),!1},error:function(e){return!1}}):($("#modalMessage").click((function(){setTimeout((function(){$("body").addClass("modal-open")}),1e3)})),!1)}function getRequestForBatchTeacherAssign(e,t,a,s,c,n,o,r){var d={},i={},l={},h=$("#teacherId option:selected").val();return l.subjectId=a,l.teacherId=h,l.standardId=s,l.subjectPId=r,l.batchId=c,l.oldTeacherId=n,l.courseType=o,d.batchTeacherSavedMappingDTO=l,i.hash=getHash(),i.schoolId=SCHOOL_ID,i.schoolUUID=SCHOOL_UUID,i.userType=t,i.userId=USER_ID,d.authentication=i,d}function validateRequestBatchSubjectTeacherAssign(e,t,a){var s=$("#teacherId option:selected").val();return 0!=s&&null!=s||(showMessage(!0,"Please Select a teacher to update."),!1)}function advanceBatchStudentSearch(e,t){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","assigned-batch-student-search-content"),data:JSON.stringify(getCallRequestForBatchStudentSearch(e,t)),dataType:"html",async:!1,success:function(e){if(""!=e){var t;return"FAILED"==(t=e.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?"SESSIONOUT"==t[0]?redirectLoginPage():showMessage(!0,t[1]):($("#advBatchStudentSearch").modal("hide"),$("#advance-search-content").html(e)),!1}}})}function getCallRequestForBatchStudentSearch(e,t){var a={},s={},c={};return c.moduleId=t,c.gradeId=$("#"+e+" #gradeId").select2("val"),c.studentName=$("#"+e+" #studentName").val().trim(),c.studentSubject=$("#"+e+" #studentSubject").select2("val"),c.sortBy=$("#"+e+" #sortBy").select2("val"),c.startPosition=$("#"+e+" #startPosition").val().trim(),c.numberOfRecords=$("#"+e+" #numberOfRecords").val().trim(),c.schoolUUID=SCHOOL_UUID,c.schoolId=SCHOOL_ID,a.batchStudentSearchDTO=c,s.hash=getHash(),s.userType="SCHOOL",s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,a.authentication=s,a}function batchStudentSearchReset(e){$("#"+e+" #gradeId").val("").trigger("change"),$("#"+e+" #studentName").val(""),$("#"+e+" #studentSubject").val(""),$("#"+e+" #sortBy").val("DESC").trigger("change"),$("#"+e+" #startPosition").val("0"),$("#"+e+" #numberOfRecords").val("25")}function validateTeacherTimeTableSchedule(e,t,a,s,c,n,o,r,d){if($("#needToAddTimePreferrence").val(!1),!validateRequestBatchSubjectTeacherTime(t,s))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","validate-teacher-batch-time-schedule"),data:JSON.stringify(getRequestForBatchTeacherTime(e,t,a,s,c,n)),dataType:"json",cache:!1,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message),$("#viewBatch-"+t+" .proceedClassbtn").show();else{$(".teacher-mapping-set-time-"+t+" .teacher-mapping-set-time-item").each((function(e){var a=$("#batch-schedule"+t+" .teachStartDate").val(),s=$("#batch-schedule"+t+" .teachEndDate ").val(),c=$(this).find(".teachDays").prop("checked"),n=$(this).find("#timeInterval"+t+(e+1)).val();teacherMappingSetTime.push(new Object({startDate:a,endDate:s,dayValue:c,timeInterval:n}))})),console.log(teacherMappingSetTime);var a=e.saveForcefully,s=e.recurringClassListForAvailability;if($("#availaibilityHeading").hide(),s.length>0){$("#availaibilityHeading").show(),$("#needToAddTimePreferrence").val(!0),$("#teacherAvailabilityTable").show();for(var c="",n=0;n<s.length;n++)c+="<tr class='text-danger'>\n\t\t\t\t\t\t\t\t<td>"+s[n].meetingDate+"</td>\n\t\t\t\t\t\t\t\t<td>"+s[n].slotAvailableReason+"</td>\n\t\t\t\t\t\t\t</tr>";$("#teacherAvailabilityTable #teacherAvailabilityTbody").html(c),$("#viewBatch-"+t+" .proceedClassbtn").hide()}else $("#teacherAvailabilityTable").hide(),$("#needToAddTimePreferrence").val(!1);"Y"==a&&$("#viewBatch-"+t+" .proceedClassbtn").show(),$("#saveForcefully").val(a);for(var o=e.recurringClassList,r="",d=1,i=!0,l=0;l<o.length;l++)"Available"!=o[l].slotAvailable||"Available"!=o[l].slotAvailableBatch?r+="<tr class='text-danger'>":r+="<tr>",r=(r=(r=(r=r+" <td>"+d+++"</td>")+" <td>"+o[l].subjects+"</td>")+" <td>"+o[l].teachName+"</td>")+" <td>"+o[l].teacherTime+"</td>",r="Available"!=o[l].slotAvailableBatch?r+" <td>"+o[l].slotAvailableBatch+"</td>":r+" <td>"+o[l].slotAvailable+"</td>",r="Available"!=o[l].slotAvailableBatch?r+" <td>"+o[l].reason+"</td>":r+" <td>"+o[l].studentName+"</td>",r+="</tr>","Available"==o[l].slotAvailable&&"Available"==o[l].slotAvailableBatch||(i=!1);i?$("#viewBatch-"+t+" .proceedClassbtn").show():$("#viewBatch-"+t+" .proceedClassbtn").hide(),$("#trRecurring").html(r),$("#recurringClassShowModel").modal("show"),flag_Change_Batch_Start_And_EndDate=!1}},error:function(e){}})}function checkUpdatesBatch(e,t){var a=[],s=[];$(".teacher-mapping-set-time-"+t+" .teacher-mapping-set-time-item").each((function(e){var a=$("#batch-schedule"+t+" .teachStartDate").attr("data-date-start"),c=$("#batch-schedule"+t+" .teachEndDate ").attr("data-date-end"),n="true"==$(this).find("#teachDays"+t+(e+1)).attr("data-check"),o="-"==$(this).find("#timeInterval"+t+(e+1)).attr("data-selected-time")?"":$(this).find("#timeInterval"+t+(e+1)).attr("data-selected-time");s.push(new Object({startDate:a,endDate:c,dayValue:n,timeInterval:o}))})),$(".teacher-mapping-set-time-"+t+" .teacher-mapping-set-time-item").each((function(e){var s=$("#batch-schedule"+t+" .teachStartDate").val(),c=$("#batch-schedule"+t+" .teachEndDate ").val(),n=$(this).find(".teachDays").prop("checked"),o=$(this).find("#timeInterval"+t+(e+1)).val();a.push(new Object({startDate:s,endDate:c,dayValue:n,timeInterval:o}))})),JSON.stringify(a)===JSON.stringify(s)||$("#viewBatch-"+t+" .proceedClassbtn").hide(),$("#viewBatch-"+t+" .validateTeacherTime").show(),console.log(a),console.log(s)}function validateBatchOutsideAvailabilityConfirmationModal(e,t,a,s,c,n,o,r,d,i){if($(".subjectTeacherTimeError").text(""),hideMessage(""),!validateRequestBatchSubjectTeacherTime(t,s))return!1;$("#booksclassOutsideAvailabilityConfirmationModal").modal("show"),null!=r&&""!=r&&$("#studentBatchName").text(r),null!=i&&""!=i&&$("#courseActivity").text(i);var l="updateTeacherTimeTableSchedule('"+e+"', '"+t+"', '"+a+"', '"+s+"', '"+c+"', '"+n+"', '"+o+"', '"+r+"', '"+d+"');";$("#updateTeacherTimeTableScheduleBtn").attr("onclick",l);var h=$("#needToAddTimePreferrence").val(),u=$("#saveForcefully").val();"true"==h?$("#updateTeacherTimeTableScheduleBtn").hide():$("#updateTeacherTimeTableScheduleBtn").show(),"Y"==u&&$("#updateTeacherTimeTableScheduleBtn").show()}function updateTeacherTimeTableSchedule(e,t,a,s,c,n,o,r,d){$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","update-teacher-batch-time-schedule"),data:JSON.stringify(getRequestForBatchTeacherTime(e,t,a,s,c)),dataType:"json",cache:!1,success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!0,"Teacher time updated successfully."),$("#booksclassOutsideAvailabilityConfirmationModal").modal("hide"),$("#batchSubjectTeacherMappingModel").modal("hide"),setTimeout((function(){callBatchSubjectAndTeacherMapping("formId",n,r,o,"View",d)}),1e3),flag_Change_Batch_Start_And_EndDate=!0),!1},error:function(e){}})}function validateRequestBatchSubjectTeacherTime(e,t){if(console.log("stdate"),null==$("#startDate"+t).val()||""==$("#startDate"+t).val())return showMessage(!0,"Please enter start date."),!1;if(null==$("#endDate"+t).val()||""==$("#endDate"+t).val())return showMessage(!0,"Please enter end date."),!1;var a=$("#startDate"+t).val(),s=$("#endDate"+t).val();if(new Date(a)>new Date(s))return showMessage(!0,"End date should be greater than start date."),!1;var c=[],n=0;return $("input:checkbox[name=teachDays"+t+"]:checked").each((function(){""==$(this).val()&&(showMessage(!0,"Please choose day."),n=1),""==$("#timeInterval"+e+$(this).val()).val()&&(showMessage(!0,"Please choose time schedule."),n=1),c.push($("#timeInterval"+e+$(this).val()).val())})),n>0?(showMessage(!0,"Please choose time schedule."),!1):0!==c.length||(showMessage(!0,"Please choose time schedule."),!1)}function getRequestForBatchTeacherTime(e,t,a,s,c,n){console.log(e);var o={},r={},d={},i=[];return d.firstBatchTeacherMappingId=e,d.batchStartDate=$("#batchStartDate").val(),d.batchEndDate=$("#batchEndDate").val(),d.batchId=n,d.subjectId=t,d.subjectPId=c,d.oldTeacherId=a,d.newTeacherId=$("#assignTeacherId"+s).val(),d.steachStartDate=$("#startDate"+s).val(),d.steachEndDate=$("#endDate"+s).val(),$("#checkTeacher"+s).is(":checked")?d.teacherCountinueCheck="Y":(d.teacherCountinueCheck="N",d.continueTeacherId=$("#assignContinueTeacherId"+s).val()),$("input:checkbox[name=teachDays"+s+"]:checked").each((function(){var e={};e.batchTeacherMappingId=$(this).attr("data-batchid"),e.dayId=$(this).val(),e.scheduleTime=$("#timeInterval"+t+$(this).val()).val(),i.push(e)})),d.batchTeacherSavedMappingList=i,o.batchTeacherMapping=d,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType=moduleId,r.userId=$("#userId").val(),o.authentication=r,o}function changeTeacherTime(e,t,a){$("#startDate"+a).val(""),$("#endDate"+a).val("")}function callStudentBatchTransfer(e,t,a,s,c,n,o){hideMessage("");var r={};r.batchId=t,r.standardId=s,r.controllType=c,r.batchName=a,r.moduleId=n,r.userId=USER_ID,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","move-student-batch"),data:JSON.stringify(r),dataType:"html",cache:!1,timeout:6e5,success:function(e){if($("#batchSubjectTeacherSupportContent").html(""),""!=e){var t;return"FAILED"==(t=e.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?showMessage(!0,t[1]):"Delete"==c?(setTimeout((function(){callDashboardPageSchool(n,"manage-batch-student")}),1e3),showMessage(!0,"Batch deleted successfully.")):$("#batchSubjectTeacherSupportContent").html(e),!1}},error:function(e){return console.log(e),!1}})}function callBatchExaminationSheetModule(e,t,a,s,c,n,o){hideMessage("");var r={};r.batchId=t,r.standardId=s,r.controllType=c,r.batchName=a,r.moduleId=n,r.userId=USER_ID,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","batch-exam-sheet"),data:JSON.stringify(r),dataType:"html",cache:!1,timeout:6e5,success:function(e){if(""!=e){var t;return"FAILED"==(t=e.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?showMessage(!0,t[1]):$("#batchSubjectTeacherSupportContent").html(e),!1}},error:function(e){return console.log(e),!1}})}function saveBatchExaminationSheet(e,t,a){var s=$("#"+e+" #fileupload1ChoosenFile").text();if(""==s.trim()||null==s.trim()||"No file chosen..."==s.trim())return $("#modalMessageNew").show(),$("#modalMessageNew").addClass("failure"),$("#modalMessageNew").html("Attachement is required"),!1;var c=$("#"+e+" #userId").val();$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","save-batch-exam-sheet"),data:JSON.stringify(getRequestForSaveBatchExamSheet(e)),dataType:"json",cache:!1,timeout:6e5,success:function(s){return console.log("response data is:",s),"0"==s.status||"2"==s.status?($("#modalMessageNew").show(),$("#modalMessageNew").addClass("failure"),$("#modalMessageNew").html(s.message)):($("#modalMessageNew").show(),$("#modalMessageNew").addClass("success"),$("#modalMessageNew").html(s.message),$("#"+e)[0].reset(),setTimeout((function(){$(".modal-backdrop").removeClass("show"),$(".modal-backdrop").addClass("modal"),$(".modal-backdrop").removeClass("modal-backdrop"),callBatchExaminationSheetModule("",t,"","","",a,c)}),3e3)),!1},error:function(e){return!1}})}function getRequestForSaveBatchExamSheet(e){var t={},a={},s={};return s.batchId=$("#"+e+" #batchId").val().trim(),s.fileName=$("#"+e+" #fileupload1ChoosenFile").text(),s.activeStatus="Y",s.controllType="UPLOAD",t.batchExamSheetDTO=s,a.hash=getHash(),a.schoolId=SCHOOL_ID,a.schoolUUID=SCHOOL_UUID,a.userId=$("#"+e+" #userId").val(),a.sessionUserId=USER_ID,t.authentication=a,t}function callForChangeStatus(e,t,a,s,c){var n={},o={},r={};r.controllType=a,o.hash=getHash(),o.schoolId=SCHOOL_ID,o.schoolUUID=SCHOOL_UUID,o.userId=$("#"+e+" #userId").val(),o.sessionUserId=USER_ID,n.authentication=o,n.batchExamSheetDTO=r,n.batchExShId=t;var d=$("#"+e+" #userId").val();$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","update-batch-exam-sheet"),data:JSON.stringify(n),dataType:"json",cache:!1,timeout:6e5,success:function(e){return console.log("response data is:",e),"0"==e.status||"2"==e.status?($("#modalMessageNew").show(),$("#modalMessageNew").addClass("failure"),$("#modalMessageNew").html(e.message)):($("#modalMessageNew").show(),$("#modalMessageNew").addClass("success"),$("#modalMessageNew").html(e.message),setTimeout((function(){$(".modal-backdrop").removeClass("show"),$(".modal-backdrop").addClass("modal"),$(".modal-backdrop").removeClass("modal-backdrop"),callBatchExaminationSheetModule("",c,"","","",s,d)}),3e3)),!1},error:function(e){return!1}})}function getRequestForMoveBatchByStudent(e,t,a){var s={},c={},n={};return n.userId=$("#"+e+" #userId").val(),n.batchId=$("#"+e+" #batchId").val(),n.controllType=a,n.moveToBatchId=$("#"+e+" #tansferBatch option:selected").val(),n.batchStudentIds=$("#"+e+" #selectStudentIds").val(),n.standardId=$("#"+e+" #standardId").val(),n.batchName=$("#"+e+" #batchName").val(),n.schoolId=SCHOOL_ID,s.batchDTO=n,c.hash=getHash(),c.userId=$("#"+e+" #userId").val(),c.schoolId=SCHOOL_ID,c.schoolUUID=SCHOOL_UUID,c.userType=t,c.sessionUserId=USER_ID,s.authentication=c,s}function transferStudent(e,t,a,s){if("Add"==s||0!=$("#tansferBatch option:selected").val()){var c="";$("#moveStudentBatch > tbody  > tr").each((function(e,t){$(this).find(".checkStudentname").is(":checked")&&(c=c+$(this).find(".checkStudentname").val()+",")})),""!=c?($("#selectStudentIds").val(c.substring(0,c.length-1)),console.log("student Ids are ",c),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","move-batch-student"),data:JSON.stringify(getRequestForMoveBatchByStudent(e,t,s)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!0,e.message),$("#batchStudentTransferModel").modal("hide"),setTimeout((function(){callDashboardPageSchool(a,"manage-batch-student")}),1e3)),!1},error:function(e){console.log("ERROR : ",e)}})):showMessage(!0,"Please select atleast one student")}else showMessage(!0,"Please select batch to move student.")}function callTeacherTimeScheduleBatch(e,t,a){if(hideMessage(""),flag_Change_Batch_Start_And_EndDate){(c=new Date($("#endDate"+t).val())).setDate(c.getDate()+1);var s=$("#batchEndDate").val()}else{var c;(c=new Date($("#batchStartDate").val())).setDate(c.getDate()+1);s=$("#batchEndDate").val()}$.ajax({type:"POST",url:getURLForHTML("dashboard","batch-subject-teacher-timeschedule-content"),data:"batchId="+e+"&subjectId="+t+"&teacherId="+a,dataType:"html",cache:!1,timeout:6e5,success:function(e){if(""!=e){var a;return"FAILED"==(a=e.split("|"))[0]||"EXCEPTION"==a[0]||"SESSIONOUT"==a[0]?showMessage(!0,a[1]):$("#batch-schedule"+t).html(e).promise().done((function(){$("#viewBatch-"+t+" .proceedClassbtn").hide(),$("#startDate"+t).datepicker("remove"),$("#startDate"+t).datepicker({format:"mm-dd-yyyy",startDate:new Date(c+1),endDate:new Date(s),autoclose:!0,todayHighlight:!1}),$("#endDate"+t).datepicker("remove"),$("#endDate"+t).datepicker({format:"mm-dd-yyyy",startDate:new Date(c+1),endDate:new Date(s),autoclose:!0,todayHighlight:!1})})),!1}},error:function(e){return console.log(e),!1}})}function teacherTimeCheck(e,t,a,s){var c=!1;hideMessage(""),$(".subjectTeacherTimeError").text("");var n=$("#assignTeacherId"+t).val(),o=$("#startDate"+t).val();return console.log($("#assignTeacherId"+t).val()),checkUpdatesBatch("",t),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","teacher-time-available"),data:JSON.stringify(getCallRequestForTeacherTime(n,e,a,o)),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(e){"0"!=e.status&&"2"!=e.status||(c=!0)},error:function(e){console.log("ERROR : ",e)}}),c}function getCallRequestForTeacherTime(e,t,a,s){var c={},n={},o={requestKey:"TEACHER-TIME-AVAILABLE"};return o.requestValue=e,o.requestExtra=t,o.requestExtra1=a,o.requestExtra2=s,n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=moduleId,c.authentication=n,c.requestData=o,c}function batchTimeCheck(e,t,a,s){var c=!1;return hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","student-subject-time-available"),data:JSON.stringify(getCallRequestForBatchTime(s,e,a)),dataType:"json",cache:!1,timeout:6e5,async:!1,success:function(e){"0"==e.status||"2"==e.status?c=!0:($(".subjectTeacherTimeError").text("Selected time already scheduled"),$("#teachDays"+t+a).prop("checked",!1),$("#timeInterval"+t+a).val(""),c=!1)},error:function(e){console.log("ERROR : ",e)}}),c}function getCallRequestForBatchTime(e,t,a){var s={},c={},n={requestKey:"BATCH-TIME-AVAILABLE"};return n.requestValue=e,n.requestExtra=t,n.requestExtra1=a,c.hash=getHash(),c.schoolId=SCHOOL_ID,c.schoolUUID=SCHOOL_UUID,c.userType=moduleId,s.authentication=c,s.requestData=n,s}function calendarDates(e,t,a,s,c){var n=$("#inActDate").val(),o=$("#roleModuleId").val();customLoader(!0);var r={};r.startDate=t,r.slotType=a,r.disabledDate=n,r.userId=s,r.batchId=c,r.moduleId=o,$.ajax({type:"POST",url:getURLForHTML("dashboard","calendar-dates"),data:JSON.stringify(r),contentType:"application/json",dataType:"html",cache:!1,timeout:6e5,success:function(t){if(""!=t){var a;return"FAILED"==(a=t.split("|"))[0]||"EXCEPTION"==a[0]||"SESSIONOUT"==a[0]?"SESSIONOUT"==a[0]?redirectLoginPage():showMessage(!0,a[1]):($("#monthYear").html(""),$("#"+e).html(t),customLoader(!1)),!1}},error:function(e){return!1}})}function editBatchDetails(e,t,a){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","edit-batch-details"),data:JSON.stringify(getRequestForEditBatchDetails(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?showMessage(!0,t.message):($("#"+e)[0].reset(),showModalMessage(!1,t.message),setTimeout((function(){$("#batchStudentTransferModel").modal("hide")}),2500)),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForEditBatchDetails(e,t){var a={},s={},c={};return c.userId=$("#"+e+" #userId").val(),c.batchId=$("#"+e+" #batchId").val(),c.batchName=$("#"+e+" #batchNameEdit").val(),c.batchStartDate=$("#"+e+" #batchStartDate").val(),c.batchEndDate=$("#"+e+" #batchEndDate").val().trim(),c.batchHolidayDate=$("#"+e+" #batchHolidayDate").val(),c.timeHrsFrom=$("#"+e+" #timeHrsFrom").val(),c.timeMinFrom=$("#"+e+" #timeMinFrom").val(),c.timeInterval=$("#"+e+" #timeInterval").val(),c.periodTime=$("#"+e+" #batchPeriodTime").val(),c.batchDuration=$("#"+e+" #batchDuration").val(),c.meetingVendor=$("#"+e+" #meetingVendor").val(),c.joiningType=$("#"+e+" #joiningType").val(),c.sessionName=$("#"+e+" #batchSession").val(),c.schoolId=SCHOOL_ID,a.batchDTO=c,s.hash=getHash(),s.userId=$("#"+e+" #userId").val(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=t,s.sessionUserId=USER_ID,a.authentication=s,a}function removeTeacherTimeTable(e,t,a,s,c,n,o,r){if(hideMessage(""),""==a)return!1;customLoader(!0),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","remove-teacher-time-table"),data:JSON.stringify(getRequestForRemoveTeacherTimeTable(e,t,a,s,c)),dataType:"json",cache:!1,success:function(t){return"0"==t.status||"2"==t.status?showMessage(!0,t.message):(showMessage(!0,"Teacher time remove successfully."),$("#batchSubjectTeacherMappingModel").modal("hide"),setTimeout((function(){callBatchSubjectAndTeacherMapping("formId",e,n,o,"View",r)}),1e3),customLoader(!1)),!1},error:function(e){}})}function getRequestForRemoveTeacherTimeTable(e,t,a,s,c){var n={},o={},r={};r.batchId=e,r.subjectId=t,r.teacherId=a,r.steachStartDate=s;var d=c.split("-")[2]+"-"+c.split("-")[0]+"-"+c.split("-")[1];return r.batchEndDate=d,o.hash=getHash(),o.schoolId=SCHOOL_ID,o.schoolUUID=SCHOOL_UUID,o.userType=moduleId,o.userId=$("#userId").val(),n.authentication=o,n.batchTeacherMapping=r,n}function updateClassLink(e,t,a,s){return hideMessage(""),$(".error-message-link").text(""),""==$("#"+e+" #classLink").val()?($(".error-message-link").text("Please fill classroom link"),!1):""==$("#"+e+" #teacherId").val()?($(".error-message-link").text("teacher not found"),!1):""==$("#"+e+" #subjectId").val()?($(".error-message-link").text("subject not found"),!1):void $.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","create-teacher-class-link"),data:JSON.stringify(getRequestForUpdateClassLink(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!0,e.message),$("#batchCreateTime").modal("hide"),setTimeout((function(){callDashboardPageSchool(a,"batch-schedule","",s)}),1e3)),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForUpdateClassLink(e,t){var a={},s={},c={},n={};return n.batchId=$("#"+e+" #batchId").val(),n.teacherId=$("#"+e+" #teacherId").val(),n.subjectId=$("#"+e+" #subjectId").val(),n.steachStartDate=$("#"+e+" #startDate").val(),n.startTime=$("#"+e+" #startTime").val(),n.meetingLink=$("#"+e+" #classLink").val(),n.meetingGenerateStatus="MANUAL",n.timeZone=$("#"+e+" #timeZone").val(),c.batchTeacherMapping=n,s.hash=getHash(),s.userId=$("#"+e+" #userId").val(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=t,a.authentication=s,a.requestData=c,a}function sendMailStudentMoveBatch(e,t,a,s,c){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","send-mail-student-move-batch"),data:JSON.stringify(getRequestForStudentMoveBatch(e,t,a,s,c)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||e.status,showMessage(!0,e.message),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForStudentMoveBatch(e,t,a,s,c){var n={},o={},r={};return r.mailType=c,r.batchId=a,"SendToOne"==c?r.studentId=s:r.ids=$("#batchMoveForm #selectStudentIdsForMail").val(),n.batchStudentDetailsDTO=r,o.hash=getHash(),o.schoolId=SCHOOL_ID,o.schoolUUID=SCHOOL_UUID,o.userType=t,n.authentication=o,n}function sendMailTeacherMoveBatch(e,t,a,s,c,n){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","send-mail-teacher-move-batch"),data:JSON.stringify(getRequestForTeacherMoveBatch(e,t,a,s,c,n)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||e.status,showMessage(!0,e.message),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForTeacherMoveBatch(e,t,a,s,c,n){var o={},r={},d={};return d.batchId=a,d.mailType=n,"SendToOne"==n?d.teacherId=s:d.ids=$("#batchMoveForm #selectTeacherIdsForMail").val(),o.teacherDetailsDTO=d,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userId=c,r.userType=t,o.authentication=r,o}function inactiveTeacherTimeTableSchedule(e,t,a,s,c){hideMessage("");var n={};n.batchId=e,n.subjectId=t,n.userId=USER_ID,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","inactive-batch-subject"),data:JSON.stringify(n),dataType:"html",cache:!1,timeout:6e5,success:function(t){if(""!=t){var n;return"FAILED"==(n=t.split("|"))[0]||"EXCEPTION"==n[0]||"SESSIONOUT"==n[0]?showMessage(!0,n[1]):(showMessage(!0,"Batch Subject deleted successfully."),$("#batchSubjectTeacherMappingModel").modal("hide"),setTimeout((function(){callBatchSubjectAndTeacherMapping("formId",e,a,s,"View",c)}),1e3)),!1}},error:function(e){return console.log(e),!1}})}function studentRemoveFromBatch(e,t,a,s,c,n){hideMessage(""),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","remove-student-from-batch"),data:JSON.stringify(getRequestForStudentRemoveFromBatch(e,t,a,s)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!0,e.message),$("#batchStudentTransferModel").modal("hide"),setTimeout((function(){callStudentBatchTransfer("formId",a,c,n,"Edit",t)}),1e3)),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForStudentRemoveFromBatch(e,t,a,s){var c={},n={},o={};return o.batchId=a,o.studentId=s,c.batchStudentDetailsDTO=o,n.userId=$("#userId").val(),n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=t,c.authentication=n,c}function sendMailCancelClass(e,t,a){let s={};s.batchTeacherMappingId=t,s.status=e,s.classCancelDate=a,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","class-cancel-and-reschedule"),data:JSON.stringify(s),dataType:"json",cache:!1,timeout:6e5,success:function(e){"0"==e.status||"2"==e.status?showMessageTheme2(0,e.message):(showMessageTheme2(1,e.message),location.reload())}})}