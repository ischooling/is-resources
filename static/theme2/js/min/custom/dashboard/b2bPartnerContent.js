async function renderPartnerDashboard(t,e,l,a,s){customLoader(!0);var o=await getPartnerCommissionRate("","partnerCommitionRate",a);$("#dashboardContentInHTML").html(partnerDashboardContent(t,e,l,a,s,o)),$("#discountForEnrollmentPartner").select2({theme:"bootstrap4"}).on("change",(function(){}));var n=getPartnerDashboardDetailsData(a);$("#chartContentDiv").html(partnerDashboardLPContent(n));var i,r=0,d=0,c=0,m=0,p=0,h="",v="";$.each(n.schoolLPDetails.learningProgramDetails,(function(t,e){h=e.schoolDicountSymbol,v=e.partnerDicountSymbol,d+=parseFloat(e.revenue_d),c+=parseFloat(e.revenue_id),m+=parseFloat(e.revenue_pending_d),p+=parseFloat(e.revenue_pending_id),getPartnerStudentGrade("",e.learningProgramCode+"_id_chart_"+t,a,e.learningProgramCode,e.enrollmentFor)})),v="$",h="$",r=d+c;i=m+p;d-=m,c-=p;var b=0==(r-=i)?0:d/r*100,g=0==r?0:c/r*100;$("#totalRevenueValue").html(v+" "+parseFloat(r).toFixed(2)),$("#directEnrollment").html(v+" "+parseFloat(d).toFixed(2)),$("#throughIs").html(h+" "+parseFloat(c).toFixed(2)),$("#pendingCommission").html(v+" "+parseFloat(i).toFixed(2)),$("#dirPercent").html(parseInt(b.toFixed())+"%"),$("#thIsPercent").html(parseInt(g.toFixed())+"%"),$("#dirPercent_p").html("$"+parseInt(m)),$("#thIsPercent_p").html("$"+parseInt(p));var u=$("#commissionRatesTab_0").attr("data-tab-value"),f=$("#commissionRatesTab_0").attr("data-school-value"),x=$("#commissionRatesTab_0").attr("data-partner-value");getCommissionRatesChart("chart0",""+u,f,x),$('a[data-toggle="tab"]').on("shown.bs.tab",(function(t){var e=$(t.target).attr("data-tab-index"),l=$(t.target).attr("data-tab-value");f=$(t.target).attr("data-school-value");var a=$(t.target).attr("data-partner-value");getCommissionRatesChart("chart"+e,""+l,f,a)}))}function renderPartnerDashboardSchool(t,e,l,a,s){var o='<div class="app-container app-theme-white body-tabs-shadow fixed-header fixed-sidebar">'+dashboardHeaderContent()+'<div class="app-main  pb-4"><div class="col p-0"><div class="app-main__inner pt-2">'+partnerDashboardContent(t,e,l,a,s)+"</div></div></div></div>"+dashboardFooterContent()+loaderContent();$("body").html(o);var n=getPartnerDashboardDetailsData(a);$("#chartContentDiv").html(partnerDashboardLPContent(n)),$.each(n.schoolLPDetails.learningProgramDetails,(function(t,e){getPartnerStudentGrade("",e.learningProgramCode+"_id_chart_"+t,a,e.learningProgramCode,e.enrollmentFor)})),$(".hideRate").addClass("d-none")}function partnerDashboardLPContent(t){var e='<div class="col-12 p-0"><div class="row">';return $.each(t.schoolLPDetails.learningProgramDetails,(function(t,l){var a=parseFloat(l.revenue_d)+parseFloat(l.revenue_id);a-=parseFloat(l.revenue_pending_d)+parseFloat(l.revenue_pending_id),e+='<div class="col-xl-4 col-4 col-md-6 col-sm-12 col-12 mb-4"><div class="w-100 card h-100"><div class="card-body"><h5 class="card-title"><div class="w-100 d-flex flex-wrap justify-content-between"><span class="d-inline-block mb-1">'+l.label+'</span><span class="pull-right text-primary mb-1">Revenue: $'+a+'</span></div></h5><div id="'+l.learningProgramCode+"_id_chart_"+t+'"></div></div>  </div></div>'})),e+="</div></div>"}function partnerDashboardContent(t,e,l,a,s,o){var n=getPartnerDashboardDetails(a);localStorage.setItem("convertYear",n.counselor.convertYear),localStorage.setItem("referralCode",n.schoolServiceLinks.referralCode);var i=`<div class="app-page-title">\n\t\t\t<div class="page-title-wrapper">\n\t\t\t\t<div class="page-title-heading">\n\t\t\t\t\t<div class="page-title-icon"><i class="pe-7s-users text-primary"></i></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span class="text-primary welcome-name-text">Welcome ${n.userFullName}</span>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="main-card mb-3">\n\t\t\t<h5 class="font-weight-semi-bold text-dark">Account Manager Details</h5>\n\t\t\t<div class="mb-3 card border rounded-10">\n\t\t\t\t<div class="card-body">`+getAccountManagerDetailsContent(n);return i+='</div>\n\t\t\t</div>\n\t\t\t<div class="row">'+getChartContent(o.commissionRates)+getEnrollmentLinksContent(n),i+="</div>"+getRevenueContent()+getEnrollmentStatisticsContent(),i+="</div>"}function getAccountManagerDetailsContent(t){return`<div class="row align-items-center">\n\t\t\t<div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 border-right text-dark mb-lg-0 mb-3">\n\t\t\t\t\n\t\t\t\t<div class="full px-3">\n\t\t\t\t\t<div class="d-flex w-100">\n\t\t\t\t\t\t<div class="icon-wrapper rounded-circle m-0" style="width:25px;height:25px">\n\t\t\t\t\t\t\t<div class="icon-wrapper-bg opacity-9 bg-primary"></div>\n\t\t\t\t\t\t\t<i class="fa fa-user text-white font-12"></i>\n\t\t\t\t\t\t</div> \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h6 class="ml-1 font-size-lg font-weight-semi-bold">Name</h6>    \n\t\t\t\t\t\t</div>  \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="font-size-lg">${t.counselor.name}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-12 border-right text-dark mb-lg-0 mb-3">\n\t\t\t\t<div class="full px-3">\n\t\t\t\t\t<div class="d-flex w-100">\n\t\t\t\t\t\t<div class="icon-wrapper rounded-circle m-0" style="width:25px;height:25px">\n\t\t\t\t\t\t\t<div class="icon-wrapper-bg opacity-9 bg-primary"></div>\n\t\t\t\t\t\t\t<i class="fa fa-envelope text-white font-12"></i>\n\t\t\t\t\t\t</div> \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h6 class="ml-1 font-size-lg font-weight-semi-bold">Email</h6>    \n\t\t\t\t\t\t</div>  \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="font-size-lg">${t.counselor.email}</div>\n\t\t\t\t</div>\n\t\t\t</div> \n\t\t\t<div class="col-xl-5 col-lg-12 col-md-12 col-sm-12 col-12 text-dark mb-lg-0 mb-3">\n\t\t\t\t<div class="d-flex flex-wrap px-3 align-items-center justify-content-between">\n\t\t\t\t\t<div class="mb-md-0 mb-3">\n\t\t\t\t\t\t<div class="d-inline-flex w-100">\n\t\t\t\t\t\t\t<div class="icon-wrapper rounded-circle m-0" style="width:25px;height:25px">\n\t\t\t\t\t\t\t\t<div class="icon-wrapper-bg opacity-9 bg-primary"></div>\n\t\t\t\t\t\t\t\t<img src="${PATH_FOLDER_IMAGE}watsapp-icon.png" class="position-relative mx-auto" style="z-index:5;width:15px;">\n\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h6 class="ml-1 font-size-lg font-weight-semi-bold">WhatsApp</h6>    \n\t\t\t\t\t\t\t</div>  \n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="font-size-lg">${t.counselor.whatsapp}</div>    \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bg-primary text-white px-3 py-2 rounded-10">\n\t\t\t\t\t\t<div class="d-flex flex-wrap align-items-center">\n\t\t\t\t\t\t\t<span class="float-left font-weight-semi-bold font-size-lg mr-2">Enrollment Partner Code</span>\n\t\t\t\t\t\t\t<span class="float-right font-14 ml-3">${t.cityName} | ${t.countryName}</span>    \n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<a href="javascript:void(0)" class="bg-white text-primary rounded-10 font-weight-semi-bold p-1 px-2 d-inline-flex align-items-center mt-1 text-decoration-none" onclick="copyURL('copyCode1','copy-msg-1')">${t.schoolServiceLinks.referralCode} <i class="fa fa-copy float-right ml-3"></i></a>    \n\t\t\t\t\t\t\t<b class="copy-msg-1 text-white ml-1" style="color:#fff !important"></b>\n\t\t\t\t\t\t\t<div style="top:18px;left:0;position:absolute;">\n\t\t\t\t\t\t\t\t<input type="text" id="copyCode1" value="${t.schoolServiceLinks.referralCode}" style="opacity:0;height:0px">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>   \n\t\t</div>`}function getEnrollmentRangeContent(t){var e='<div class="d-flex flex-wrap align-items-center mb-1">\n\t\t\t<span class="font-weight-semi-bold d-inline-block mr-2">Enrollment Range: </span>\n\t\t\t<ul class="flex-grow-1 p-0 body-tabs body-tabs-layout tabs-animated body-tabs-animated nav" style="min-width:200px">';return $.each(t,(function(t,l){var a=l.min_range+"-"+l.max_range;0==l.max_range&&(a=l.min_range+"+"),e+='<li class="nav-item float-left">\n\t\t\t\t\t\t<a href="#commissionRatesTabContent_'+t+'" id="commissionRatesTab_'+t+`" data-tab-index="${t}" data-tab-value="${a}" data-school-value="${l.bySchoolValue}" data-partner-value="${l.byPartnerValue}" class="px-2 py-1 nav-link ${0==t?"active":""}" role="tab" data-toggle="tab" aria-selected="false">\n\t\t\t\t\t\t\t<span>${a}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>`})),e+="</ul>\n\t\t</div>"}function getChartContent(t){var e='<div class="col-xl-5 col-lg-5 col-md-6 col-sm-12 col-12 mb-2">\n\t\t\t<h5 class="font-weight-semi-bold text-dark">Your Commission Rates</h5>\n\t\t\t<div class="w-100 mb-3 card border rounded-10" style="height:calc(100% - 32px)">\n\t\t\t\t<div class="card-body">'+getEnrollmentRangeContent(t);return e+='<div class="tab-content">',$.each(t,(function(t,l){var a="%"==l.bySchoolType?"":"$";e+=`<div class="tab-pane tabs-animation fade ${0==t?"show active":""}" id="commissionRatesTabContent_`+t+`" role="tabpanel">\n\t\t\t\t\t\t\t\t<div class="d-flex flex-wrap">\n\t\t\t\t\t\t\t\t\t<div class="d-inline-flex flex-column flex-grow-1">\n\t\t\t\t\t\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t\t\t\t\t\t<span class="h-100 bg-primary rounded float-left mr-2" style="width:4px"></span>\n\t\t\t\t\t\t\t\t\t\t\t<h5 class="font-weight-light m-0">${a} ${l.bySchoolValue} ${l.bySchoolType}</h5>\n\t\t\t\t\t\t\t\t\t\t\t<p class="font-12 mb-2">Commission-Through IS</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<span class="h-100 bg-alternate rounded float-left mr-2" style="width:4px"></span>\n\t\t\t\t\t\t\t\t\t\t\t<h5 class="font-weight-light m-0">${a} ${l.byPartnerValue} ${l.byPartnerType}</h5>\n\t\t\t\t\t\t\t\t\t\t\t<p class="font-12 m-0">Commission-Direct Enrollment</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mx-auto overflow-hidden" style="position: relative; max-width:200px;max-height:101px;">\n\t\t\t\t\t\t\t\t\t\t<div id="chart`+t+'" style="visibility:hidden;opacity:0"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="icon-wrapper rounded-circle m-0 position-absolute" style="width:25px;height:25px; top: calc(50% - 5px);left: 50%;width: 30px;height: 30px;transform: translate(-50%, -50%);z-index: 10;">\n\t\t\t\t\t\t\t\t\t\t\t<div class="icon-wrapper-bg opacity-9 bg-light-primary"></div>\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-users" style="font-size:14px;"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>'})),e+="</div>\n\t\t\t\t</div>\n\t\t\t</div>    \n\t\t</div>"}function getEnrollmentLinksContent(t){var e='<div class="col-xl-7 col-lg-7 col-md-6 col-sm-12 col-12 mb-2">\n\t\t\t<h5 class="font-weight-semi-bold text-dark">Enrollments & Seats Reservation Links</h5>\n\t\t\t<div class="w-100 mb-3 card border rounded-10" style="height:calc(100% - 32px)">\n\t\t\t\t<div class="card-body">\n\t\t\t\t\t<div class="d-flex mb-3 rounded-pill bg-light border overflow-hidden" style="width: fit-content; position: relative; z-index: 10;">\n\t\t\t\t\t\t<button type="button" class="btn btn-sm px-3 py-1 rounded-pill text-white bg-primary border-0" id="enrollmentTabBtn" onclick="toggleLinkTab(\'enrollment\')">Your Enrollment Links</button>\n\t\t\t\t\t\t<button type="button" class="btn btn-sm px-3 py-1 rounded-pill text-dark bg-transparent border-0" id="seatTabBtn" onclick="toggleLinkTab(\'seat\')">Seat Reservation Links</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="enrollmentLinksSection" class="d-flex flex-wrap" style="gap:5px;">';return $.each(t.schoolServiceLinks.learningProgramLinks,(function(t,l){e+=`<div>\n\t\t\t\t\t\t\t\t<a href="javascript:void(0)" class="bg-light-primary text-primary border border-light-primary rounded font-weight-semi-bold p-1 px-2 d-inline-flex align-items-center mt-1 text-decoration-none" onclick="copyURL('${l.learningProgramCode}_id_${t}','${l.learningProgramCode}_class_${t}')">${l.label} <i class="fa fa-copy float-right ml-3"></i></a>    \n\t\t\t\t\t\t\t\t<b class="${l.learningProgramCode}_class_${t} mx-1"></b>\n\t\t\t\t\t\t\t\t<div style="top:18px;left:0;position:absolute;">\n\t\t\t\t\t\t\t\t\t<input type="text" id="${l.learningProgramCode}_id_${t}" value="${l.link}" style="opacity:0;height:0px">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`})),e+='</div>\n\t\t\t\t\t<div id="seatLinksSection" class="d-none flex-wrap" style="gap:5px;">',$.each(t.schoolServiceLinks.learningProgramRasLinks,(function(t,l){["Flexy Program","English Learning Program - One to One","English Learning Program - Self Study"].includes(l.label)||(e+=`<div>\n\t\t\t\t\t\t\t\t<a href="javascript:void(0)" class="bg-seat-light-primary text-seat-primary border border-light-primary rounded font-weight-semi-bold p-1 px-2 d-inline-flex align-items-center mt-1 text-decoration-none" onclick="copyURL('${l.learningProgramCode}_id_${t+"_seat"}','${l.learningProgramCode}_class_${t+"_seat"}')">${l.label} <i class="fa fa-copy float-right ml-3"></i></a>    \n\t\t\t\t\t\t\t\t<b class="${l.learningProgramCode}_class_${t+"_seat"} mx-1"></b>\n\t\t\t\t\t\t\t\t<div style="top:18px;left:0;position:absolute;">\n\t\t\t\t\t\t\t\t\t<input type="text" id="${l.learningProgramCode}_id_${t+"_seat"}" value="${l.link}" style="opacity:0;height:0px">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>`)})),e+="</div>\n\t\t\t\t</div>\n\t\t\t</div>    \n\t\t</div>"}function getRevenueContent(){return'<div class="row mt-3">\n\t\t<div class="col-12">\n\t\t\t<h5 class="font-weight-semi-bold text-dark">Revenue Details</h5>\n\t\t</div>\n\t\t<div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 mb-3"> \n\t\t\t<div class="bg-light-success border border-success px-2 p-1 rounded-10 h-100 d-flex align-items-center flex-column">\n\t\t\t\t<div class="d-flex flex-wrap mb-1 w-100">\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark flex-grow-1 m-0 font-size-lg">Total Revenue: </h5>\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark m-0 font-size-lg" id="totalRevenueValue"></h5>\n\t\t\t\t</div>\n\t\t\t\t<div class="p-1 px-2 text-right rounded ml-auto" style="background:rgba(255, 255, 255, 0.6)">\n\t\t\t\t\t<span class="text-alternate">Direct Enrollment: <label class="m-0" id="dirPercent">0%</label>&nbsp;|&nbsp;</span>\n\t\t\t\t\t<span class="text-primary">Through IS: <label class="m-0" id="thIsPercent">0%</label></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 mb-3"> \n\t\t\t<div class="bg-light-alternate border border-alternate px-2 p-1 rounded-10 h-100 d-flex align-items-center">\n\t\t\t\t<div class="d-flex flex-wrap mb-1 w-100">\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark flex-grow-1 m-0 font-size-lg">Direct Enrollment: </h5>\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark m-0 font-size-lg" id="directEnrollment">$ 00.00</h5>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 mb-3"> \n\t\t\t<div class="bg-light-primary border border-primary px-2 p-1 rounded-10 h-100 d-flex align-items-center">\n\t\t\t\t<div class="d-flex flex-wrap mb-1 w-100">\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark flex-grow-1 m-0 font-size-lg">Through IS: </h5>\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark m-0 font-size-lg" id="throughIs">$ 00.00</h5>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 mb-3"> \n\t\t\t<div class="bg-light-orange border border-orange px-2 p-1 rounded-10 h-100 d-flex align-items-center flex-column">\n\t\t\t\t<div class="d-flex flex-wrap mb-1 w-100">\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark flex-grow-1 m-0 font-size-lg">Pending Commission: </h5>\n\t\t\t\t\t<h5 class="font-weight-semi-bold text-dark m-0 font-size-lg" id="pendingCommission">$ 00.00</h5>\n\t\t\t\t</div>\n\t\t\t\t<div class="p-1 px-2 text-right rounded ml-auto" style="background:rgba(255, 255, 255, 0.6)">\n\t\t\t\t\t<span class="text-alternate">Direct Enrollment: <label class="m-0" id="dirPercent_p">0%</label>&nbsp;|&nbsp;</span>\n\t\t\t\t\t<span class="text-primary">Through IS: <label class="m-0" id="thIsPercent_p">0%</label></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>'}function getEnrollmentStatisticsContent(){return'<div class="row mt-3">\n\t\t<div class="col-12">\n\t\t\t<h5 class="font-weight-semi-bold text-dark">Enrollment Statistics</h5>\n\t\t</div>\n\t\t<div class="col-12">\n\t\t\t<div id="chartContentDiv"></div>\n\t\t</div>\n\t</div>'}async function dashboardHeaderContent(){var t=await getSchoolSettingsLinks(SCHOOL_ID);return'<div class="sticky-header"><div class="app-header header-shadow"><div class="app-header__logo"><a href="'+t.schoolWebsite+'" target="blank" class="logo-src" style="background:url('+t.logoUrl+SCRIPT_VERSION+');"></a></div><div class="app-header__logo"></div></div></div>'}async function dashboardFooterContent(){var t=await getSchoolSettingsTechnical(SCHOOL_ID);return'<div class="app-wrapper-footer"><div class="app-footer"><div class="app-footer__inner"><div class="col"><p style="margin: 0">'+t.copyrightYear+" © "+t.copyrightUrl+'</p></div></div></div><div class="server-message"><span class="msg" id="msgTheme2"></span></div></div>'}function loaderContent(){var t='<div id="commonloaderIdNewLoader" class="loader-wrapper d-flex justify-content-center align-items-center loader-style hide-loader">';return 1==SCHOOL_ID?t+='\n\t\t\t\t<img src="'+PATH_FOLDER_IMAGE2+'loader-new.gif" alt="'+SCHOOL_NAME+' Loader" class="new-loader-2024" />\n\t\t\t':t+='<div class="ball-rotate"><div style="background-color: rgb(247, 185, 36);"></div></div><p>Loading ...</p>',t+=NaN}function renderPartnerList(t,e,l,a,s){if("B2B_PARTNER"==s)$("#dashboardContentInHTML").html(partnerListContent(t,localStorage.getItem("referralCode")));else if("STUDENT_COUNSELOR"==USER_ROLE||"B2B_LEAD"==USER_ROLE)$("#dashboardContentInHTML").html(partnerListContent("Partner "+t,""));else{var o='<div class="app-container app-theme-white body-tabs-shadow fixed-header fixed-sidebar">'+dashboardHeaderContent()+'<div class="app-main  pb-4"><div class="col p-0"><div class="app-main__inner pt-2">'+partnerListContent(t,"")+"</div></div></div></div>"+dashboardFooterContent()+loaderContent();$("body").html(o)}getSessionMasterList("partnerEnrollFilterForm","academicYear",!1),callPartnerCountries("partnerEnrollFilterForm",0,"countryId"),callPartnerListBy("partnerEnrollFilterForm","partnerName"),$("select#countryId").on("change",(function(){callStates("partnerEnrollFilterForm",this.value,"countryId")})),$("select#stateId").on("change",(function(){callCities("partnerEnrollFilterForm",this.value,"stateId")})),$("select#partnerName").on("change",(function(){$("#referralCode").val($("option:selected",this).attr("dail-referral-code"))})),$("#partnerName").select2({theme:"bootstrap4"}),$("#academicYear").select2({theme:"bootstrap4"}),$("#enrollmentStatus").select2({theme:"bootstrap4"}),$("#learningProgram").select2({theme:"bootstrap4"}),$("#gradeId").select2({theme:"bootstrap4"}),$("#commissionStatus").select2({theme:"bootstrap4"}),$("#countryId").select2({theme:"bootstrap4"}),$("#stateId").select2({theme:"bootstrap4"}),$("#cityId").select2({theme:"bootstrap4"}),$("#paymentDateFrom").datepicker({autoclose:!0,format:"M dd, yyyy"}),$("#paymentDateTo").datepicker({autoclose:!0,format:"M dd, yyyy"}),$(".follow-up-no").click((function(){$(this).find(".fa-angle-down").toggleClass("fa-angle-down fa-angle-up"),$(this).parent().siblings().find(".fa-angle-up").toggleClass("fa-angle-up fa-angle-down"),$(this).parent().find(".follow-up-content").slideDown(),$(this).parent().siblings().find(".follow-up-content").slideUp(),$(this).parent().addClass("follow-up-accordian-active"),$(this).parent().siblings().removeClass("follow-up-accordian-active")})),getAllGrade(SCHOOL_ID),callStudentListByPartner("partnerEnrollFilterForm",""),$("#searchEnrolled").on("click",(function(){callStudentListByPartner("partnerEnrollFilterForm")})),$("#bulkCommission").on("click",(function(){$("#updateTransferCommission").modal("show");var t=getCallTotalCommission();$("#totalCommission").text(t.toFixed(2)),$("input[name=checkCommission]").on("change",(function(){var t=getCallTotalCommission();$("#totalCommission").text(t.toFixed(2))}))})),$("#btnClickCommission").on("click",(function(){updateStudentPartnerCommissionRate("","","","","")}))}function partnerListContent(t,e){var l=pageTitleEnrolledContent(t);return l+=mainCardEnrolled(e)}function pageTitleEnrolledContent(t){return'<div class="app-page-title"><div class="page-title-wrapper"><div class="page-title-heading"><div class="page-title-icon"><i class="pe-7s-users text-primary"></i></div><h4>'+t+"</h4></div></div></div>"}function mainCardEnrolled(t){return'<div class="main-card mb-3 card"><div class="card-body"><div class="row">'+B2BStudentListfilterForm(t)+B2BStudentListDetailsSkeleton()+'<div class="table-responsive col-12" id="enrolled-list"></div></div></div></div>'+B2BStudentListCommissionPopup()}function B2BStudentListfilterFormSkeleton(){return'<div class="col-12 mb-2" ><div class="row"><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12 mb-2"><div class="full rounded skeleton" style="height:42px"></div></div><div class="col-xl-12 col-lg-3 col-sm-4 col-sm-6 col-12 text-right mb-2"><div class="d-inline-block rounded skeleton" style="width:65px; height:38px"></div></div></div></div>'}function B2BStudentListfilterForm(t){var e='<form id="partnerEnrollFilterForm"><div class="col-12 mb-2"><div class="row">';return""==t&&(e+='<div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Select Partner</label><select class="form-control" name="partnerName" id="partnerName" ></select></div>'),e+='<input type="hidden" class="form-control" name="referralCode" id="referralCode" value="'+t+'"/><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Academic Year</label><select class="form-control" name="academicYear" id="academicYear"></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Enrollment Status</label><select class="form-control" name="enrollmentStatus" id="enrollmentStatus"><option value="">Enrollment Status</option><option value="0">Enrolled</option><option value="3">Re-Enrolled</option><option value="1">Withdrawn</option><option value="2">Partial Entry</option></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Grade</label><select class="form-control" name="gradeId" id="gradeId"><option value="">Select Grade</option>'+getStandardContent(SCHOOL_ID,!1)+'</select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Student Name</label><input type="text" class="form-control" name="studentName" id="studentName"/></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Email</label><input type="text" class="form-control" name="email" id="email"/></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Country</label><select class="form-control" name="countryId" id="countryId"></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">State</label><select class="form-control" name="stateId" id="stateId"></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">City</label><select class="form-control" name="cityId" id="cityId"></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Commission Status</label><select class="form-control" name="commissionStatus" id="commissionStatus"><option value="">Select Commission Status</option><option value="PENDING">Pending</option><option value="Amount Transferred">Amount Transferred</option><option value="None">None</option></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Learning Program</label><select class="form-control" name="learningProgram" id="learningProgram"><option value="">Select Learning Program</option>'+getLearningProgramContent(SCHOOL_ID)+'</select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Payment Date From</label><input type="text" class="form-control" name="paymentDateFrom" id="paymentDateFrom"/></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Payment Date To</label><input type="text" class="form-control" name="paymentDateTo" id="paymentDateTo"/></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Payment Status</label><select class="form-control" name="paymentStatus" id="paymentStatus"><option value="">Select Payment Status</option><option value="SUCCESS">SUCCESS</option><option value="SCHEDULED">SCHEDULED</option><option value="INITIATED">INITIATED</option><option value="FAILED">FAILED</option></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Fee Status</label><select class="form-control" name="feeStatus" id="feeStatus"><option value="">Select Fee Status</option><option value="PENDING">Pending Fees</option><option value="FULL">No Pending Fees</option><option value="FEENOTSELECT">Fee Plan not selected</option></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Sort By</label><select class="form-control" name="sortBy" id="sortBy"><option value="Desc">Desc</option><option value="Asc">Asc</option></select></div><div class="col-xl-3 col-lg-3 col-sm-4 col-sm-6 col-12"><label class="full text-primary">Page Size</label><input type="text" class="form-control" value="25" name="pageSize" id="pageSize"/></div><div class="col-12 mt-2 text-right">',""==t&&(e+='<a href="javascript:void(0)" class="btn btn-success btn-shadow float-right pr-4 pl-4 ml-2" id="bulkCommission">Bulk Commission</a>'),e+='<a href="javascript:void(0)" class="btn btn-success btn-shadow float-right pr-4 pl-4" id="searchEnrolled">Search</a><a href="javascript:void(0)" class="btn btn-primary btn-shadow float-right pr-4 pl-4 mr-2" onclick="resetEnrollmentForm(\'partnerEnrollFilterForm\')">Reset</a></div></div></div></form>'}function B2BStudentListDetailsSkeleton(){return'<div class="col-12 mb-2" id="enroll-list-skeleton"><table class="table table-bordered table-striped without_h_scroll" style=""><thead class="theme-bg primary-bg white-txt-color"><tr><th style="width: 3%;" class="skeleton">&nbsp;</th><th style="width: 19%;" class="skeleton">&nbsp;</th><th style="width: 21%;" class="skeleton">&nbsp;</th><th style="width: 19%;" class="skeleton">&nbsp;</th><th style="width: 19%;" class="skeleton">&nbsp;</th><th style="width: 19%;" class="skeleton">&nbsp;</th></tr></thead><tbody><tr><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td></tr><tr><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td></tr><tr><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td><td class="skeleton" height="100px"></td></tr></tbody></table></div>'}function B2BStudentListDetails(t,e){console.log(t);var l='<table class="table table-bordered font-12 border-radius-table" style="min-width:1300px;width:100%;font-size:11px !important" id="studentDataList"><thead><tr><th class="bg-primary text-white bold rounded-top-left-10 border-bottom-0 border-primary" style="border-top-color:transparent;border-right-color:#fff !important">S No.</th><th class="bg-primary text-white bold border-bottom-0">Student Details</th><th class="bg-primary text-white bold border-bottom-0">Enrollment Details</th><th class="bg-primary text-white bold border-bottom-0 text-center">Fee Details</th><th class="bg-primary text-white bold border-bottom-0 text-center">Fee Schedule</th><th class="bg-primary text-white bold border-bottom-0 rounded-top-right-10" style="border-top-color:transparent;border-right-color:transparent">Expected Commision</th></tr></thead><tbody class="student-table-css">';if(t.length>0){var a=1;for(let e=0;e<t.length;e++){const v=t[e];var s="updateStudentPartnerCommissionRate('"+v.stuStandardId+"', 'Amount Transferred','"+v.commition+"','"+v.strCommRate+"','"+v.referralCode+"');",o="updateStudentPartnerCommissionRate('"+v.stuStandardId+"', 'None','"+v.commition+"','"+v.strCommRate+"','"+v.referralCode+"');";if(l+='<tr><td class="text-center" style="max-width:40px;min-width: 60px;">'+a+'</td><td class=" vertical-align-top"><table class="w-100"><tbody><tr><th class="border-0 p-1 font-weight-bold" style="width:148px">Name:</th><td class="border-0 p-1">'+v.studentName+"</td></tr>","Partial Entry"==v.admissionType&&(l+='<tr><th class="border-0 p-1 font-weight-bold" style="width:148px">Email:</th><td class="border-0 p-1">'+v.email+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:148px">Phone:</th><td class="border-0 p-1">'+v.phone+"</td></tr>"),l+='<tr><th class="border-0 p-1 font-weight-bold" style="width:148px">Country | State | City:</th><td class="border-0 p-1">'+v.countryName+" | "+v.stateName+" | "+v.cityName+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:148px">Grade:</th><td class="border-0 p-1">'+v.standardName.replace("Grade ","")+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:148px">Learning Program:</th><td class="border-0 p-1">'+v.learningMode+'</td></tr></tbody></table></td><td class="p-0  vertical-align-top"><table class="w-100"><tbody><tr><td class="border-0"><table class="w-100"><tbody><tr><th class="border-0 p-1 font-weight-bold" style="width:112px">Enrollment Status:</th><td class="border-0 p-1">'+v.admissionType+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:112px">Enrollment Date:</th><td class="border-0 p-1">'+("Partial Entry"==v.admissionType?"N/A":v.admissionDate)+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:112px">Academic Duration:</th><td class="border-0 p-1">'+("N/A"==v.startDate?"N/A":v.startDate+" - ")+v.endDate+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:112px">Enrollment Type:</th><td class="border-0 p-1">'+v.enrollType+"</td></tr>",v.counselorId!=USER_ID&&(l+='<tr><th class="border-0 p-1 font-weight-bold" style="width:112px">Partner Name:</th><td class="border-0 p-1">'+v.counselorUsername+"</td></tr>"),l+='</tbody></table></td></tr></tbody></table></td><td class="p-0  vertical-align-top"><table class="w-100"><tbody><tr><td class="border-0"><table class="w-100"><tbody><tr><th class="border-0 p-1 font-weight-bold" style="width:95px">Fee Plan:</th><td class="border-0 p-1">'+v.paymentType+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:95px">Total Fee:</th><td class="border-0 p-1">'+v.totalFee+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:95px">Pending Fee:</th><td class="border-0 p-1">'+v.paymentDue+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:95px">Last Paid Fee:</th><td class="border-0 p-1">'+v.amount+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:95px">Last Paid Date:</th><td class="border-0 p-1">'+v.paymentDate+"</td></tr></tbody></table></td></tr></tbody></table></td>","One-time payment"==v.paymentType&&"$ 0.00"==v.paymentDue)l+='<td class="p-0  vertical-align-middle text-center" style="width: 230px;"><strong>No Pending Fees</strong></td>';else if("$ 0.00"==v.paymentDue||"N/A"==v.paymentDue||"All Paid"==v.paymentDue)"N/A"==v.paymentType?l+='<td class="p-0  vertical-align-middle text-center" style="width: 230px;"><strong>N/A</strong></td>':l+='<td class="p-0  vertical-align-middle text-center" style="width: 230px;"><strong>No Pending Fees</strong></td>';else{if(l+='<td class="p-0  vertical-align-top ulli" style="width: 230px;">',null!=v.scheduleArray){l+='<ul class="follow-up-accordian m-0 p-0 overflow-auto" style="min-height: 180px;max-height: 180px;">';var n=1,i=1;for(let t=0;t<v.scheduleArray.length;t++){var r="";r=1==n?n+"st":2==n?n+"nd":3==n?n+"rd":n+"th";const e=v.scheduleArray[t];var d="",c="none";paymentList=!1,"SCHEDULED"==e.status&&1==i&&(d="follow-up-accordian-active",c="block",i=0);var m=r+" Installment";"One-time payment"==v.paymentType&&(m=v.paymentType),l+='<li class="'+d+'"><span class="cursor follow-up-no text-primary p-2 text-center border-primary full bold">'+m+'<i class="fa '+("SCHEDULED"==e.status?"fa-angle-up":"fa-angle-down")+' float-right" style="line-height: 20px;"></i></span><div class="follow-up-content text-center" style="display:'+c+'"><div class="bg-light-primary p-2 m-2 rounded text-left"><span class="full d-block"><strong>Fee:</strong>'+e.payAmount+'</span><span class="full d-block"><strong>Payment Status:</strong> '+e.status+'</span><span class="full d-block"><strong>Schedule Date:</strong> '+e.scheduleDate+"</span>",""!=e.payDate&&(l+='<span class="full d-block"><strong>Payment Date:</strong> '+e.payDate+"</span>"),n+=1}l+="</ul>"}l+="</td>"}l+='<td class="p-0  vertical-align-top"><table class="w-100"><tbody><tr><td class="border-0"><table class="w-100"><tbody><tr><th class="border-0 p-1 font-weight-bold" style="width:80px">Commission:</th><td class="border-0 p-1">'+v.commition+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:80px">Status:</th><td class="border-0 p-1">'+v.transMessage+'</td></tr><tr><th class="border-0 p-1 font-weight-bold" style="width:80px">Updated Date:</th><td class="border-0 p-1">'+v.transDate+"</td></tr>",v.counselorId!=USER_ID&&"All Paid"==v.paymentDue&&(l+='<tr><td colspan="2" class="border-0 p-1 text-center"><div class="dropdown d-inline-block"><button type="button" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="dropdown-toggle btn btn-sm btn-primary">Update</button><div tabindex="-1" role="menu" aria-hidden="true" class="dropdown-menu-md dropdown-menu p-2" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 28px, 0px);"><a href="javascript:void(0)" onclick="'+s+'" class="dropdown-item">Amount Transferred</a><a href="javascript:void(0)" onclick="'+o+'" class="dropdown-item">None</a></div></div></td></tr>');var p="bg-primary",h="ENROLLMENT VIA IS";"D"==v.studentEnrollBy&&(h="DIRECT ENROLLMENT",p="bg-alternate"),l+='<tr><td class="border-0 p-1 font-weight-bold " colspan="2"><span class="'+p+' p-1 text-white">'+h+"</span></td></tr>",l+="</tbody></table></td></tr></tbody></table></td>",l+="</tr>",a+=1}}else l+='<tr><td colspan="6" class="text-center bold font-16">No Record found</td></tr>';return l+="</tbody></table>"}function B2BStudentListCommissionPopup(){return'<div class="modal fade" id="updateTransferCommission"><div class="modal-dialog modal-md" role="document"><div class="modal-content"><div class="modal-header p-2 bg-primary text-white"><h5 class="m-0">Update Commission Status</h5></div><form action="javascript:void(0);" id="transferCommissionForm" name="transferCommissionForm" autocomplete="off"><div class="modal-body" ><div class="row"><div class="col-6 mt-2 text-left">Amount Transferred on:</div><div class="col-6 mt-2 text-right"><span id="totalCommissionDate">Jul 04, 2024</span></div></div><div class="row"><div class="col-6 mt-2 text-left">Total Amount Transferred</div><div class="col-6 mt-2 text-right">$ <span id="totalCommission">300.00</span></div></div><div class="full mt-1 studentCommitionList"></div></div><div class="modal-footer"><div class="full mt-1"><button type="button" class="btn btn-success btn-shadow float-right pr-4 pl-4" id="btnClickCommission">Update</button><button type="button" class="btn btn-info btn-shadow float-right pr-4 pl-4 mr-2" data-dismiss="modal">Close</button></div></div></form></div></div></div>'}function B2BStudentListCommission(t){var e='<table class="table table-bordered font-12 border-radius-table" style="width:100%;font-size:11px !important" id="commissionList"><thead><tr><th class="bg-primary text-white bold rounded-top-left-10 border-bottom-0 border-primary" style="border-top-color:transparent;border-right-color:#fff !important">S No.</th><th class="bg-primary text-white bold border-bottom-0">Name</th><th class="bg-primary text-white bold border-bottom-0">Fee Plan</th><th class="bg-primary text-white bold border-bottom-0">Commission</th><th class="bg-primary text-white bold border-bottom-0">Commission Status</th></tr></thead><tbody class="student-table-css">';if(t.length>0){var l=1;for(let a=0;a<t.length;a++){const s=t[a];"Pending"!=s.transMessage&&"None"!=s.transMessage||"All Paid"==s.paymentDue&&(e+='<tr class="commission_list" id="'+s.stuStandardId+'" data-commission="'+s.commition+'" data-commission-rate="'+s.strCommRate+'"><td class="text-center"><input type="checkbox" class="chkcommission" checked name="checkCommission" id="checkCommission'+s.stuStandardId+'" value="'+s.stuStandardId+'">&nbsp;&nbsp;&nbsp;&nbsp;'+l+'</td><td class=" vertical-align-top">'+s.studentName+'</td><td class=" vertical-align-top">'+s.paymentType+'</td><td class=" vertical-align-top">'+s.commition+'</td><td class=" vertical-align-top"><select class="form-control-update" name="commissionStatus" id="commissionStatus'+s.stuStandardId+'"><option value="Amount Transferred">Amount Transferred</option><option value="None">None</option></select></td>',e+="</tr>",l+=1)}1==l&&(e+='<tr><td class="text-center" colspan="3">No Pending Commission</td>',e+="</tr>")}else e+='<tr><td colspan="6" class="text-center bold font-16">No Record found</td></tr>';return e+="</tbody></table>"}function renderReferralCodeAndLinks(t,e,l,a,s){$("#dashboardContentInHTML").html(referralCodeAndLinksContent(t,e,l,a,s))}function referralCodeAndLinksContent(t,e,l,a,s){var o=getReferralCodeAndLinksDetails(a);console.log("responseData "+JSON.stringify(o));var n='<div class="col"><div class="row"><div class="col-md-12"><div class="card"><div class="card-header card-header-primary"><h4 class="card-title">Referral Code & Links</h4></div><div class="card-body p-4"><div class="full"><div class="col-xl-12"><h2 class="card-title '+(null==o.schoolServiceLinks?"text-center mt-4":"")+'">Welcome '+o.userFullName+'</h2></div><div class="d-flex flex-wrap mt-3">';return null!=o.schoolServiceLinks?(n+='<div class="col-xl-3 col-lg-3 col-md-4 col-sm-12 col-12 mb-3"><div class="p-3 h-100" style="background:#f4eaf7;border-radius:10px"><h3 class="text-primary bold">Enrollment Partner Code</h3><p class="bold m-0 text-black-50 "><button value="'+o.schoolServiceLinks.referralCode+'" class="mr-1 btn btn-primary btn-sm" id="referralCode" onclick="copyURL(\'referralCode\',\'referral-code\')"><i class="fa fa-copy"></i></button><span class="referral_code">'+o.schoolServiceLinks.referralCode+'</span><b class="referral-code full"></b></p></div></div><div class="col-xl-9 col-lg-9 col-md-8 col-sm-12 col-12 mb-3 partnerStudentUrl"><div class="p-3" style="background:#f4eaf7;border-radius:10px"><h3 class="bold text-primary">Your Enrollment Links</h3><div class="row">',$.each(o.schoolServiceLinks.learningProgramLinks,(function(t,e){n+='<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12"><p class="bold m-0 text-black-50 font-12"><button value="'+e.link+'" id="'+e.learningProgramCode+"_id_"+t+'" class="mr-1 btn btn-primary btn-sm" onclick="copyEnrollmentLink(\''+e.learningProgramCode+"_id_"+t+"','"+e.learningProgramCode+"_class_"+t+'\')"><i class="fa fa-copy"></i></button>'+e.label+'<b class="'+e.learningProgramCode+"_class_"+t+' full">&nbsp;</b></p></div>'})),n+="</div></div></div>"):n+='<div class="col-12 mb-3"><h3 class="bold text-primary text-center mt-0">Your referral code is not created yet.</h3></div>',n+="</div></div></div></div></div></div></div>"}function getOptionDiscountOptions(t){var e="";return $.each(t,(function(t,l){"P"==l.discountType?e+='<option discountCode="'+l.discountCode+'" discountType="'+l.discountType+'" value="'+l.discountValue+'">'+l.discountValue+"% Discount</option>":"F"==l.discountType&&(e+='<option discountCode="'+l.discountCode+'" discountType="'+l.discountType+'" value="'+l.discountValue+'">USD '+l.discountValue+" Discount</option>")})),e}function copyEnrollmentLink(t,e){if($("#discountForEnrollmentPartner").val()>0){var l=$("#"+t).attr("value"),a="payload=";if(l.split(a).length>1){var s=l.split(a)[0],o=l.split(a)[1],n=JSON.parse(decode(o));n.discountType=$("#discountMsgTag").attr("data-discount-type"),n.discountValue=$("#discountMsgTag").attr("data-discount-value"),n.discountCode=$("#discountMsgTag").attr("data-discount-code");var i=s+a+window.btoa(JSON.stringify(n));$("#"+t).attr("value",i)}}return copyURL(t,e,"Copied!")}