function addSemesterMarks(e,t,r,a,s,n,o,i){hideMessage("");var d="userId="+t+"&studentId="+r+"&semesterType="+a+"&standardId="+s+"&studentStandardId="+n+"&studentSessionId="+o+"&providerId="+i;$.ajax({type:"GET",url:getURLForHTML("dashboard","get-semester-marks"),data:d,dataType:"html",cache:!1,timeout:6e5,success:function(e){if(""!=e){var t;return"FAILED"==(t=e.split("|"))[0]||"EXCEPTION"==t[0]||"SESSIONOUT"==t[0]?"SESSIONOUT"==t[0]?redirectLoginPage():showMessage(!0,t[1]):$("#semesterMarksUploadContents").html(e),!1}},error:function(e){return!1}})}function requestForSaveSemesterData(e,t,r,a){var s={},n={};n.submitType=t,n.schoolId=SCHOOL_ID,n.userId=$("#"+e+" #userId").val(),n.studentId=$("#"+e+" #studentId").val(),n.standardId=$("#"+e+" #standardId").val(),n.studentStandardId=$("#"+e+" #studentStandardId").val(),n.studentSessionId=$("#"+e+" #studentSessionId").val(),n.courseProviderId=$("#"+e+" #courseProviderId").val(),n.studentName=$("#"+e+" #studentName").val(),n.guardianName=$("#"+e+" #parentName").val(),n.dateOfBirth=$("#"+e+" #birthDate").val(),n.gender=$("#"+e+" #gender").val(),n.parentGender=$("#"+e+" #parentGender").val(),n.nationality=$("#"+e+" #nationality").val(),n.programStatus=$("#"+e+" #programStatus").val(),n.semSubjectStatus=a,""!=$("#"+e+" #progressionGrade").val()?n.progressionGrade=$("#"+e+" #progressionGrade").val():n.progressionGrade=parseInt($("#"+e+" #standardId").val())+1;var o=[],i={};null!=editor1&&(n.marksRemarks=escapeCharacters(editor1.getData())),n.semesterGraduateDateT=$("#"+e+" #semesterBGraduateDate").val(),n.semesterIssueDateT=$("#"+e+" #semesterBIssueDate").val(),i.semester="Semester A",null!=$("#currentSemesterMarks").attr("session_id")?i.sessionId=$("#currentSemesterMarks").attr("session_id"):i.sessionId=$("#"+e+" #studentSessionId").val();var d=[];return $("#currentSemesterMarks tbody tr").each((function(){var e={};e.courseType=$(this).find(".courseType").val(),e.marksId=$(this).find(".marksId").val(),e.subjectId=$(this).find(".subjectId").val();$(this).find(".percentageObtained").val();e.percentageObtained=$(this).find(".percentageObtained").val(),e.courseProgress=$(this).find(".courseProgress").val(),e.gradeObtained=$(this).find(".gradeCalculated").val(),e.gradeCalculated=$(this).find(".gradeCalculated").text(),e.credits=$(this).find(".credit").text(),console.log("currentSemesterMarks=> ",$(this).find(".credit").text()),e.status=$(this).find(".status").val(),e.gpaCalculated=$(this).find(".gpaCalculated").text(),d.push(e)})),i.semesterMarks=d,o.push(i),n.cumulativeGpa=$("#"+e+" #cumulativeGrade").html(),n.marks=o,s.marksRepresentDTO=n,s.sessionUserId=USER_ID,s}function saveSemesterMarks(e,t,r,a,s){$("#transcriptErrMsg").text("");var n="self",o=$("#"+e+" #courseProviderId").val();if("false"==r){if(n="all",""==$("#"+e+" #semesterBIssueDate").val()||null==$("#"+e+" #semesterBGraduateDate").val())return $("#transcriptErrMsg").text("Date of Issuance is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if($("#marksRemarks").val().length>200)return $("#transcriptErrMsg").text("Remarks can not more than 200 characters."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #programStatus").val()||null==$("#"+e+" #programStatus").val())return $("#transcriptErrMsg").text("Please choose program status."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(3!=$("#"+e+" #standardId").val()&&9!=$("#"+e+" #standardId").val()&&10!=$("#"+e+" #standardId").val()&&!$("#"+e+" #standardId").val()>=19&&(""==$("#"+e+" #progressionGrade").val()||null==$("#"+e+" #progressionGrade").val()))return $("#transcriptErrMsg").text("Grade for Progression is mandatory"),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #studentName").val()||null==$("#"+e+" #studentName").val())return $("#transcriptErrMsg").text("Student Name is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #parentName").val()||null==$("#"+e+" #parentName").val())return $("#transcriptErrMsg").text("Parent Name is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #gender").val()||null==$("#"+e+" #gender").val())return $("#transcriptErrMsg").text("gender is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #nationality").val()||null==$("#"+e+" #nationality").val())return $("#transcriptErrMsg").text("Nationality is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #birthDate").val()||null==$("#"+e+" #birthDate").val())return $("#transcriptErrMsg").text("Date of Birth is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(""==$("#"+e+" #parentGender").val()||null==$("#"+e+" #parentGender").val())return $("#transcriptErrMsg").text("Parent gender is mandatory."),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),!1;if(getCumulativeGrade(),validationFlag=validateSemesterMarks("currentSemesterMarks",t,n,o,s),!validationFlag)return!1}$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","save-semester-marks"),data:JSON.stringify(requestForSaveSemesterData(e,t,o,r)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?"2"==e.status?redirectLoginPage():($("#transcriptErrMsg").text(e.message),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800)):($("#transcriptErrMsg").text(e.message),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800),setTimeout((function(){hideMessage("")}),3100)),!1},error:function(e){return!1}})}function validateSemesterMarks(e,t,r,a,s){console.log("validateSemesterMarks :: "+e);var n=1,o=!0;return $("#"+e+" tbody tr").each((function(){$(this).removeClass("tr-red");var r=$(this).find(".status").val(),i=$(this).find(".credit").html();if("Incomplete"==r&&1,(""!=$(this).find(".percentageObtained").val()||"Incomplete"==r)&&1,"Completed"==r||"Repeated"==r||"Incomplete"==r){0;var d=calculateSemesterPassingRule(e,n,!0,!0,t,!1,a,i,s);console.log("ruleStatus :: "+d),d&&1,d||o&&(o=!1)}n++})),o}function calculateSemesterPassingRule(e,t,r,a,s,n,o,i,d){var l=$("#studentSemesterMarksForm #standardId").val();console.log("needToCalCumuGrade=>",n),$("#transcriptErrMsg").text(""),console.log("calculateSemesterPassingRule position: "+t),$("#"+e+" #tr-"+t).removeClass("tr-red");var c=$("#"+e+" #courseType-"+t).val(),m=($("#"+e+" #marksId-"+t).val(),$("#"+e+" #subjectId-"+t).val(),$("#"+e+" #percentageObtained-"+t).val()),u=$("#"+e+" #courseProgress-"+t).val(),p=$("#"+e+" #percentageObtained-"+t).attr("data-duration"),g=($("#"+e+" #gradeCalculated-"+t).html(),i=i,$("#"+e+" #status-"+t+" option:selected").val()),v=!0,f=!0;return console.log("credit=> ",i),console.log("duration=> ",p),l>3&&l<11&&(m>=50&m<59.5?$("#"+e+" #tr-"+t).addClass("tr-yellow1"):$("#"+e+" #tr-"+t).removeClass("tr-yellow1")),("Withdrawn"==g||"Incomplete"==g||""==m&&2==s)&&(v=!1),v&&(""==m?(f=!1,a&&($("#transcriptErrMsg").text("Percentage scored cannot be blank"),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800))):parseFloat(m)<0?(f=!1,a&&($("#transcriptErrMsg").text("Percentage scored cannot be less than 0"),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800))):parseFloat(m)>110&&(f=!1,a&&($("#transcriptErrMsg").text("Percentage scored cannot be more than 100"),$("body,html").animate({scrollTop:$("#transcriptErrMsg").offset().top-70},800)))),"Incomplete"!=g&&getSemesterGrade(e,c,m,t,o,p,i,g,u,d),u<100?($("#"+e+" #status-"+t).val("Incomplete"),$("#"+e+" #credit-"+t).html("0.0"),$("#"+e+" #gpaCalculated-"+t).html("0.0"),$("#"+e+" #gradeCalculated-"+t).html("I")):($("#"+e+" #status-"+t).val("Completed"),g="Completed",$("#"+e+" #courseProgress-"+t).prop("disabled")||(i=$("#"+e+" #subjectCredit-"+t).html()),$("#"+e+" #credit-"+t).html(i),getSemesterGrade(e,c,m,t,o,p,i,g,u,d)),n&&getCumulativeGrade(),f||r&&$("#"+e+" #tr-"+t).addClass("tr-red"),f}function getRemarks(){customLoader(!0);var e=parseFloat($("#cumulativeGrade").html()).toFixed(2),t=$("#studentSemesterMarksForm #standardId").val(),r=$("#studentSemesterMarksForm #progressionGrade").val(),a=(editor1.getData(),$("#studentSemesterMarksForm #progressionGrade option:selected").text().replace("GRADE","Grade")),s=!0,n=!1;if($("#currentSemesterMarks tbody tr").each((function(){var e=$(this).find(".gradeCalculated").html();"F"!=e&&"I"!=e&&"W"!=e||(n=!0,s=!1)})),7==t)$("#studentSemesterMarksForm #progressionGrade").val(t),a=$("#studentSemesterMarksForm #progressionGrade option:selected").text().replace("GRADE","Grade"),n?e<1.05?(editor1.setData("Credit Requirement - Incomplete <br/><br/> Needs to Repeat "+a),editor1.execute("alignment",{value:"center"})):e<=2.05?(editor1.setData("Academic Performance - Needs Improvement <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=2.55?(editor1.setData("Academic Performance - Satisfactory <br/><br/>  Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=3.05?(editor1.setData("Academic Performance - Good <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=3.55?(editor1.setData("Academic Performance - Very Good <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=3.99?(editor1.setData("Academic Performance - Excellent <br/><br/>  Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):(editor1.setData("Academic Performance - Outstanding <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<1.05?(editor1.setData("Credit Requirement - Incomplete <br/><br/> Needs to Repeat "+a),editor1.execute("alignment",{value:"center"})):e<=2.05?(editor1.setData("Academic Performance - Needs Improvement <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):e<=2.55?(editor1.setData("Academic Performance - Satisfactory <br/><br/>  Credit Requirement - Complete "),editor1.execute("alignment",{value:"center"})):e<=3.05?(editor1.setData("Academic Performance - Good <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):e<=3.55?(editor1.setData("Academic Performance - Very Good <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):e<=3.99?(editor1.setData("Academic Performance - Excellent <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):(editor1.setData("Academic Performance - Outstanding <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"}));else if(t<7||t>=11&&t<=17)if(e<1.05){if($("#studentSemesterMarksForm #progressionGrade").val(r-1),r==t)$("#studentSemesterMarksForm #progressionGrade").val(t),a=(o=$("#studentSemesterMarksForm #progressionGrade option:selected").text().split(" "))[0].replace("GRADE","Grade")+" "+ ++o[1],editor1.setData("Not Eligible for "+a);else editor1.setData("Not Eligible for "+a);editor1.execute("alignment",{value:"center"}),$("#studentSemesterMarksForm #progressionGrade").val(t)}else{var o;if(s)t==r&&(16==t?$("#studentSemesterMarksForm #progressionGrade").val(1):$("#studentSemesterMarksForm #progressionGrade").val(++r),a=$("#studentSemesterMarksForm #progressionGrade option:selected").text().replace("GRADE","Grade"));else if(t!=r)$("#studentSemesterMarksForm #progressionGrade").val(t),a=(o=$("#studentSemesterMarksForm #progressionGrade option:selected").text().split(" "))[0].replace("GRADE","Grade")+" "+ ++o[1];else a=(o=$("#studentSemesterMarksForm #progressionGrade option:selected").text().split(" "))[0].replace("GRADE","Grade")+" "+ ++o[1];n?e<=2.05?(editor1.setData("Academic Performance - Needs Improvement <br/> <br/> Credit Requirement - Incomplete <br/><br/> Not Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=2.55?(editor1.setData("Academic Performance - Satisfactory <br/><br/>  Credit Requirement - Incomplete <br/> <br/> Not Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=3.05?(editor1.setData("Academic Performance - Good <br/> <br/> Credit Requirement - Incomplete <br/> <br/> Not Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=3.55?(editor1.setData("Academic Performance - Very Good <br/> <br/> Credit Requirement - Incomplete <br/><br/>  Not Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=3.99?(editor1.setData("Academic Performance - Excellent <br/><br/>  Credit Requirement - Incomplete <br/> <br/> Not Eligible for "+a),editor1.execute("alignment",{value:"center"})):(editor1.setData("Academic Performance - Outstanding <br/> <br/> Credit Requirement - Incomplete <br/><br/>  Not Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=2.05?(editor1.setData("Academic Performance - Needs Improvement <br/><br/>  Credit Requirement - Complete <br/> <br/> Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=2.55?(editor1.setData("Academic Performance - Satisfactory <br/><br/>  Credit Requirement - Complete <br/><br/>  Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=3.05?(editor1.setData("Academic Performance - Good <br/><br/>  Credit Requirement - Complete <br/><br/> Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=3.55?(editor1.setData("Academic Performance - Very Good <br/><br/>  Credit Requirement - Complete <br/><br/>  Eligible for "+a),editor1.execute("alignment",{value:"center"})):e<=3.99?(editor1.setData("Academic Performance - Excellent <br/><br/>  Credit Requirement - Complete <br/><br/>  Eligible for "+a),editor1.execute("alignment",{value:"center"})):(editor1.setData("Academic Performance - Outstanding <br/><br/>  Credit Requirement - Complete <br/><br/>  Eligible for "+a),editor1.execute("alignment",{value:"center"}))}else 19!=t&&9!=t&&10!=t&&20!=t&&21!=t||($("#studentSemesterMarksForm #progressionGrade").val(""),n?e<1.05?(editor1.setData("Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=2.05?(editor1.setData("Academic Performance - Needs Improvement <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=2.55?(editor1.setData("Academic Performance - Satisfactory <br/><br/>  Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=3.05?(editor1.setData("Academic Performance - Good <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=3.55?(editor1.setData("Academic Performance - Very Good <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=3.99?(editor1.setData("Academic Performance - Excellent <br/><br/>  Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):(editor1.setData("Academic Performance - Outstanding <br/> <br/> Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<1.05?(editor1.setData("Credit Requirement - Incomplete"),editor1.execute("alignment",{value:"center"})):e<=2.05?(editor1.setData("Academic Performance - Needs Improvement <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):e<=2.55?(editor1.setData("Academic Performance - Satisfactory <br/><br/>  Credit Requirement - Complete "),editor1.execute("alignment",{value:"center"})):e<=3.05?(editor1.setData("Academic Performance - Good <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):e<=3.55?(editor1.setData("Academic Performance - Very Good <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):e<=3.99?(editor1.setData("Academic Performance - Excellent <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})):(editor1.setData("Academic Performance - Outstanding <br/><br/>  Credit Requirement - Complete"),editor1.execute("alignment",{value:"center"})));customLoader(!1)}function getSemesterGrade(e,t,r,a,s,n,o,i,d,l){console.log("getSemesterGrade=> ",s),console.log("getSemesterGrade duration=> ",n);var c="0.00",m="F";return"Incomplete"==i?m="I":"-"==i?m="F":(console.log("getSemesterGrade: courseType: "+t+" percentage: "+r+" position: "+a),2==l&&(r=Math.round(r),console.log("Round off percentge :: ",r)),"FT"==t||"CR"==t||"CTE"==t?r>100||r>=95.1?(m="A+",c=4*o):r>=92.1?(m="A",c=4*o):r>=88.1?(m="A-",c=3.7*o):r>=85.1?(m="B+",c=3.3*o):r>=82.1?(m="B",c=3*o):r>=78.1?(m="B-",c=2.7*o):r>=75.1?(m="C+",c=2.3*o):r>=72.1?(m="C",c=2*o):r>=68.1?(m="C-",c=1.7*o):r>=65.1?(m="D+",c=1.3*o):r>=62.1?(m="D",c=1*o):r>=59.1?(m="D-",c=.7*o):(m="F",c="0.00"):"AP"==t?r>100||r>=95.1?(m="A+",c=5*o):r>=92.1?(m="A",c=5*o):r>=88.1?(m="A-",c=4.7*o):r>=85.1?(m="B+",c=4.3*o):r>=82.1?(m="B",c=4*o):r>=78.1?(m="B-",c=3.7*o):r>=75.1?(m="C+",c=3.3*o):r>=72.1?(m="C",c=3*o):r>=68.1?(m="C-",c=2.7*o):r>=65.1?(m="D+",c=2.3*o):r>=62.1?(m="D",c=2*o):r>=59.1?(m="D-",c=1.7*o):(m="F",c=1*o):"HON"!=t&&"ADV"!=t||(r>100||r>=95.1?(m="A+",c=4.5*o):r>=92.1?(m="A",c=4.5*o):r>=88.1?(m="A-",c=4.2*o):r>=85.1?(m="B+",c=3.8*o):r>=82.1?(m="B",c=3.5*o):r>=78.1?(m="B-",c=3.2*o):r>=75.1?(m="C+",c=2.8*o):r>=72.1?(m="C",c=2.5*o):r>=68.1?(m="C-",c=2.2*o):r>=65.1?(m="D+",c=1.8*o):r>=62.1?(m="D",c=1.5*o):r>=59.1?(m="D-",c=1.2*o):(m="F",c=.5*o))),$("#"+e+" #gradeCalculated-"+a).html(m),$("#"+e+" #gpaCalculated-"+a).html(parseFloat(c).toFixed(2)),"F"==m?$("#"+e+" #credit-"+a).html("0.0"):2!=s&&31!=s&&36!=s&&37!=s&&38!=s||$("#"+e+" #credit-"+a).html(o),m}function getCumulativeGrade(){var e=0,t=0,r=$("#studentSemesterMarksForm #standardId").val(),a=0,s=0,n=$("#cgpaSubjectCreditStaus").val(),o=!0;if("Apply"==n?$("#currentSemesterMarks tbody tr").each((function(){s=$(this).find(".subjectId").val(),("Completed"==$(this).find(".status").val()||"Incomplete"==$(this).find(".status").val()||"Repeated"==$(this).find(".status").val())&&(e=parseFloat(parseFloat(e)+parseFloat($(this).find(".gpaCalculated").text().trim())),console.log("currentSemesterMarks cumulativeGpa "+e+" = "+$(this).find(".gpaCalculated").text().trim()),a=parseFloat(parseFloat(a)+parseFloat($(this).find(".subjectCredit").text().trim()))),"show"==$("#studentSemesterMarksForm #showPrevMarks").val()&&o&&($("#prevSemesterMarks tbody tr").each((function(){var t=$(this).find(".subjectId").val();t!=s&&(e=parseFloat(parseFloat(e)+parseFloat($(this).find(".gpaCalculated").text().trim())),console.log("currentSemesterMarks cumulativeGpa "+e+" = "+$(this).find(".gpaCalculated").text().trim()),"-"!=$(this).find(".credit").text().trim()&&(a=parseFloat(parseFloat(a)+parseFloat($(this).find(".credit").text().trim())))),t=0})),o=!1),s=0})):$("#currentSemesterMarks tbody tr").each((function(){s=$(this).find(".subjectId").val(),("Completed"==$(this).find(".status").val()||"Incomplete"==$(this).find(".status").val()||"Repeated"==$(this).find(".status").val())&&(e=parseFloat(parseFloat(e)+parseFloat($(this).find(".gpaCalculated").text().trim())),console.log("currentSemesterMarks cumulativeGpa "+e+" = "+$(this).find(".gpaCalculated").text().trim()),a=parseFloat(parseFloat(a)+parseFloat($(this).find(".credit").text().trim()))),"show"==$("#studentSemesterMarksForm #showPrevMarks").val()&&$("#prevSemesterMarks tbody tr").each((function(){var t=$(this).find(".subjectId").val();t!=s&&(e=parseFloat(parseFloat(e)+parseFloat($(this).find(".gpaCalculated").text().trim())),console.log("currentSemesterMarks cumulativeGpa "+e+" = "+$(this).find(".gpaCalculated").text().trim()),a=parseFloat(parseFloat(a)+parseFloat($(this).find(".credit").text().trim()))),t=0})),s=0})),0==e&&0==a)$("#cumulativeGrade").html("0.00");else{var i=Math.round(parseFloat(e/a)*Math.pow(10,3))/Math.pow(10,3);console.log("final noOfCourse "+a+", cumulativeGpa "+e+", cumulativeGrade "+i),i=Math.round(parseFloat(i)*Math.pow(10,2))/Math.pow(10,2),$("#cumulativeGrade").html(parseFloat(i).toFixed(2))}if((16==r||3==r||7==r)&&0!=e){var d=parseFloat(e/a).toFixed(2);t=$("#studentSemesterMarksForm #cumulativeGpaForPreGrade").val();var l=parseFloat(t)+parseFloat(d);console.log("avg Cgpa",l),16==r?$("#avgCumulativeGrade").html(parseFloat(l/5).toFixed(2)):3==r?$("#avgCumulativeGrade").html(parseFloat(l/3).toFixed(2)):7==r&&$("#avgCumulativeGrade").html(parseFloat(l/4).toFixed(2))}}function publishSemesterMarks(e,t,r){$("#publishSemestermarks").attr("disabled","disabled");var a={};a.studentId=e,a.standardId=t,a.studentStandardId=r,a.showTranscriptToStudent=showTranscriptToStudent,a.userId=USER_ID,$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","publish-student-semester-transcript"),data:JSON.stringify(a),dataType:"html",cache:!1,timeout:6e5,success:function(e){alert("Student Transcript has been published on student dashboard"),$("#publishSemestermarks").hide()},error:function(e){return $("#sendSWPR").removeAttr("disabled","disabled"),!1}})}function checkStatus(e,t,r,a){console.log("checkStatus=> ",r);var s=parseFloat(a).toFixed(1);console.log("nmsacmcbmdnc dcnmdc",s),"Incomplete"==$("#"+e+" #status-"+t).val()?($("#"+e+" #tr-"+t).removeClass("tr-red"),$("#"+e+" #percentageObtained-"+t).val(""),$("#"+e+" #percentageObtained-"+t).prop("disabled",!0),$("#"+e+" #gradeCalculated-"+t).html("I"),$("#"+e+" #credit-"+t).html("0.00"),$("#"+e+" #gpaCalculated-"+t).html("0.00")):"Withdrawn"==$("#"+e+" #status-"+t).val()?($("#"+e+" #tr-"+t).removeClass("tr-red"),$("#"+e+" #percentageObtained-"+t).val(""),$("#"+e+" #percentageObtained-"+t).prop("disabled",!0),$("#"+e+" #gradeCalculated-"+t).html("W"),$("#"+e+" #credit-"+t).html("-"),$("#"+e+" #gpaCalculated-"+t).html("0.00")):"Repeated"==$("#"+e+" #status-"+t).val()?($("#"+e+" #percentageObtained-"+t).prop("disabled",!1),$("#"+e+" #credit-"+t).html(s)):($("#"+e+" #percentageObtained-"+t).prop("disabled",!1),.5==s?$("#"+e+" #credit-"+t).html(parseFloat(s)):$("#"+e+" #credit-"+t).html(parseFloat(s)+".0")),getCumulativeGrade()}function checkObtainedGrade(e,t){""!=$("#"+e+" #gradeObtained-"+t).val()&&$("#"+e+" #tr-"+t).removeClass("tr-red")}function submitPreSemesterMark(e,t){if(hideMessage(""),!validateRequestForPreSemesterMark(e,t))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","pre-grade-submit"),data:JSON.stringify(getRequestForPreSemesterMark(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(t){return"0"==t.status||"2"==t.status?showMessageTheme2(0,t.message,"",!1):(showMessageTheme2(1,t.message,"",!1),$("#"+e)[0].reset(),location.reload()),!1},error:function(e){return!1}})}function getRequestForPreSemesterMark(e,t){var r={},a={},s={};return s.schoolId=$("#"+e+" #schoolId").val(),s.studentStandardId=$("#"+e+" #studentStandardId").val(),s.studentId=$("#"+e+" #studentId").val(),s.standardId=$("#"+e+" #standardId").val(),s.gradeCalculated=$("#"+e+" #gradeCalculated").val(),s.gpaCalculated=$("#"+e+" #gpaCalculated").val(),s.preMarksId=$("#"+e+" #marksPreGradeId").val(),r.marksRepresentDTO=s,a.hash=getHash(),a.schoolId=SCHOOL_ID,a.schoolUUID=SCHOOL_UUID,a.userType=t,a.userId=$("#"+e+" #userId").val(),r.authentication=a,r}function validateRequestForPreSemesterMark(e){var t=$("#"+e+" #standardId").val(),r=$("#"+e+" #gradeCalculated").val(),a=$("#"+e+" #gpaCalculated").val();return""==t?(showMessageTheme2(0,"Please select grade","",!1),!1):""==r?(showMessageTheme2(0,"Please select grade Calculated","",!1),!1):""!=a||(showMessageTheme2(0,"Please enter gpa","",!1),!1)}function removePreGrade(e){if(hideMessage(""),""==e)return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","remove-pre-grade-marks"),data:JSON.stringify(getRequestForRemovePreGrade(e)),dataType:"json",cache:!1,success:function(e){return"0"==e.status||"2"==e.status?showMessageTheme2(0,e.message,"",!1):(showMessageTheme2(1,e.message,"",!1),location.reload()),!1},error:function(e){}})}function getRequestForRemovePreGrade(e){var t={},r={},a={},s={};return s.preMarksId=e,a.marksRepresentDTO=s,r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType=moduleId,r.userId=$("#userId").val(),t.authentication=r,t.requestData=a,t}function callForBackStageTranscript(e){if(null==e||null==e||""==e)return!1;var t={};t.studentStandardId=e,t.UNIQUEUUID=UNIQUEUUID,$.ajax({type:"POST",url:getURLForHTML("dashboard","go-backstage-transcript"),data:JSON.stringify(t),contentType:"application/json",dataType:"html",success:function(e){if(""!=e){var t=JSON.parse(e);return"FAILED"==t.statusResponse.status||"EXCEPTION"==t.statusResponse.status||"SESSIONOUT"==t.statusResponse.status?"SESSIONOUT"==t.statusResponse.status?redirectLoginPage():setTimeout((function(){$("#backStageTranscriptMessageDiv").show(),$("#backStageTranscriptMessage").html(t.statusResponse.message)}),3e3):"SUCCESS"==t.statusResponse.status&&setTimeout((function(){$("#backStageTranscriptMessageDiv").show(),$("#backStageTranscriptMessage").html(t.statusResponse.message)}),3e3),!1}},error:function(e){console.log(!0,e.responseText)}})}