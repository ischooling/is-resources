function getUserLeaveData(e,a){null!=a&&null!=a||(a=""),$.ajax({type:"GET",contentType:"application/json",url:getURLForHTML("dashboard","get-user-leave-list?teacherId="+e+"&userId="+a),data:"",dataType:"json",async:!1,success:function(e){if("0"!=e.status&&"2"!=e.status&&"3"!=e.status)return $("#teacherLeaveTable tbody").html(""),bindLeaveData(e.userLeaveDTO),e;"3"==e.status?redirectLoginPage():"theme1"==tt?showMessage(!1,e.message):showMessageTheme2(0,e.message,"",!0)}})}function saveLeaveForm(e){if(validateRequestForSaveLeave())return!1;$.ajax({type:"POST",url:getURLForHTML("dashboard","leave-form-save"),data:JSON.stringify(setUserLeaveData(e)),dataType:"json",contentType:"application/json",async:!1,success:function(a){"0"==a.status||"2"==a.status||"3"==a.status?"3"==a.status?redirectLoginPage():"theme1"==tt?showMessage(!1,a.message):showMessageTheme2(0,a.message,"",!0):("theme1"==tt?showMessage(!1,a.message):showMessageTheme2(1,a.message,"",!0),$("#leaveFromModal").modal("hide"),$("#teacherid").val(),getUserLeaveData(e,e))}})}function validateRequestForSaveLeave(){if(""==$("#leaveReason").val()||null==$("#leaveReason").val()||"undefined"==$("#leaveReason").val())return showMessageTheme2(0,"Reason is required"),!1}function setUserLeaveData(e){return data={},data.userId=e,data.userRole=USER_ROLE,data.schoolId=SCHOOL_ID,data.leaveDate=$("#leaveDates").val(),data.reason=$("#leaveReason").val(),data.createdBy=e,data.updatedBy=e,data.dataType="LEAVE",data.control=$("#control").val(),data.actionId=$("#leaveid").val(),data}const compareDates=(e,a)=>{let t=new Date(e).getTime(),s=new Date(a).getTime();return t==s||!(t>s)};function showModel(e,a,t,s,o,d,r){if(console.log("clicked"),$("#leaveFromModal").remove(),"TEACHER"==USER_ROLE?($("body").append(modelForSaveAndUpdateLeave(USER_ID,t,USER_ROLE)),$("#leaveStartTime, #leaveEndTime").select2({theme:"bootstrap4",dropdownParent:"#leaveFromModal"})):$("body").append(modelForUpdateLeaveStatus(USER_ID,t,USER_ROLE)),$("#leaveFromModal").modal("show"),$("#teacherName").val(e),$("#control").val(a),$("#leaveDates").val(s),$("#leaveReason").val(o),$("#leaveDates").datepicker("destroy").datepicker({startDate:new Date,multidate:!0,format:"M dd, yyyy",container:"#leaveFromModal .modal-body"}),"TEACHER"==USER_ROLE||"update"==a){var l=$("#leaveDates").val();l=l.match(/[^,]+,[^,]+/g);var n=[];l.forEach((e=>{n.push(new Date(e))})),$("#leaveDates").datepicker("destroy").datepicker({startDate:new Date,multidate:!0,format:"M dd, yyyy",container:"#leaveFromModal .modal-body"}),$("#leaveDates").datepicker("setDates",n)}else $("#leaveStatus").val(d.toLowerCase()),$("#leaveRemark").val(r)}function updateLeaveStatus(e,a){$.ajax({type:"POST",url:getURLForHTML("dashboard","leave-form-update-status"),data:JSON.stringify(setLeaveStatusData(e,a)),dataType:"json",contentType:"application/json",async:!1,success:function(a){"0"==a.status||"2"==a.status||"3"==a.status?"3"==a.status?redirectLoginPage():"theme1"==tt?showMessage(!1,a.message):showMessageTheme2(0,a.message,"",!0):("theme1"==tt?showMessage(!1,a.message):showMessageTheme2(1,a.message,"",!0),$("#leaveFromModal").modal("hide"),$("#teacherid").val(),getUserLeaveData(e))}})}function setLeaveStatusData(e,a){return data={},data.remark=$("#leaveRemark").val(),data.status=$("#leaveStatus").val(),data.actionId=a,data.userId=e,data}