function callForDashboardAddCounselor(e,a){if(hideMessage(""),!validateRequestForAddCounselor(e,a))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","save-counseler-content"),data:JSON.stringify(getRequestForAddCounselor(e,a)),dataType:"html",cache:!1,timeout:6e5,success:function(e){if(""!=e){var a;return"FAILED"==(a=e.split("|"))[0]||"EXCEPTION"==a[0]||"SESSIONOUT"==a[0]?"SESSIONOUT"==a[0]?redirectLoginPage():showMessage(!0,a[1]):(showMessage(!0,a[1]),$("#counselId").val(""),$("#firstName").val(""),$("#middleName").val(""),$("#lastName").val(""),$("#dob").val(""),$("#gender").val(0),$("#address").val(""),$("#countryId").val(0),$("#stateId").val(0),$("#cityId").val(0),$("#pincode").val(""),$("#email").val(""),$("#altEmailId").val(""),$("#isdCode").val(""),$("#phoneNo").val(""),$("#altIsdCode").val(""),$("#altPhoneNo").val("")),!1}},error:function(e){return showMessage(!0,e.responseText),$("#saveCounselor").prop("disabled",!1),!1}})}function getRequestForAddCounselor(e,a){var s={};s.id=$("#"+e+" #counselerId").val(),s.firstName=$("#"+e+" #firstName").val(),s.middleName=$("#"+e+" #middleName").val(),s.lastName=$("#"+e+" #lastName").val(),s.dob=$("#"+e+" #dob").val(),s.gender=$("#"+e+" #gender").val(),s.address=escapeCharacters($("#"+e+" #address").val()),s.countryId=$("#"+e+" #countryId").val(),s.stateId=$("#"+e+" #stateId").val(),s.cityId=$("#"+e+" #cityId").val(),s.pincode=$("#"+e+" #pincode").val(),s.emailId=$("#"+e+" #email").val(),s.altEmailId=$("#"+e+" #altEmailId").val(),s.isdCode=$("#"+e+" #isdCode").val(),s.phoneNo=$("#"+e+" #phoneNo").val(),s.altIsdCode=$("#"+e+" #altIsdCode").val(),s.altPhoneNo=$("#"+e+" #altPhoneNo").val(),s.status=$("#"+e+" #selectStatus ").val();var t={};return t.request=s,t}function validateRequestForAddCounselor(e,a){return""==$("#"+e+" #firstName").val()?(showMessage(!0,"First Name is required"),!1):""==$("#"+e+" #lastName").val()?(showMessage(!0,"Last name is required"),!1):""==$("#"+e+" #gender").val()?(showMessage(!0,"Gender is required"),!1):""==$("#"+e+" #email").val()?(showMessage(!0,"Email is either empty or invalid"),!1):""==$("#"+e+" #email").val()||validateEmail($("#email").val())?""==$("#altEmailId").val()||validateEmail($("#altEmailId").val())?""==$("#"+e+" #countryId").val()||0==$("#"+e+" #countryId").val()?(showMessage(!0,"Country is required"),!1):""==$("#"+e+" #stateId").val()||0==$("#"+e+" #stateId").val()?(showMessage(!0,"State is required"),!1):""==$("#"+e+" #cityId").val()||0==$("#"+e+" #cityId").val()?(showMessage(!0,"City is required"),!1):""==$("#"+e+" #isdCode").val()||0==$("#"+e+" #isdCode").val()?(showMessage(!0,"ISD Code is required"),!1):""==$("#"+e+" #phoneNo").val()?(showMessage(!0,"Phone No. is required"),!1):""==$("#"+e+" #altPhoneNo").val()||""!=$("#"+e+" #altIsdCode").val()&&0!=$("#"+e+" #altIsdCode").val()?""!=$("#"+e+" #selectStatus").val()||(showMessage(!0,"Please select Status"),!1):(showMessage(!0,"Alt ISD Code is required"),!1):(showMessage(!0,"Alternate Email is invalid"),!1):(showMessage(!0,"Email is either empty or invalid"),!1)}function callEmailCounselorCheck(e,a,s){if(hideMessage(""),!validateEmail($("#"+e+" #"+s).val()))return showMessage(!0,"Email is either empty or invalid"),!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("is-user-available"),data:JSON.stringify(getRequestForEmailCounselorCheck(e,a,s)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"!=e.status&&"2"!=e.status||showMessage(!0,"This email is already in use with International Schooling"),!1},error:function(e){console.log("ERROR : ",e)}})}function getRequestForEmailCounselorCheck(e,a,s){var t={},l={},o={requestKey:"EMAIL-AVAILABLE"};return o.email=$("#"+e+" #"+s).val(),l.hash=getHash(),l.schoolId=SCHOOL_ID,l.schoolUUID=SCHOOL_UUID,l.userType=a,t.authentication=l,t.data=o,t}function sendCodeToUser(e,a,s,t){if(hideMessage(""),!validateRequestForUserReferral(e,a))return!1;$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","send-referralcode-to-user"),data:JSON.stringify(getRequestForUserReferral(e,a,s)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return"0"==e.status||"2"==e.status?showMessage(!0,e.message):(showMessage(!0,e.message),$("#sendReferralModal").modal("hide"),setTimeout((function(){callDashboardPageSchool(t,"COUNS1b","","?roleModuleId="+t+"&requestFrom=counselor&userId=0")}),1e3)),!1},error:function(e){return!1}})}function validateRequestForUserReferral(e,a){var s=0;return $("input[name='emailId']").each((function(){validateEmail($(this).val())||(s+=1)})),!(s>0)||(showMessage(!0,"Email is either empty or invalid"),!1)}function getRequestForUserReferral(e,a,s){var t={},l={},o={},r="";return o.id=$("#"+e+" #referralSendId").val(),o.counselorId=$("#"+e+" #counselorId").val(),o.referralCode=$("#"+e+" #referralCode").val(),$("input[name='emailId']").each((function(){r=r+$(this).val()+","})),o.emailId=r,l.hash=getHash(),l.schoolId=SCHOOL_ID,l.schoolUUID=SCHOOL_UUID,l.userType=a,l.userId=$("#"+e+" #userId").val(),t.authentication=l,t.data=o,t}