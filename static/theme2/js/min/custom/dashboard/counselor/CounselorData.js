function callStudentListByCounselor(e){var t=!1;null!=$("#"+e+" #partnerName").val()&&""!=$("#"+e+" #partnerName").val()&&(t=!0),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","get-student-enrolled-counselor"),data:JSON.stringify(getRequestForCounselorEnrolledList(e)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if(console.log(e),"0"==e.status||"2"==e.status)showMessageTheme2(!1,e.message),$("#enroll-list-skeleton").show();else{$("#enroll-list-skeleton").hide();var a=B2CStudentListDetails(e.studentList,t);$("#enrolled-list").html(a),$(".follow-up-no").click((function(){$(this).find(".fa-angle-down").toggleClass("fa-angle-down fa-angle-up"),$(this).parent().siblings().find(".fa-angle-up").toggleClass("fa-angle-up fa-angle-down"),$(this).parent().find(".follow-up-content").slideDown(),$(this).parent().siblings().find(".follow-up-content").slideUp(),$(this).parent().addClass("follow-up-accordian-active"),$(this).parent().siblings().removeClass("follow-up-accordian-active")}));var n=B2CStudentListCommission(e.studentList);$(".studentCommitionList").html(n),$("#totalCommissionDate").text(e.currentDate)}},error:function(e){console.log(e)}})}function getRequestForCounselorEnrolledList(e){var t={},a={};if(null!=$("#"+e+" #partnerName").val()&&""!=$("#"+e+" #partnerName").val()?a.counselorId=$("#"+e+" #partnerName").val():""!=$("#"+e+" #referralCode").val()?a.counselorId=USER_ID:a.counselorId=0,a.userId=USER_ID,a.schoolId=SCHOOL_ID,a.referralCode=$("#"+e+" #referralCode").val(),a.academicYear=$("#"+e+" #academicYear option:selected").text(),a.enrollmentStatus=$("#"+e+" #enrollmentStatus").val(),a.gradeId=$("#"+e+" #gradeId").val(),a.studentName=$("#"+e+" #studentName").val(),a.email=$("#"+e+" #email").val(),a.countryId=$("#"+e+" #countryId").val(),a.stateId=$("#"+e+" #stateId").val(),a.cityId=$("#"+e+" #cityId").val(),a.commissionStatus=$("#"+e+" #commissionStatus").val(),a.learningProgram=$("#"+e+" #learningProgram").val(),null!=$("#"+e+" #paymentDateFrom").val()&&""!=$("#"+e+" #paymentDateFrom").val()){var n=$("#"+e+" #paymentDateFrom").val();a.paymentDateFrom=n}if(null!=$("#"+e+" #paymentDateTo").val()&&""!=$("#"+e+" #paymentDateTo").val()){var o=$("#"+e+" #paymentDateTo").val();a.paymentDateTo=o}return a.paymentStatus=$("#"+e+" #paymentStatus").val(),a.sortBy=$("#"+e+" #sortBy").val(),a.feeStatus=$("#"+e+" #feeStatus").val(),a.pageSize=$("#"+e+" #pageSize").val(),t.enrollmentListFilterDTO=a,t}function callCounselorCountries(e,t,a,n){return $("#"+e+" #"+a).html('<option value="">Select country</option>'),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster(e,"COUNTRIES-LIST",t)),dataType:"json",async:!1,success:function(t){if("0"==t.status||"2"==t.status)showMessage(1,t.message);else{var o=t.mastersData.countries;$.each(o,(function(t,o){$("#"+e+" #"+a).append('<option dailCode="'+o.extra1+'" dail-country-code="'+o.extra+'" value="'+o.key+'" '+(n==o.key?"selected":"")+">"+o.value+"</option>")}))}}}),!0}function getRequestForCounselorCommissionRate(e,t,a,n){""!=t&&null!=t||(t=USER_ID);var o={},r={};return r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType=USER_ROLE,r.userId=t,r.learningProgram=a,r.enrollmentFor=n,o.authentication=r,o}function getCounselorCommissionRate(e,t,a){return new Promise((function(t,n){$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/get-counselor-commission-rate",data:JSON.stringify(getRequestForPartnerCommissionRate(e,a)),dataType:"json",global:!0,success:function(e){if("0"==e.status||"2"==e.status||"3"==e.status)return"3"==e.status&&redirectLoginPage(),n();t(e),customLoader(!1)},error:function(e,t,a){checkonlineOfflineStatus()||(console.error("Error: "+a),n(a),customLoader(!1))}})}))}function getCounselorCommissionRateHtml(e){var t="";if(null!=e&&e.length>0)for(let n=0;n<e.length;n++){const o=e[n];var a=o.min_range+"+";o.max_range>0&&(a=o.min_range+"-"+o.max_range),t=t+'<tr class="td-border-design"><td style="border-width:1px;border-color:#eee">'+o.standardName+'</td><td style="border-width:1px;border-color:#eee">'+o.learningProgramValue+'</td><td style="border-width:1px;border-color:#eee">'+o.byPartnerValue+" "+o.byPartnerType+'</td><td style="border-width:1px;border-color:#eee">'+o.bySchoolValue+" "+o.bySchoolType+'</td><td style="border-width:1px;border-color:#eee" class="text-center">'+a+'</td><td style="border-width:1px;border-color:#eee">'+o.startDate+'</td><td style="border-width:1px;border-color:#eee">'+("Dec 31, 2999"==o.endDate?"N/A":o.endDate)+"</td></tr>"}return t}function callPartnerListBy(e,t){var a={};a.userId=USER_ID,$("#"+e+" #"+t).html('<option dail-referral-code="" value="">Select Partner</option>'),$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","get-partner-list"),data:JSON.stringify(a),dataType:"json",cache:!1,timeout:6e5,success:function(a){if(console.log(a),"0"==a.status||"2"==a.status);else{var n=a.partnerList;$.each(n,(function(a,n){$("#"+e+" #"+t).append('<option dail-referral-code="'+n.extra+'" value="'+n.key+'">'+n.value+"</option>")}))}},error:function(e){console.log(e)}})}function updateStudentCounselorCommissionRate(e,t,a,n,o){var r={},s=[];if(""==e)$(".commission_list").each((function(){var e=$(this).attr("id");if($("#checkCommission"+e).is(":checked")){var t=$(this).attr("data-commission"),a=$(this).attr("data-commission-rate"),n={};n.userId=USER_ID,n.studentStandardId=e,n.updateStatus=$("#commissionStatus"+e).val(),n.amount=t,n.commRate=a,s.push(n)}}));else{var l={};l.userId=USER_ID,l.studentStandardId=e,l.updateStatus=t,l.amount=a,l.commRate=n,s.push(l)}return r.dataList=s,r.totalAmount=""==a?$("#totalCommission").text():a.replace("$ ",""),r.referralCode=""==o?$("#referralCode").val():o,$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/save-transfer-payment",data:JSON.stringify(r),dataType:"json",async:!1,global:!1,success:function(e){console.log(e),"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message):(showMessageTheme2(1,e.message),$("#updateTransferCommission").modal("hide"),callStudentListByPartner("partnerEnrollFilterForm"))},error:function(e){checkonlineOfflineStatus()}}),!0}function resetEnrollmentForm(e){$("#"+e+" #academicYear").val("0").trigger("change"),$("#"+e+" #partnerName").val("").trigger("change"),$("#"+e+" #enrollmentStatus").val("").trigger("change"),$("#"+e+" #gradeId").val("").trigger("change"),$("#"+e+" #countryId").val("").trigger("change"),$("#"+e+" #stateId").val("").trigger("change"),$("#"+e+" #cityId").val("").trigger("change"),$("#"+e+" #commissionStatus").val("").trigger("change"),$("#"+e+" #learningProgram").val("").trigger("change"),$("#"+e+" #paymentStatus").val("").trigger("change"),$("#"+e+" #feeStatus").val("").trigger("change"),$("#"+e+" #sortBy").val("Desc").trigger("change"),$("#"+e+" #studentName").val(""),$("#"+e+" #email").val(""),$("#"+e+" #pageSize").val("25"),$("#"+e+" #paymentDateFrom").val("").datepicker("upadate"),$("#"+e+" #paymentDateTo").val("").datepicker("upadate")}function getCallTotalCommission(){var e=0;return $(".commission_list").each((function(){var t=$(this).attr("id");if($("#checkCommission"+t).is(":checked")){var a=$(this).attr("data-commission");$(this).attr("data-commission-rate");a=a.replace("$ ",""),e+=parseFloat(a)}})),e}function getRequestForCounselorDetails(e,t){""!=t&&null!=t||(t=USER_ID);var a={},n={};return n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=USER_ROLE,n.userId=t,a.authentication=n,a}function getCounselorDetails(e){var t={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/counselor-content",data:JSON.stringify(getRequestForCounselorDetails(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status&&redirectLoginPage():t=e},error:function(e){checkonlineOfflineStatus()}}),t}function getCounselorDashboardDetailsData(e){var t={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/counselor-learning-program-content",data:JSON.stringify(getRequestForCounselorDetails(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status&&redirectLoginPage():t=e},error:function(e){checkonlineOfflineStatus()}}),t}function getRequestForReferralCodeAndLink(e,t){""!=t&&null!=t||(t=USER_ID);var a={},n={};return n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=USER_ROLE,n.userId=t,a.authentication=n,a}function getReferralCodeAndLinksDetails(e){var t={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/referral-and-links",data:JSON.stringify(getRequestForReferralCodeAndLink(e)),dataType:"json",async:!1,success:function(e){t=e}}),t}function getRequestForCounselorStudentGrade(e,t){""!=t&&null!=t||(t=USER_ID);var a={},n={};return n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=USER_ROLE,n.userId=t,a.authentication=n,a}function getCounselorStudentGrade(e,t,a,n,o){return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/get-counselor-student-list-gradewise",data:JSON.stringify(getRequestForCounselorCommissionRate(e,a,n,o)),dataType:"json",async:!1,global:!1,success:function(e){if("0"==e.status||"2"==e.status||"3"==e.status)"3"==e.status&&redirectLoginPage();else{if("ONE_TO_ONE"==n&&"enrollment"==o){var a=getCounselorRegisterDataByGrade(e,"one_to_one");getCounselorEnrollmentChart(t,a.lable,a.series)}else if("ONE_TO_ONE_FLEX"==n&&"enrollment"==o){var r=getCounselorRegisterDataByGrade(e,"f_one_to_one");getCounselorEnrollmentChart(t,r.lable,r.series)}else if("BATCH"==n&&"enrollment"==o){var s=getCounselorRegisterDataByGrade(e,"group");getCounselorEnrollmentChart(t,s.lable,s.series)}else if("SCHOLARSHIP"==n&&"enrollment"==o){var l=getCounselorRegisterDataByGrade(e,"self");getCounselorEnrollmentChart(t,l.lable,l.series)}else if("SSP"==n&&"enrollment"==o){var i=getCounselorRegisterDataByGrade(e,"ssp");getCounselorEnrollmentChart(t,i.lable,i.series)}else if("SSP"==n&&"exact-path-enrollment"==o){var d=getCounselorRegisterDataByGrade(e,"elpss");getCounselorEnrollmentChart(t,d.lable,d.series)}if("ONE_TO_ONE"==n&&"exact-path-enrollment"==o){var c=getCounselorRegisterDataByGrade(e,"el_one_to_one");getCounselorEnrollmentChart(t,c.lable,c.series)}else if("BATCH"==n&&"exact-path-enrollment"==o){var u=getCounselorRegisterDataByGrade(e,"el_group");getCounselorEnrollmentChart(t,u.lable,u.series)}else if("SCHOLARSHIP"==n&&"exact-path-enrollment"==o){var g=getCounselorRegisterDataByGrade(e,"el_self");getCounselorEnrollmentChart(t,g.lable,g.series)}else if("DUAL_DIPLOMA"==n&&"enrollment"==o){var m=getCounselorRegisterDataByGrade(e,"dual");getCounselorEnrollmentChart(t,m.lable,m.series)}}},error:function(e){checkonlineOfflineStatus()}}),!0}function getCounselorEnrollmentChart(e,t,a){var n={series:a,labels:t,chart:{type:"donut",height:100,style:{fontSize:"10px",fontWeight:600,color:"#000"}},dataLabels:{enabled:!1},plotOptions:{pie:{donut:{size:"75%",labels:{show:!0,name:{},total:{show:!0}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},o=new ApexCharts(document.querySelector("#"+e),n);o.render(),o.update()}function getCounselorRegisterDataByGrade(e,t){var a=[],n=[],o=[],r=0,s="",l=0,i="",d=0,c="",u=0,g="",m=0,p="",h=0,y="",v=e.gradeWiseStudentList;if(v.length>0){for(let e=0;e<v.length;e++){const a=v[e];"dual"==t?4!=a.standard_id&&5!=a.standard_id&&6!=a.standard_id&&7!=a.standard_id||(r+=parseInt(a.totalStudent),s="Grade 9 - 12"):"el_one_to_one"==t||"el_self"==t?11==a.standard_id?(r+=parseInt(a.totalStudent),s="Basic | Beginner"):1==a.standard_id?(l+=parseInt(a.totalStudent),i="Middle | Intermediate"):4==a.standard_id&&(d+=parseInt(a.totalStudent),c="Pro | Advanced"):11==a.standard_id||12==a.standard_id||13==a.standard_id||14==a.standard_id||15==a.standard_id||16==a.standard_id?(r+=parseInt(a.totalStudent),s="Grade K - 5"):1==a.standard_id||2==a.standard_id||3==a.standard_id?(l+=parseInt(a.totalStudent),i="Grade 6 - 8"):4==a.standard_id||5==a.standard_id||6==a.standard_id||7==a.standard_id?(d+=parseInt(a.totalStudent),c="Grade 9 - 12"):9!=a.standard_id&&10!=a.standard_id&&19!=a.standard_id&&20!=a.standard_id&&21!=a.standard_id||(19==a.standard_id?(u+=parseInt(a.totalStudent),g="Grade K - 5"):9==a.standard_id?(m+=parseInt(a.totalStudent),p="Grade 6 - 8"):10!=a.standard_id&&20!=a.standard_id&&21!=a.standard_id||(h+=parseInt(a.totalStudent),y="Grade 9 - 12"))}return n="dual"==t?[r]:"f_one_to_one"==t?[u,m,h]:[r,l,d],o="dual"==t?[s]:"f_one_to_one"==t?[g,p,y]:[s,i,c],a.series=n,a.lable=o,a}}function applyDiscountMsgShow(e){if("0"==$("#"+e).val())$("#discountMsgTag").html(""),$("#discountMsgTag").hide(),$("#discountMsgTag").attr("data-discount-code",""),$("#discountMsgTag").attr("data-discount-value",""),$("#discountMsgTag").attr("data-discount-type","");else{var t="P"==$("#"+e+" option:selected").attr("discounttype")?"%":" USD";$("#discountMsgTag").html('<b class="full text-success">All enrollments links now have a '+$("#"+e).val()+t+" discount</b>"),$("#discountMsgTag").show(),$("#discountMsgTag").attr("data-discount-code",$("#"+e+" option:selected").attr("discountCode")),$("#discountMsgTag").attr("data-discount-value",$("#"+e).val()),$("#discountMsgTag").attr("data-discount-type",$("#"+e+" option:selected").attr("discounttype"))}}function callB2BDashboardLead(e,t){$.ajax({type:"POST",contentType:"application/json",url:getURLForHTML("dashboard","b2b-dashboard-lead"),data:JSON.stringify(getRequestForB2bDashboard(e,t)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message);else{var t=e.leadCountDetailDTO;""!=t.totalLeads&&$("#totalB2bLead").text(t.totalLeads),""!=t.totalConverted&&$("#convertB2bLead").text(t.totalConverted),""!=t.unattendedLead&&$("#unattendedB2bLead").text(t.unattendedLead),""!=t.followupLead1&&$("#positiveB2bLead").text(t.followupLead1)}},error:function(e){console.log(e)}})}function getRequestForB2bDashboard(e,t){var a={},n={};return n.schoolId=SCHOOL_ID,n.userId=USER_ID,n.moduleId=e,n.leadFrom="LEAD",n.clickFrom="list",n.currentPage=0,n.leadType=t,a.leadModifyDTO=n,a.leadModifyDetailDTO={},a.leadStudentDetailDTO={},a.leadDemoInfo={},a.leadCallFollowupDTO={},a.leadCountDetailDTO={},a}function resetCounselorCommissionRate(e){$("#"+e+" #byPartnerType").val("P"),$("#"+e+" #byPartnerValue").val(""),$("#"+e+" #bySchoolType").val("P"),$("#"+e+" #bySchoolValue").val(""),$("#"+e+" #bySchoolPartnerType").val("P"),$("#"+e+" #bySchoolPartnerValue").val(""),$("#"+e+" #learningProgram").val("A").trigger("change"),$("#"+e+" #standardId").val("").trigger("change"),$("#"+e+" #startDate").val("").datepicker("update"),$("#"+e+" #endDate").val("").datepicker("update"),$("#"+e+" #enrollRange").val("0").trigger("change")}function resetCounselorFilterByForm(e){$("#"+e+" #learningProgramFilter").val("").trigger("change"),$("#"+e+" #standardIdFilter").val("").trigger("change")}function getCounselorCommissionRatesChart(e,t,a,n){if("undefined"!=t){var o={chart:{type:"radialBar",height:200,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#007fff",strokeWidth:"100%"},hollow:{margin:15,size:"75%"},dataLabels:{name:{show:!0,offsetY:0,fontSize:"14px"},value:{show:!0,fontSize:"24px",fontWeight:"bold",offsetY:-35,formatter:function(e){return t}}}}},fill:{},colors:["#3c92ff"],labels:["Enrollment Range"],series:[0]};new ApexCharts($("#"+e)[0],o).render(),$("#"+e).css({visibility:"visible",opacity:"1"})}}function getCounselorPartnerCommissionRatesChart(e,t,a,n){if("undefined"!=t){var o={chart:{type:"radialBar",height:200,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#007fff",strokeWidth:"100%"},hollow:{margin:15,size:"75%"},dataLabels:{name:{show:!0,offsetY:0,fontSize:"14px"},value:{show:!0,fontSize:"24px",fontWeight:"bold",offsetY:-35,formatter:function(e){return t}}}}},fill:{},colors:["#9747ff"],labels:["Enrollment Range"],series:[50]};new ApexCharts($("#"+e)[0],o).render(),$("#"+e).css({visibility:"visible",opacity:"1"})}}function validateCounselorCommissionRate(e){if(hideMessage(""),""==$("#"+e+" #byPartnerType").val())return showMessageTheme2(0,"Lead Provided By Partner type required.","",!0),!1;if(""==$("#"+e+" #byPartnerValue").val())return showMessageTheme2(0,"Commission rate required.","",!0),!1;if(""==$("#"+e+" #learningProgram").val())return showMessageTheme2(0,"Learning program is required","",!0),!1;if("A"==$("#"+e+" #learningProgram").val());else if(""==$("#"+e+" #standardId").val())return showMessageTheme2(0,"Grade is required","",!0),!1;return""!=$("#"+e+" #startDate").val()||(showMessageTheme2(0,"Applicable From Date required.","",!0),!1)}function getRequestForSaveCounselorCommissionRate(e){var t={},a={};a.assignTo=$("#"+e+" #assignTo").val(),a.byPartnerType=$("#"+e+" #byPartnerType").val(),a.byPartnerValue=$("#"+e+" #byPartnerValue").val(),a.bySchoolType=$("#"+e+" #bySchoolType").val(),a.bySchoolValue=$("#"+e+" #bySchoolValue").val(),a.bySchoolPartnerType=$("#"+e+" #bySchoolPartnerType").val(),a.bySchoolPartnerValue=$("#"+e+" #bySchoolPartnerValue").val();var n=[];n.push($("#"+e+" #learningProgram").val()),a.learningPrograms=n;var o=$("#"+e+" #standardId").val().find((e=>"A"==e));if(null!=o||"A"==o||""==o){var r=$("#"+e+" #learningProgram").val();a.standardIds="A"==r?[0]:"ONE_TO_ONE_FLEX"==r?[19,9,10,20,21]:[11,12,13,14,15,16,1,2,3,4,5,6,7]}else a.standardIds=$("#"+e+" #standardId").val();a.enrollRange=$("#"+e+" #enrollRange").val(),a.startDate=$("#"+e+" #startDate").val(),a.endDate=null!=$("#"+e+" #endDate").val()?$("#"+e+" #endDate").val():"";var s={};return s.hash=getHash(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=USER_ROLE,s.userId=USER_ID,t.authentication=s,t.commissionRate=a,t}function saveCounselorCommissionRate(e){if(hideMessage(""),!validateCounselorCommissionRate(e))return!1;$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/save-counselor-commission-rate",data:JSON.stringify(getRequestForSaveCounselorCommissionRate(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!1):showMessageTheme2(1,e.message,"",!0)},error:function(e){checkonlineOfflineStatus()}})}function getCounselorCommissionRateFilter(e){var t=getFilteredCounselorCommissionRateContent(e,fetchCounselorCommissionRate(e));$("#commissionRateFilteredData > tbody").html(t),$(".datepicker").datepicker({autoclose:!0,format:"M d, yyyy"}),null!=$("#learningProgramFilter").val().length&&null!=$("#learningProgramFilter").val().length&&0!=$("#learningProgramFilter").val().length&&null!=$("#standardIdFilter").val().length&&null!=$("#standardIdFilter").val().length&&0!=$("#standardIdFilter").val().length&&($(".bulkEditBtn").show("show"),$(".commissionTable thead > tr th:last-child, .commissionTable tbody > tr td:last-child").show(),$(".commissionTable thead > tr th:nth-last-child(2)").removeClass("rounded-top-right-10"),$(".bulk-update-and-cancel-btn").hide())}function getFilteredCounselorCommissionRateContent(e,t){var a="";return $.each(t.commissionRates,(function(e,t){var n=t.min_range+"+";t.max_range>0&&(n=t.min_range+"-"+t.max_range),a+='<tr class="td-border-design border-color-gray" commissionRateId="'+t.id+'"><td class="border-width-1">'+(e+1)+'</td><td class="border-width-1">'+t.standardName+'</td><td class="border-width-1">'+t.learningProgramValue+'</td><td class="p-0 border-width-1"><table class="table m-0" style="table-layout: fixed; max-width: 270px;"><tbody><tr><td class="border-left-0 border-bottom-0"><div class="edit-value">'+("F"==t.byPartnerType?"Amount in USD":"Percentage")+'</div><div class="edit-value-element" style="display: none;"><select name="byPartnerType_'+t.id+'" id="byPartnerType_'+t.id+'" class="form-control byPartnerType"><option value="P" '+("P"==t.byPartnerType?"selected":"")+'>Percentage</option><option value="F" '+("F"==t.byPartnerType?"selected":"")+'>Amount in USD without $ sign</option></select></div></td><td class="border-right-0 border-bottom-0"><div class="edit-value">'+("F"==t.byPartnerType?"$":"")+t.byPartnerValue+(t.byPartnerType,'</div><div class="edit-value-element font-12" style="display: none;"><input type="text" name="byPartnerValue_')+t.id+'" id="byPartnerValue_'+t.id+'" value="'+t.byPartnerValue+'" class="form-control byPartnerValue"></div></td></tr></tbody></table></td><td class="p-0 border-width-1"><table class="table m-0" style="table-layout: fixed;max-width: 270px;"><tbody><tr><td class="border-left-0 border-bottom-0"><div class="edit-value">'+("F"==t.bySchoolType?"Amount in USD":"Percentage")+'</div><div class="edit-value-element" style="display: none;"><select name="bySchoolType_'+t.id+'" id="bySchoolType_'+t.id+'" class="form-control bySchoolType"><option value="P" '+("P"==t.bySchoolType?"selected":"")+'>Percentage</option><option value="F" '+("F"==t.bySchoolType?"selected":"")+'>Amount in USD without $ sign</option></select></div></td><td class="border-right-0 border-bottom-0"><div class="edit-value">'+("F"==t.bySchoolType?"$":"")+t.bySchoolValue+(t.bySchoolType,'</div><div class="edit-value-element font-12" style="display: none;"><input type="text" name="bySchoolValue_')+t.id+'" id="bySchoolValue_'+t.id+'" value="'+t.bySchoolValue+'" class="form-control bySchoolValue"></div></td></tr></tbody></table></td><td class="p-0 border-width-1"><table class="table m-0" style="table-layout: fixed;max-width: 270px;"><tbody><tr><td class="border-left-0 border-bottom-0"><div class="edit-value">'+("F"==t.bySchoolPartnerType?"Amount in USD":"Percentage")+'</div><div class="edit-value-element" style="display: none;"><select name="bySchoolPartnerType_'+t.id+'" id="bySchoolPartnerType_'+t.id+'" class="form-control bySchoolPartnerType"><option value="P" '+("P"==t.bySchoolPartnerType?"selected":"")+'>Percentage</option><option value="F" '+("F"==t.bySchoolPartnerType?"selected":"")+'>Amount in USD without $ sign</option></select></div></td><td class="border-right-0 border-bottom-0"><div class="edit-value">'+("F"==t.bySchoolPartnerType?"$":"")+t.bySchoolPartnerValue+(t.bySchoolPartnerType,'</div><div class="edit-value-element font-12" style="display: none;"><input type="text" name="bySchoolPartnerValue_')+t.id+'" id="bySchoolPartnerValue_'+t.id+'" value="'+t.bySchoolPartnerValue+'" class="form-control bySchoolPartnerValue"></div></td></tr></tbody></table></td><td class="border-width-1"><div class="edit-value">'+n+'</div><div class="edit-value-element" style="display: none;"><select name="enrollRange_'+t.id+'" id="enrollRange_'+t.id+'" class="form-control bySchoolType"><option value="0">Select Range</option><option value="1-5" '+(t.min_range+"-"+t.max_range=="1-5"?"selected":"")+'>1-5</option><option value="6-10" '+(t.min_range+"-"+t.max_range=="6-10"?"selected":"")+'>6-10</option><option value="11-20" '+(t.min_range+"-"+t.max_range=="11-20"?"selected":"")+'>11-20</option><option value="21-30" '+(t.min_range+"-"+t.max_range=="21-30"?"selected":"")+'>21-30</option><option value="31-50" '+(t.min_range+"-"+t.max_range=="31-50"?"selected":"")+' >31-50</option><option value="50-0" '+(t.min_range+"-"+t.max_range=="50-0"?"selected":"")+'>50+</option></select></div></td><td class="border-width-1"><div class="edit-value">'+t.startDate+'</div><div class="edit-value-element" style="display: none;"><input type="text" name="startDate" id="startDate_'+t.id+'" value="'+t.startDate+'" class="datepicker form-control startDate"></div></td><td class="border-width-1"><div class="edit-value">'+t.endDate+'</div><div class="edit-value-element" style="display: none;"><input type="text" name="endDate" id="endDate_'+t.id+'" value="'+t.endDate+'" class="datepicker form-control endDate"></div></td><td class="text-center border-width-1"><a href="javascript:void(0)" class="text-decoration-none text-primary edit-value" onclick="editRow(this)"><i class="fa fa-edit"></i></a>&nbsp;<a href="javascript:void(0)" class="text-decoration-none text-primary edit-value" onclick="getCommissionRateLogs('+t.id+')"><i class="fa fa-history"></i></a><div class="edit-value-element" style="display: none;"><a href="javascript:void(0)" class="text-decoration-none btn btn-primary btn-sm mb-2" onclick="cancelEitRow(this)">cancel</a><br/><a href="javascript:void(0)" class="text-decoration-none btn btn-success btn-sm" onclick="updateCommissionRate(\'filterCounselorCommissionRate\','+t.id+')">Update</a></div></td></tr>'})),a}function getRequestForFilterCounselorCommissionRate(e){var t={},a={};a.assignTo=$("#filterCounselorCommissionRate #assignToFilter").val();var n=[];n.push($("#"+e+" #learningProgramFilter").val()),a.learningPrograms=n;var o=$("#"+e+" #standardIdFilter").val().find((e=>"A"==e));if(null!=o||"A"==o||""==o){var r=$("#"+e+" #learningProgramFilter").val();a.standardIds="A"==r?[0]:"ONE_TO_ONE_FLEX"==r?[19,9,10,20,21]:"BATCH"==r?[11,12,13,14,15,16,1,2,3,4,5,6,7]:[11,12,13,14,15,16,1,2,3,4,5,6,7,8]}else a.standardIds=$("#"+e+" #standardIdFilter").val();var s={};return s.hash=getHash(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=USER_ROLE,s.userId=USER_ID,t.authentication=s,t.filter=a,t}function fetchCounselorCommissionRate(e){if(0==$("#"+e+" #learningProgramFilter").val().length)return showMessageTheme2(0,"Select Learning program","",!0),!1;if("A"==$("#"+e+" #learningProgramFilter").val());else if(0==$("#"+e+" #standardIdFilter").val().length)return showMessageTheme2(0,"Select Grade","",!0),!1;var t={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/filter-counselor-commission-rate",data:JSON.stringify(getRequestForFilterCounselorCommissionRate(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!0):(t=e,showMessageTheme2(1,"Commission rate based on filter criteria","",!0))},error:function(e){checkonlineOfflineStatus()}}),t}function getRequestForLeadList(e,t,a,n,o,r,s,l,i,d){""!=i&&null!=i||(i=USER_ID);var c={};return c.userId=i,c.moduleId=e,c.leadFrom=t,c.clickFrom=a,c.startDate=n,c.endDate=o,c.country=r,c.campaign=s,c.currentPage=l,c.leadType=d,c}function getLeadListData(e,t,a,n,o,r,s,l,i,d){return new Promise((function(c,u){$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/lead-list",data:JSON.stringify(getRequestForLeadList(e,t,a,n,o,r,s,l,i,d)),dataType:"json",async:!0,global:!0,success:function(e){if(console.log(e),"0"==e.status||"2"==e.status||"3"==e.status)return"3"==e.status&&redirectLoginPage(),u();c(e)},error:function(e,t,a){checkonlineOfflineStatus()||(console.error("Error: "+a),u(a))}})}))}function toggleLinkTab(e){"enrollment"===e?($("#enrollmentTabBtn").addClass("text-white bg-primary").removeClass("text-dark bg-transparent"),$("#seatTabBtn").addClass("text-dark bg-transparent").removeClass("text-white bg-seat-primary"),$("#enrollmentLinksSection").removeClass("d-none").addClass("d-flex"),$("#seatLinksSection").addClass("d-none").removeClass("d-flex")):($("#seatTabBtn").addClass("bg-seat-primary").removeClass("text-dark bg-transparent"),$("#enrollmentTabBtn").addClass("text-dark bg-transparent").removeClass("text-white bg-primary"),$("#seatLinksSection").removeClass("d-none").addClass("d-flex"),$("#enrollmentLinksSection").removeClass("d-flex").addClass("d-none"))}