function liveClassConent(){$("body").append(liveClassConentPage());var t=new Date((new Date).getTime()-0),e=new Date((new Date).getTime()+0);$("#startDate").datepicker({autoclose:!0,format:"M dd, yyyy",todayHighlight:!0}),$("#endDate").datepicker({autoclose:!0,format:"M dd, yyyy",todayHighlight:!0}),$("#startDate").datepicker().datepicker("setDate",t),$("#endDate").datepicker().datepicker("setDate",e),$("#startHours").val("00"),$("#endHours").val("23"),getSchoolClassTime()}function liveClassConentPage(){return'<div class="app-container app-theme-white body-tabs-shadow fixed-header fixed-sidebar">'+liveClassConentPageBody()+"</div>"+liveClassConentPageFooter()+customLoaderContent()+attendanceModelContent()}async function liveClassConentPageHeader(){var t=await getSchoolSettingsLinks(SCHOOL_ID);return'<div class="sticky-header"><div class="app-header header-shadow"><div class="app-header__logo"><a href="'+t.websiteUrl+'" target="blank" class="logo-src" style="background:url('+t.websiteLogoUrl+');"></a></div><div class="app-header__logo"></div></div></div>'}function headClasscount(){return'<div class="main-card mb-3 card" style="font-size:12px !important"> <div class="no-gutters row"> <div class="col-md-3"> <div class="pt-0 pb-0 card-body"> <ul class="list-group list-group-flush"> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Contract Hours</div> <div class="widget-subheading"></div>  </div> <div class="widget-content-right"> <div class="widget-numbers text-primary agreedHrs"  style="font-size:13px !important">00:00:00</div> </div> </div> </div> </div> </li> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Total Class</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"> <div class="widget-numbers text-primary totalClasses" style="font-size:13px !important" >00</div> </div> </div> </div> </div> </li>  </ul> </div> </div> <div class="col-md-3"> <div class="pt-0 pb-0 card-body"> <ul class="list-group list-group-flush"> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Teacher Hours</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"> <div class="widget-numbers text-success teacherHrs" style="font-size:13px !important">00:00:00</div>  </div> </div>  </div> </div> </li> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Live Class</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"> <div class="widget-numbers text-warning totalLiveClasses" style="font-size:13px !important">00</div> </div> </div> </div> </div> </li>  </ul> </div> </div> <div class="col-md-3"> <div class="pt-0 pb-0 card-body"> <ul class="list-group list-group-flush"> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Spent Hours</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"> <div class="widget-numbers text-danger spentHrs" style="font-size:13px !important">00:00:00</div>  </div> </div>  </div> </div> </li> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Complete Class</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"> <div class="widget-numbers text-warning totalCompleted" style="font-size:13px !important">00</div> </div> </div> </div> </div> </li>  </ul> </div> </div> <div class="col-md-3"> <div class="pt-0 pb-0 card-body"> <ul class="list-group list-group-flush"> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Remaing Hours</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"> <div class="widget-numbers text-warning remainHrs" style="font-size:13px !important">00:00:00</div> </div> </div> </div> </div> </li> <li class="list-group-item"> <div class="widget-content p-0"> <div class="widget-content-outer"> <div class="widget-content-wrapper"> <div class="widget-content-left"> <div class="widget-heading">Not attend Class</div> <div class="widget-subheading"></div> </div> <div class="widget-content-right"><div class="widget-numbers text-success totalNotAttended" style="font-size:13px !important">00</div> </div>  </div> </div>  </div> </li> </ul> </div> </div> </div> </div> '}function liveClassBox(){return'<div class="col-lg-6"><div class="main-card mb-3 card"> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="widget-content p-0"> <div class="widget-content-wrapper"> <div class="widget-content-left mr-3"> <div class="widget-content-left"> <img width="42" class="rounded" src="'+PATH_FOLDER_IMAGE2+'/avatars/9.jpg" alt=""> </div> </div> <div class="widget-content-left flex4 "> <div class="widget-heading">Isadora Beaumord Perillo Ribeiro Bokos</div> <div class="widget-subheading opacity-10"> <span class="pr-2">Time - <b>00:00:00</b> | Spent - <b class="text-success">00:00:00</b></span><br/><span class="pr-2">Joined - 12:00 AM - 12:48 AM</span><br/>Meeting - 93520328956<br/><a href="javaScript:void(0);" class="badge badge-primary" onclick="getLiveAttendeeDetails(this,\'461701_MEETINGS\',\'93520328956\',1,\'livecl-93520328956\')">View</a></div> </div> <div class="widget-content-right text-left"> <div class="widget-heading">Grade 10 | One-To-One-Recurring<br/>Student - Pedro Ivan Cabrera Ferreira<br/>Title - Digital Information Technology</div> <div class="widget-subheading opacity-10"> <span class="pr-2">Scheduled - 12:00 AM - 12:50 AM</span><br/><label class="badge badge-info">Completed</label></div> </div> </div> </li> </ul></div></div>'}function liveClassConentPageBody(){return'<div class="pb-4"> <div class="col p-0"><div class="app-main__inner p-0"><div id="liveClassContent" class="main-card mt-0 mb-3 card body-tabs-shadow"><div class="card-body pt-0" id="classList">'+liveClassConentSearchForm()+'<div class="row"><div class="col-lg-12">'+headClasscount()+'<div class="col-md-12 p-0" style="overflow: auto; height: 500px;font-size:12px"><table class="table row-height-small table-bordered" stlye="min-width:1300px"><thead><tr><th class="position-sticky bg-primary text-white" style="top:0;z-index:1">S No.</th><th class="position-sticky bg-primary text-white" style="top:0;z-index:1"><spna class="full">Scheduled Time | Class Time</spna><spna class="full">(Asia/Kolkata)</spna></th><th class="position-sticky bg-primary text-white" style="top:0;z-index:1">Meeting Status</th><th class="position-sticky bg-primary text-white" style="top:0;z-index:1"><span class="full">Grade | Learning Program</span></th><th class="position-sticky bg-primary text-white" style="top:0;z-index:1"><span class="full">Title | Teacher Name</span></th><th class="position-sticky bg-primary text-white" style="top:0;z-index:1">Total</th><th class="position-sticky bg-primary text-white" style="top:0;z-index:1">Attendance</th></tr></thead><tbody id="live-class-now"></tbody></table><div id="live-class-now-meetingid"></div></div></div></div></div></div></div></div></div>'}async function liveClassConentPageFooter(){var t=await getSchoolSettingsLinks(SCHOOL_ID);return'<div class="app-wrapper-footer"><div class="app-footer"><div class="app-footer__inner"><div class="app-footer__inner"><div class="col"><p>'+t.copywriteYear+"&Copy;"+t.copywriteUrl+'</p></div></div></div><div class="server-message"><span class="msg" id="msgTheme2"></span></div></div></div>'}function liveClassConentSearchForm(){return'<div class="row mb-2 bg-light pt-2" style="font-size:12px !important"><div class="col-lg-2 col-md-3 col-sm-6 col-12 mb-2"><label>Start Date</label><input type="text" class="form-control" id="startDate" placeholder="Select a date" style="font-size:12px !important"/></div><div class="col-lg-1 col-md-3 col-sm-6 col-12 mb-2"><label>Start Time</label><select id="startHours" class="form-control" style="font-size:12px !important"><option disabled selected>HH</option>'+getHoursAndMins(23,1)+'</select></div><div class="col-lg-2 col-md-3 col-sm-6 col-12 mb-2"><label>End Date</label><input type="text" class="form-control" id="endDate" placeholder="Select a date" style="font-size:12px !important"/></div><div class="col-lg-1 col-md-3 col-sm-6 col-12 mb-2"><label>End Time</label><select id="endHours" class="form-control" style="font-size:12px !important"><option disabled selected>HH</option>'+getHoursAndMins(23,1)+'</select></div><div class="col-lg-2 col-md-3 col-sm-6 col-12 mb-2"><label>Learning Program</label><select id="learningProgram" class="form-control" style="font-size:12px !important"><option value="">Select Learning Program</option><option value="ONE_TO_ONE">One-To-One</option><option value="GROUP">Group</option><option value="EXTRA_ACTIVITY">Extra Activity</option></select></div><div class="col-lg-1 col-md-3 col-sm-6 col-12 mb-2"><label>Class Status</label><select id="classStatus" class="form-control" style="font-size:12px !important"><option value="">Select Status</option><option value="UPCOMING">UPCOMING</option><option value="LIVE">LIVE</option><option value="NOT ATTENDED">NOT ATTENDED</option><option value="COMPLETED">COMPLETED</option></select></div><div class="col-lg-2 col-md-3 col-sm-6 col-12 mb-2"><label class="full">&nbsp;</label><a href="javascript:void(0)" class="btn btn-success" onClick="getCurrentClassLiveNew();">Search</a></div></div>'}function getHoursAndMins(t,e){for(var a="",i=0;i<=t;)a+=i<10?'<option val="0'+i+'">0'+i+"</option>":'<option val="'+i+'">'+i+"</option>",i+=e;return a}function customLoaderContent(){return'<div id="commonloaderIdNewLoader" class="loader-wrapper d-flex justify-content-center align-items-center loader-style hide-loader"><img src="'+PATH_FOLDER_IMAGE2+'loader-new.gif" alt="'+SCHOOL_NAME+' Loader" class="new-loader-2024" /></div>'}function attendanceModelContent(){return'<div class="modal fade" id="viewAttendanceModal" tabindex="-1" role="dialog" aria-labelledby="viewAttendanceModalTitle" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header py-2 bg-primary"><h5 class="modal-title text-white">View Attendance</h5><button type="button" class="close text-white" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><table id="attendanceTable" class="table table-hover table-striped table-bordered"></table></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div></div></div></div>'}function liveClassTableNew(t,e){console.log(liveClassTableNew);var a="",i=1,s=t.length,d=0,l=0,n=0,c=0,o="";for(md=0;md<t.length;md++){var r=t[md].entityId+"_"+t[md].entityType,v=t[md].entityType+"_"+t[md].entityId,p="Upcoming",g="badge-warning";o=0;"started"==t[md].meetingStatus&&""!=t[md].actualStartTime?(p="Live",g="badge-success",n++):"ended"==t[md].meetingStatus&&""!=t[md].actualEndTime?(p="Completed",g="badge-info",l++,0==o&&(o="1")):new Date(t[md].startTimeOrder).getTime()<(new Date).getTime()?(p="Not Attended",d++):(p="Upcoming",c++);1==i&&"true";if(""!=t[md].liveStudent&&(parseInt(t[md].liveStudent)>0?parseInt(t[md].liveStudent)-1:0),$("#live-class-now-meetingid").find("span.accordion").hasClass("offclass-"+t[md].meetingId)&&$(".offclass-"+t[md].meetingId).remove(),$("#live-class-now").find("span.accordion").hasClass("offclass-"+t[md].meetingId)&&$(".offclass-"+t[md].meetingId).remove(),"1"==o&&(o="currentLiveClass"),"new"==e){var m="";m=0==t[md].attendanceCalculated&&"ended"==t[md].meetingStatus?"calculateAttendance('"+r+"','"+t[md].meetingId+"','"+t[md].attendanceCalculated+"')":1==t[md].attendanceCalculated&&"ended"==t[md].meetingStatus?"getLiveAttendeeDetails(this,'"+r+"','"+t[md].meetingId+"','"+t[md].attendanceCalculated+"','livecl-"+t[md].meetingId+"')":2==t[md].attendanceCalculated?"calculateAttendance('"+r+"','"+t[md].meetingId+"','"+t[md].attendanceCalculated+"')":"",a+='<div class="col-lg-6 '+(0!=o?o:"")+" livecl-"+t[md].meetingId+'" ><div class="main-card mb-3 card" style="margin-bottom: 2px !important"> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="widget-content p-0"> <div class="widget-content-wrapper"> <div class="widget-content-left mr-3"> <div class="widget-content-left"> <img width="42" class="rounded" src="'+PATH_FOLDER_IMAGE2+'/avatars/9.jpg" alt=""> </div> </div> <div class="widget-content-left flex2 "> <div class="widget-heading">'+t[md].teacherName+'</div> <div class="widget-subheading opacity-10"> <span class="pr-2">Time - <b>00:00:00</b> | Spent - <b class="text-success">00:00:00</b></span><br/><span class="pr-2">MeetingId - '+t[md].meetingId+"<br/>Joined - "+t[md].actualStartTime+" - "+t[md].actualEndTime+"</span>",""!=m&&(a+='<br/><a href="javaScript:void(0);" class="badge badge-primary" onclick="'+m+'">View</a>'),a+='</div> </div> <div class="widget-content-left flex2 "> <div class="widget-heading">'+t[md].grade+" <b> | </b> "+t[md].classType+"<br/>Student - "+t[md].className.replace("|","<br/>Title - ")+'</div> <div class="widget-subheading opacity-10"> <span class="pr-2">Scheduled - '+t[md].scheduleStartDate+" - "+t[md].scheduleEndDate+'</span><br/><label class="badge '+g+'">'+p+"</label></div> </div> </div> </li> </ul></div></div>"}else a+='<tr id="tr_'+v+'" class="classlive_'+v+" "+(0!=o?o:"")+" livecl-"+t[md].meetingId+'"><td class="text-dark">'+i+'</td><td class="text-dark"><span class="full">Scheduled - '+t[md].scheduleStartDate+" - "+t[md].scheduleEndDate+'</span><span class="full">Joined - '+t[md].actualStartTime+" - "+t[md].actualEndTime+'</span></td><td class="text-dark meeting_id"><div class="d-flex"><div class="flex-grow-1"><span id="td_badge_'+v+'" class="full"><label class="badge '+g+' full">'+p+'</label></span></div></div><td class="text-dark text-left"><span class="full">'+t[md].grade+" <b> | </b> "+t[md].classType+'</span><span id="td_meeting_'+v+'" class="full">'+t[md].meetingId+'</span></td><td class="text-dark text-left className"><div class="d-flex"><div><span class="full">Title - '+t[md].className+'</span><span class="full">Teacher - '+t[md].teacherName+'</span><div class="d-flex flex-wrap w-100 mt-1"><span class="d-inline-flex mr-1 border-right pr-1 border-dark">'+getMeetingUrl("attendee",v)+'</span><span class="d-inline-flex mr-1">'+getMeetingUrl("host",v)+'</span></div></div></div></td><td class="text-dark text-left totalStudent">'+t[md].totalStudent+'</td><td class="attendanceCalculated_'+r+' text-dark text-left" id="'+v+'">',0==t[md].attendanceCalculated&&"ended"==t[md].meetingStatus?a+='<a href="javaScript:void(0);" class="btn btn-sm btn-primary" onClick="calculateAttendance(\''+r+"','"+t[md].meetingId+"',"+t[md].attendanceCalculated+')">Calculate Attendance</a>':1==t[md].attendanceCalculated&&"ended"==t[md].meetingStatus?a+='<a href="javaScript:void(0);" class="btn btn-sm btn-primary" onClick="getLiveAttendeeDetails(this,\''+r+"','"+t[md].meetingId+"',"+t[md].attendanceCalculated+",'livecl-"+t[md].meetingId+"')\">View Attendance</a>":2==t[md].attendanceCalculated?a+='<a href="javaScript:void(0);" class="btn btn-sm btn-primary" onClick="calculateAttendance(\''+r+"','"+t[md].meetingId+"',"+t[md].attendanceCalculated+')">Calculate Attendance</a>':a+="--",a+="</td></tr>",i++}return"currentLiveClass"==o&&(o=""),$(".totalClasses").html("<b>"+s+"<b/>"),$(".totalNotAttended").html("<b>"+d+"<b/>"),$(".totalCompleted").html("<b>"+l+"<b/>"),$(".totalLiveClasses").html("<b>"+n+"<b/>"),$(".totalUpcoming").html("<b>"+c+"<b/>"),a}function attendanceData(t){var e="";return $.each(t.attendance,(function(t,a){e+='<tr id="row_id_'+a.id+'"><td>'+a.name+" ("+a.joinType+")</td><td>"+a.joinTime+"</td><td>"+a.leaveTime+"</td><td>"+a.duration+"</td><td>"+a.leaveReason+"</td></tr>"})),e="<thead><tr><th>Name</th><th>JoinTime</th><th>LeaveTime</th><th>Duration</th><th>leaveReason</th></tr><thead><tbody>"+e+"<tbody>"}function updateMeetingAndBadge(t,e,a){"start"==a?($("#td_badge_"+t).html('<label class="badge badge-success full">Live</label>'),$("#"+t).html("--")):($("#td_badge_"+t).html('<label class="badge badge-primary full">Completed</label>'),$("#"+t).html('<a href="javaScript:void(0);" class="btn btn-sm btn-primary" onClick="calculateAttendance(\''+t+"','"+e+"',0)\">Calculate Attendance</td>")),$("#td_meeting_"+t).text(e)}function getMeetingUrl(t,e){var a="",i="";e.startsWith("BATCH_TEACHER_MAPPING")?(a=e.split("BATCH_TEACHER_MAPPING_")[1],i="BATCH_TEACHER_MAPPING"):e.startsWith("MEETINGS")?(a=e.split("MEETINGS_")[1],i="MEETINGS"):e.startsWith("EXTRA_ACTIVITY_DETAILS")?(a=e.split("EXTRA_ACTIVITY_DETAILS_")[1],i="EXTRA_ACTIVITY_DETAILS"):e.startsWith("ORINETATION")&&(a=e.split("ORINETATION_")[1],i="ORINETATION");var s={};s.entityId=a,s.entityType=i,s.joinAs=t;var d="",l=BASE_URL+CONTEXT_PATH+SCHOOL_UUID,n="";return"attendee"==t?(l+="/join?payload=",n="Attendee Link"):"cohost"==t?(l+="/prepare?payload=",n="Alt Host Link"):"host"==t&&(l+="/prepare?payload=",n="Host Link"),d+='<button value="'+(l+=s=encode(JSON.stringify(s)))+'" class="mr-1 btn btn-primary btn-sm" id="'+t+"joinUrl_"+e+'" onclick="copyURL(\''+t+"joinUrl_"+e+"','"+t+"joinUrl_copy"+e+'\')"><i class="fa fa-copy"></i></button><label class="position-relative"><b class="referral-code full">'+n+'</b><span class="'+t+"joinUrl_copy"+e+' position-absolute" style="bottom:-7px;left:0"></span></label>'}