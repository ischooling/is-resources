function signupTeacherStage2OnLoadEvent(e){e=e.details.teacher,formValdate("teacherSignupStage2",mandatoryFields,[]);var a=!1;a||(inputContact=document.querySelector("#phone_no"),itiContcat=window.intlTelInput(inputContact),IGNORECOUNTRYARRAY.includes(e.countryData)&&(e.countryData="US"),itiContcat.setCountry(""==e.countryData?"US":e.countryData),inputContact.addEventListener("countrychange",(function(e){$("#countryData").val(itiContcat.getSelectedCountryData().iso2),$("#countryIsd").val(itiContcat.getSelectedCountryData().dialCode)})),a=!0),$("#teacherFirstName").blur((function(){if(""==$("#teacherFirstName").val().trim())return $("#teacherFirstName").valid(),validEndInvalidField(null,"teacherFirstName"),!1;validEndInvalidField(!0,"teacherFirstName")})),$("#teacherMiddleName").blur((function(){if(""==$("#teacherMiddleName").val().trim())return validEndInvalidField(null,"teacherMiddleName"),!1;validEndInvalidField(!0,"teacherMiddleName")})),$("#teacherLastName").blur((function(){if(""==$("#teacherLastName").val().trim())return $("#teacherLastName").valid(),validEndInvalidField(null,"teacherLastName"),!1;validEndInvalidField(!0,"teacherLastName")})),$("#phone_no").blur((function(){if(""==$("#phone_no").val().trim())return $("#phone_no").valid(),validEndInvalidField(null,"phone_no"),!1;validEndInvalidField(!0,"phone_no")})),$("#teacherGender").change((function(){if(""==$("#teacherGender").val().trim())return $("#teacherGender").valid(),validEndInvalidField(null,"teacherGender"),!1;validEndInvalidField(!0,"teacherGender")})),$("#countryId").on("change",(function(){if(null!=$(this).val()){$("#countryId").valid();var e=$("option:selected",this).attr("dail-country-code");IGNORECOUNTRYARRAY.includes(e)&&(e="US"),$("#countryId").valid()&&validEndInvalidField(!0,"countryId"),null!=e&&""!=e?(IGNORECOUNTRYARRAY.includes(e)&&(e="US"),itiContcat.setCountry(e)):$("#stateId").html("<option value=''>Select State/Province*</option>"),callStates("teacherSignupStage2",this.value,"countryId"),$("#cityId").html("<option value=''>Select City*</option>"),validEndInvalidField(null,"cityId"),validEndInvalidField(null,"stateId")}else $(this).val(""),$("#countryId").valid()})),$("#stateId").on("change",(function(){null!=$(this).val()?($("#stateId").valid(),callCities("teacherSignupStage2",this.value,"stateId"),validEndInvalidField(!0,"stateId"),validEndInvalidField(null,"cityId")):($(this).val(""),$("#stateId").valid())})),$("#cityId").on("change",(function(){null!=$(this).val()?($("#cityId").valid(),validEndInvalidField(!0,"cityId")):($(this).val(""),$("#cityId").valid())}));var t=new Date;t.setFullYear(t.getFullYear()-99);var n=new Date;n.setFullYear(n.getFullYear()-18),$("#teacherDob").datepicker({autoclose:!0,format:"M dd, yyyy",startDate:t,endDate:n}).on("change",(function(){if(""==$(this).val().trim())return $("#teacherDob").valid(),validEndInvalidField(null,"teacherDob"),!1;validEndInvalidField(!0,"teacherDob")}))}async function callForSignupTeacherBasicDetailsForm(e){var a=!1;if(!calculateAge(e))return showMessage(2," Date of birth range should be between 18 to 99","",!0),!1;hideMessage(""),$("#nextStep").prop("disabled",!0);const t=getRequestForTeacherBasicDetails(e),n=await getDashboardDataBasedUrlAndPayloadWithParentUrl(!0,!1,"save-basic-details",t,"teacher/signup");return"SUCCESS"==n.statusCode?(showMessage(1,"Basic information updated successfully.","",!0),getStage3Data(),a=!0):(showMessage(0,n.message,"",!0),a=!1),a}function getRequestForTeacherBasicDetails(e){var a={},t={},n={};return n.firstName=toTitleCase($("#"+e+" #teacherFirstName").val()),n.middleName=toTitleCase($("#"+e+" #teacherMiddleName").val()),n.lastName=toTitleCase($("#"+e+" #teacherLastName").val()),n.dob=changeDateFormat(new Date($("#"+e+" #teacherDob").val()),"mm-dd-yyyy"),n.gender=$("#"+e+" #teacherGender").val(),n.countryData=null==$("#"+e+" #countryData").val()||""==$("#"+e+" #countryData").val()?"us":$("#"+e+" #countryData").val(),n.countryCode=null==$("#"+e+" #countryIsd").val()||"+null"==$("#countryIsd").val()||""==$("#"+e+" #countryIsd").val()?"1":$("#"+e+" #countryIsd").val(),n.contactNumber=$("#"+e+" #phone_no").val(),n.communicationEmail=$("#"+e+" #teacherEmailId").val(),n.countryId=$("#"+e+" #countryId").val(),n.stateId=$("#"+e+" #stateId").val(),n.cityId=$("#"+e+" #cityId").val(),t.hash=getHash(),t.schoolId=SCHOOL_ID,t.schoolUUID=SCHOOL_UUID,t.userType="TEACHER",t.userId=$("#"+e+" #userId").val(),a.authentication=t,a.teacherDetails=n,a}function calculateAge(e){var a=changeDateFormat(new Date($("#"+e+" #teacherDob").val()),"mm-dd-yyyy"),t=a.split("-");if(a=a.split("-").length,3!=parseInt(a)||parseInt(t[1])>31||parseInt(t[0])>12)return showMessage(0,"Date of Birth is not valid"),!1;var n=M.countAgeNew(t[1],t[0],t[2]);return!(n<=17.93070676512557||n>98.98807333666286)}var mandatoryFields=[];function autoSelectDropDownTeacherBasicInformation(e,a){""!=a.countryId&&mandatoryFields.push("countryId"),$("#"+e+" #teacherFirstName").val(a.firstName).promise().done((function(){if(""==$("#teacherFirstName").val().trim())return validEndInvalidField(null,"teacherFirstName"),!1;validEndInvalidField(!0,"teacherFirstName")})),$("#"+e+" #teacherMiddleName").val(a.middleName).promise().done((function(){if(""==$("#teacherMiddleName").val().trim())return validEndInvalidField(null,"teacherMiddleName"),!1;validEndInvalidField(!0,"teacherMiddleName")})),$("#"+e+" #teacherLastName").val(a.lastName).promise().done((function(){if(""==$("#teacherLastName").val().trim())return validEndInvalidField(null,"teacherLastName"),!1;validEndInvalidField(!0,"teacherLastName")})),$("#"+e+" #teacherDob").val(""!=a?.dob?changeDateFormat(new Date(a?.dob),"MMM-dd-yyyy"):"").promise().done((function(){if(""==$("#teacherDob").val().trim())return validEndInvalidField(null,"teacherDob"),!1;validEndInvalidField(!0,"teacherDob")})),$("#"+e+" #teacherEmailId").val(a.communicationEmail).promise().done((function(){if(""==$("#teacherEmailId").val().trim())return validEndInvalidField(null,"teacherEmailId"),!1;validEndInvalidField(!0,"teacherEmailId")})),$("#"+e+" #phone_no").val(a.contactNumber).promise().done((function(){if(""==$("#phone_no").val().trim())return validEndInvalidField(null,"phone_no"),!1;validEndInvalidField(!0,"phone_no")})),$("#"+e+" #countryId").val(a.countryId).trigger("change"),""==a.countryId&&$("#"+e+" #countryId").attr("disabled",!1),""!=a.stateId&&($("#"+e+" #stateId").val(a.stateId).trigger("change"),mandatoryFields.push("stateId")),""!=a.cityId&&($("#"+e+" #cityId").val(a.cityId).trigger("change"),mandatoryFields.push("cityId")),""!=a.gender&&null!=a.gender&&$("#"+e+" #teacherGender").val(a.gender).trigger("change"),$("#"+e+" #maritalStatus").val(a.maritalStatus).trigger("change"),$("#"+e+" #countryData").val(a.countryData).trigger("change"),$("#"+e+" #countryIsd").val(a.countryCode).trigger("change"),""!=a.firstName&&mandatoryFields.push("teacherFirstName"),""!=a.middleName&&mandatoryFields.push("teacherMiddleName"),""!=a.lastName&&mandatoryFields.push("teacherLastName"),""!=a.dob&&mandatoryFields.push("teacherDob"),""!=a.gender&&mandatoryFields.push("teacherGender"),""!=a.communicationEmail&&mandatoryFields.push("teacherEmailId"),""!=a.contactNumber&&mandatoryFields.push("phone_no")}async function getStage2Data(e){"2"==e?(setSteps(2),showSkeleton(!0,"step2")):showSkeleton(!0,"step1");var a={};a.userId=USER_ID,responseData=await getDashboardDataBasedUrlAndPayloadWithParentUrl(!1,!1,"get-teacher-basic-details",a,"/teacher/signup"),$("#teacherSignupContentStage2").html(getTeacherBasicInfoContent(responseData)),$(".step-1-skeleton").hide(),$("#teacherSignupStage2").show(),signupTeacherStage2OnLoadEvent(responseData),$(".select_dropdown").select2(),callCountriesOption("teacherSignupStage2",responseData.details.teacher.countryId,"countryId",responseData.details.teacher.countryId),$("#teacherSignupStage2 #stateId").val(responseData.details.teacher.stateId).trigger("change"),autoSelectDropDownTeacherBasicInformation("teacherSignupStage2",responseData.details.teacher)}