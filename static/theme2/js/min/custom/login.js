function validateRequestForLogin(e){return validateEmail($("#"+e+" #email").val().trim())?validPassword($("#"+e+" #password").val().trim())?!!validateCaptcha($("#"+e+" #captcha").val().trim())||(showMessage(!1,"Either captcha is empty or invalid"),!1):(showMessage(!1,"Either password is empty or invalid"),!1):(showMessage(!1,"Email is either empty or invalid"),!1)}function getRequestForLogin(e,a,o){var i={},s={},l={},t=getSystemTimezone();return"Asia/Calcutta"==t&&(t="Asia/Kolkata"),l.timezone=t,l.userName=$("#"+e+" #email").val().trim(),l.password=encode($("#"+e+" #password").val().trim()),l.captcha=$("#"+e+" #captcha").val().trim(),l.location=$("#"+e+" #location").val().trim(),s.hash=getHash(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=a,i.authentication=s,i.login=l,i}function getRequestForProceedToChangeTimezoneForCommon(e,a){var o={},i={},s={};return i.userType="common",i.userId=a,i.hash=getHash(),i.schoolId=SCHOOL_ID,i.schoolUUID=SCHOOL_UUID,s.timezoneId=e,o.authentication=i,o.data=s,o}function proceedWithUserChangedTimezone(e,a){if(hideMessage(""),null==(e=$("#countryTimezoneFromId").val())||null==e||""==e)return!1;$("#proceed").prop("disabled",!0),customLoader(!0),$.ajax({type:"POST",contentType:"application/json",url:getURLFor("common","save-user-new-timezone"),data:JSON.stringify(getRequestForProceedToChangeTimezoneForCommon(e,a)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("0"==e.status||"2"==e.status)showMessage(!0,e.message),customLoader(!1);else if("3"==e.status)showMessage(!0,e.message),customLoader(!1),redirectLoginPage();else{customLoader(!1);var a=$("#ssoUrl").val();goAhead(a,$("#hash").val()),$("#proceed").prop("disabled",!1)}},error:function(e){$("#proceed").prop("disabled",!1)}})}$(document).ready((function(){$("#loginButton").click((function(e){e.preventDefault(),callUserLogin("loginForm",moduleId,"FRESH")})),$("#forgotSubmit").click((function(){callForEmailForgot("forgetForm",moduleId)})),$("#resetPassword").click((function(){callForResetPassword("changeForm",moduleId)})),$("#notVerify").click((function(){callForEmailResend($("#loginForm #email").val().trim(),moduleId,"false")}))}));const callUserLogin=debouncing(callUserLoginFun,300);function callUserLoginFun(e,a,o){if(hideMessage(""),!validateRequestForLogin(e))return!1;$("#"+e+" #login").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("login"),data:JSON.stringify(getRequestForLogin(e,a,o)),dataType:"json",cache:!1,timeout:6e5,success:function(i){if(localStorage.setItem("welcome",!1),"0"==i.status||"2"==i.status)"0043"==i.statusCode?($("#allReadyEmail #emailNotVerify").show(),$("#allReadyEmailFooter").show(),$("#allReadyEmail #emailVerify").hide(),$("#allReadyEmail #userDeclined").hide(),$("#allReadyEmail").modal("toggle")):"02"==i.statusCode?($("#allReadyEmail #emailNotVerify").hide(),$("#allReadyEmail #emailVerify").hide(),$("#allReadyEmail #userDeclined").show(),$("#allReadyEmail").modal("toggle")):"STUDENT"==a?(showMessageTheme2(0,i.message,"",!0),validEndInvalidField(!1,"email"),validEndInvalidField(!1,"password"),validEndInvalidField(!1,"captcha")):(showMessage(!0,i.message),validEndInvalidField(!1,"email"),validEndInvalidField(!1,"password"),validEndInvalidField(!1,"captcha")),customLoader(!1);else{customLoader(!0),UNIQUEUUID=i.uniqueId;var s=i.redirectUrl;console.log("redirectUrl :: "+s),s.startsWith("http")?"FRESH"==o?(showMessage(!0,i.message),goAhead(s,i.userLoginHash)):"CONTINUE"==o&&(customLoader(!1),"STUDENT"==a?showMessageTheme2(1,i.message,"",!0):showMessage(!0,i.message),$("#sessionOutPermission").modal("hide")):showMessage(!1,s),validEndInvalidField(!0,"email"),validEndInvalidField(!0,"password"),validEndInvalidField(!0,"captcha")}return $("#"+e+" #login").prop("disabled",!1),!1},error:function(a){$("#"+e+" #login").prop("disabled",!1)}})}