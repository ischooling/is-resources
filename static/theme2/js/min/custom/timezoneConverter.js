var DATE_UTC="YYYY-MM-DD",TIME_UTC="HH:mm:ss",DATETIME_UTC_FORMATTER=DATE_UTC+" "+TIME_UTC,TIME_FORMATTER="hh:mm:ss a",DISPLAY_TIME_FORMATTER="hh:mm A",DATETIME_FORMATTER="YYYY-MM-DD "+TIME_FORMATTER,DISPLAY_DATE_FORMATTER="DD MMM, YYYY",DISPLAY_DATE_FORMATTER_COMPLETE="ddd, DD MMM, YYYY",DISPLAY_DATETIME_FORMATTER=DISPLAY_DATE_FORMATTER_COMPLETE+" "+DISPLAY_TIME_FORMATTER,DISPLAY_DATETIME_FORMATTER_WITHOUT_DAY=DISPLAY_DATE_FORMATTER+" "+DISPLAY_TIME_FORMATTER,DISPLAY_DATE_ONLY="MMM D, YYYY",DISPLAY_DATE_AND_TIME=DISPLAY_DATE_ONLY+" "+DISPLAY_TIME_FORMATTER,momentGlobal="",baseTimezone="";function renderTimzoneConverter(){momentGlobal=getUTCTime(),$("#timeZoneCalCulatorModal").remove();var e='<div class="modal fade fade-scale py-3" id="timeZoneCalCulatorModal" tabindex="-1" data-backdrop="static"><div class="modal-dialog modal-lg h-100 m-auto p-0" role="document"><div class="modal-content text-center h-100"><div class="modal-header pt-2 pb-2 bg-primary text-white justify-content-center" style="'+("theme1"==tt?"min-height:inherit !important":"")+'"><h5 class="heading" id="warningMessage">Time Zone Converter</h5><button type="button" class="close text-white" data-dismiss="modal"aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body overflow-auto" style="'+("theme1"==tt?"overflow-y:auto !important":"")+'"><div class="full mt-3"><ul class="current-timezone-list-ul m-0 p-0"></ul></div><div class="w-100 search-country-wrapper position-relative" style="'+("theme1"==tt?"float:left":"")+'"><div class="d-flex flex-wrap"><span class="w-100 d-flex flex-sm-nowrap flex-wrap justify-content-end align-items-center" style="gap:10px"><input type="text" class="form-control" id="sarchByValue" name="sarchByValue" style="width: 100%;" placeholder="Search for a city..."><a href="javascript:void(0)" class="btn btn-primary '+("theme1"==tt?"btn-sm":"btn-lg")+'" onclick="renderSearchData()">Search</a></span></div><div class="w-100 position-relative"><ul class="m-0 p-0 border overflow-y-auto position-absolute w-100 bg-white" id="countryStateCitySuggestionList" style="display:none;max-height:250px;top:0;left:0;z-index:1;'+("theme1"==tt?"overflow-y:auto !important":"")+'"></ul></div></div><div class="full"><hr/></div><div class="w-100" id="currentTimeOfUTC-and-removeAll-wrapper" style="display:none; '+("theme1"==tt?"float:left":"")+'"><div class="d-flex justify-content-between"><a href="javascript:void(0)" id="currentTimeOfUTC" class="btn btn-primary '+("theme1"==tt?"btn-sm":"")+'" onClick="renderCurrentTimeOfUTC()">Current Time</a><span id="currentTimeOfUTCValue" style="display:none;"></span><a href="javascript:void(0)" class="btn btn-outline-danger '+("theme1"==tt?"btn-sm":"")+'" id="removeAllTimezoneBtn" onclick="removeAllTimeZone(\'timezone-list-ul\')"><i class="fa fa-trash mr-1"></i>Remove All</a></div></div><div class="full mt-3"><ul class="timezone-list-ul m-0 p-0"></ul></div></div></div></div></div>';$("body").append(e),renderCurrentTimeOfUTC(),getCurrentTimezoneContent(),$("#timeZoneCalCulatorModal").modal({backdrop:"static",keyboard:!1})}function renderSingleTimezone(e){var t=$("#countryStateCitySuggestionList");t.empty(),e.length?e.forEach((function(e){t.append(countryStateCitySuggestionList(e))})):t.append('<li style="padding: 5px; border-bottom: 1px solid #ccc;">No results found</li>'),t.show(),customLoader(!1)}function countryStateCitySuggestionList(e){return html='<li class="border-bottom bg-light-gray px-2 bg-light-primary" id="'+e.iso2+'-TIMEZONE"><a href="javascript:void(0)" class="d-flex flex-wrap" onclick="selectTimeZone(event,\''+e.location.lng+"','"+e.location.lat+"','"+btoa(e.formatted_address)+"','"+e.iso2+'\')"><div class="satate-and-city"><span class="state-and-country full text-dark text-left ml-2">'+e.formatted_address+'</span></div><span class="ml-auto"><img src="'+PATH_FOLDER_FONT2+e.iso2+'.svg"/></span></a></li>',html}function selectTimeZone(e,t,n,a,o){$("#countryStateCitySuggestionList").hide(),$(".timezone-list-ul").append(singleTimezone(t,n,a,o,!0)),$(".date-picker").datepicker({format:"D, d M, yyyy"}),$("#sarchByValue").val(""),renderAllTimezone(),$("#currentTimeOfUTC-and-removeAll-wrapper").show()}function singleTimezone(e,t,n,a,o){var i=getTimezoneByLatLon(e,t).timeZoneId,r=(n=atob(n)).replaceAll("(","_").replaceAll(")","_").replaceAll(" ","_").replaceAll(",","_").replaceAll("'","_").replaceAll("Ê»","_")+"-TIMEZONE";$("#"+r).remove();var l=convertUTCToTimezoneAsObject(momentGlobal,DATETIME_FORMATTER,i);return'<li class="timezone-list-li border py-2 mb-2 card" id="'+r+'" timezone='+l.timezone+'><div class="d-flex flex-wrap"><div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 text-left mb-2"><div class="d-flex align-items-center flex-wrap justify-content-center justify-content-sm-start "><span class="flag d-inline-block mr-2" style="background:url('+PATH_FOLDER_FONT2+a+'.svg);height: 38px;width: 50px;background-size: 50px 38px;"></span><span class="d-inline-block col-sm-auto col-12 p-0 mt-sm-0 mt-2"><h4 class="m-0 font-weight-semi-bold  font-size-lg"><label class="city-name text-primary m-0">'+n+'</label></h4><hr class="my-1"/><div class="country-UTC">UTC '+l.offset+" "+l.aheadBehind+"</div></span></div></div>"+renderSingleContent(r,o)+"</div></li>"}function renderAllTimezone(){$(".timezone-list-li").each((function(){var e=$(this).attr("timezone");if(null!=e){var t=convertUTCToTimezoneAsObject(momentGlobal,DATETIME_FORMATTER,e);$(this).find(".date").val(t.date).datepicker("update"),$(this).find(".hoursc").val(t.hours),$(this).find(".mins").val(t.mins),$(this).find(".ampm").val(t.ampm)}}))}function renderSingleContent(e,t){var n='<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 text-left mb-1"><div class="singleDateAndTime d-flex align-items-center h-100 flex-md-nowrap flex-wrap justify-content-end" style="gap:10px"><span class="country-date w-100"><input name="date" id="date" type="text" class="date date-picker form-control font-weight-semi-bold text-primary" value="" onchange="updateTime(this)"></span><span class="country-time d-flex col-sm-6 p-0" style="min-width: 140px; gap:10px"><select name="hour" id="hour" class="hoursc form-control" onchange="updateTime(this)">'+getHourMinsContent(1,12,"")+'</select><select name="mins" id="mins" class="mins form-control" onchange="updateTime(this)">'+getHourMinsContent(0,59,"")+'</select><select name="ampm" id="ampm" class="ampm form-control" onchange="updateTime(this)">'+getAmPm("")+"</select></span>";return t&&(n+='<a href="javascript:void(0)" class="btn btn-outline-danger '+("theme1"==tt?"btn-sm":"")+'" onclick="removeSingleTimeZone(\''+e+'\')"><i class="fa fa-trash"></i></a>'),n+="</div></div>"}function getHourMinsContent(e,t,n){for(var a="",o=e;o<=t;o++){var i=o>9?o:"0"+o;a+='<option value="'+i+'" '+(i==n?"selected":"")+">"+i+"</option>"}return a}function removeSingleTimeZone(e){$("#"+e).remove(),$(".timezone-list-ul li").length>=1?$("#currentTimeOfUTC-and-removeAll-wrapper").show():$("#currentTimeOfUTC-and-removeAll-wrapper").hide()}function getAmPm(e){return'<option value="am" '+("am"==e?"selected":"")+'>AM</option><option value="pm" '+("pm"==e?"selected":"")+">PM</option>"}function removeAllTimeZone(e){$("."+e).html(""),$("#currentTimeOfUTC-and-removeAll-wrapper").hide()}function renderSearchData(){var e=$("#sarchByValue").val().toLowerCase();""!=e&&e.length>=3?(customLoader(!0),renderSingleTimezone(searchFromJSON(e))):e.length<1&&(showMessageTheme2(0,"City name is required"),$("#countryStateCitySuggestionList").html(""))}function updateTime(e){var t=$(e).attr("id"),n="",a="",o="",i="",r=$(e).parent().parent().parent().parent().parent().attr("timezone");"date"==t?(n=$(e).val(),a=$(e).parent().parent().find(".hoursc").val(),o=$(e).parent().parent().find(".mins").val(),i=$(e).parent().parent().find(".ampm").val()):"hour"==t?(n=$(e).parent().parent().find(".date").val(),a=$(e).val(),o=$(e).parent().find(".mins").val(),i=$(e).parent().find(".ampm").val()):"mins"==t?(n=$(e).parent().parent().find(".date").val(),a=$(e).parent().find(".hoursc").val(),o=$(e).val(),i=$(e).parent().find(".ampm").val()):"ampm"==t&&(n=$(e).parent().parent().find(".date").val(),a=$(e).parent().find(".hoursc").val(),o=$(e).parent().find(".mins").val(),i=$(e).val());var l=n+" "+a+":"+o+":00 "+i;m=convertLocalToUTCAs(l,DISPLAY_DATETIME_FORMATTER,r),momentGlobal=m.format(DATETIME_FORMATTER),$("#currentTimeOfUTCValue").html(momentGlobal);var s=moment.tz(l,DISPLAY_DATETIME_FORMATTER,r);offset=s.format("Z"),$(e).parent().parent().parent().parent().parent().find(".country-UTC").text("UTC "+offset),renderAllTimezone()}function convertUTCToTimezoneAsObject(e,t,n){var a=convertUTCToTimezoneAs(e,t,n),o={};o.date=a.format(DISPLAY_DATE_FORMATTER),o.hours=a.format("hh"),o.mins=a.format("mm"),o.sec=a.format("ss"),o.ampm=a.format("a"),o.offset=a.format("Z"),o.timezone=a.tz();var i=convertUTCToTimezoneAs(e,t,baseTimezone).diff(a,"minutes");return o.aheadBehind=aheadBehind(i),o}function convertUTCToTimezone(e,t,n){return convertUTCToTimezoneAs(e,t,n).format(DATETIME_FORMATTER)}function convertUTCToTimezoneAs(e,t,n){return moment.utc(e,t).tz(n)}function convertLocalToUTC(e,t,n){return convertLocalToUTCAs(e,t,n).format(DATETIME_FORMATTER)}function convertLocalToUTCWithFormat(e,t,n){return convertLocalToUTCAs(e,DATETIME_UTC_FORMATTER,t).format(n)}function convertLocalToUTCAs(e,t,n){return moment.tz(e,t,n).utc()}function convertTime(e,t,n,a,o,i){var r=moment.utc(moment.tz(e,t,n).utc()).tz(a),l={};l.date=r.format(o),l.time=r.format(i),l.hours=r.format("hh"),l.mins=r.format("mm"),l.sec=r.format("ss"),l.ampm=r.format("a"),l.offset=r.format("Z"),l.timezone=r.tz()}function convertU2L(e,t,n){return moment.utc(moment.tz(e,DATETIME_UTC_FORMATTER,"UTC").utc()).tz(t).format(n)}function convertDatetimeWithFormat(e,t,n,a){return moment.tz(e,t).clone().tz(n).format(a)}function getUTCTime(){return momentGlobal=moment().utc().format(DATETIME_FORMATTER).toString()}function renderCurrentTimeOfUTC(){getUTCTime(),$("#currentTimeOfUTCValue").html(momentGlobal),renderAllTimezone()}function searchFromJSON(e){return getCountriesStatesCities(e).results}function getDefaultLocation(){return getActualData()}function getCurrentTimezoneContent(){var e=getDefaultLocation();baseTimezone=e.timezone;var t=btoa(e.city+", "+e.country);$(".current-timezone-list-ul").append(singleTimezone(e.lon,e.lat,t,e.countryCode,!1)),$(".date-picker").datepicker({format:"D, d M, yyyy"}),renderAllTimezone()}function aheadBehind(e){if(0==e)return"";var t=" hour(s) ahead";return e<0&&(t=" hour(s) behind"),getHoursMins(e=Math.abs(e))+t}function getHoursMins(e){return Math.trunc(e/60)+":"+e%60}function getCountriesStatesCities(e){var t={},n={};return n.text=e,$.ajax({type:"POST",contentType:"application/json",url:getURLFor("country-state-city",""),data:JSON.stringify(n),dataType:"json",async:!1,success:function(e){t=e}}),t}function getTimezoneByLatLon(e,t){var n={},a={};return a.lng=e,a.lat=t,$.ajax({type:"POST",contentType:"application/json",url:getURLFor("timezone-by-lat-lon",""),data:JSON.stringify(a),dataType:"json",async:!1,success:function(e){n=e}}),n}$(document).mouseup((function(e){var t=$("#countryStateCitySuggestionList > li"),n=$("#sarchByValue");t.is(e.target)||0!==t.has(e.target).length||n.is(e.target)||0!==n.has(e.target).length||t.hide()}));