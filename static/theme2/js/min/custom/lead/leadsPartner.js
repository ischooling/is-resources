function editRow(e){$(e).parent().closest("tr").find(".edit-value").hide(),$(e).parent().closest("tr").find(".edit-value-element").show()}function cancelEitRow(e){$(e).parent().closest("tr").find(".edit-value").show(),$(e).parent().closest("tr").find(".edit-value-element").hide()}function bulkEdit(){$(".commissionTable").find(".edit-value").hide(),$(".commissionTable").find(".edit-value-element").show(),$(".bulk-update-and-cancel-btn").show(),$(".commissionTable > thead > tr > th:last-child, .commissionTable > tbody > tr > td:last-child").hide(),$(".commissionTable > thead > tr th:nth-last-child(2)").addClass("rounded-top-right-10"),$(".commissionTable tbody tr:nth-last-child(1) td:nth-last-child(2)").addClass("rounded-bottom-right-10")}function cancelEitAllRow(){$(".commissionTable").find(".edit-value").show(),$(".commissionTable").find(".edit-value-element").hide(),$(".bulk-update-and-cancel-btn").hide(),$(".commissionTable thead > tr th:last-child, .commissionTable tbody > tr td:last-child").show(),$(".commissionTable thead > tr th:nth-last-child(2)").removeClass("rounded-top-right-10"),$(".commissionTable tbody > tr:nth-last-child(1) td:nth-last-child(2)").removeClass("rounded-bottom-right-10")}function getRequestForSaveCommissionRate(e){var a={},t={};t.rawLeadId=$("#partnerUserB2BSaveForm #rawLeadId").val(),t.byPartnerType=$("#"+e+" #byPartnerType").val(),t.byPartnerValue=$("#"+e+" #byPartnerValue").val(),t.bySchoolType=$("#"+e+" #bySchoolType").val(),t.bySchoolValue=$("#"+e+" #bySchoolValue").val(),t.bySchoolPartnerType=$("#"+e+" #bySchoolPartnerType").val(),t.bySchoolPartnerValue=$("#"+e+" #bySchoolPartnerValue").val();var s=[];s.push($("#"+e+" #learningProgram").val()),t.learningPrograms=s;var n=$("#"+e+" #standardId").val().find((e=>"A"==e));if(null!=n||"A"==n||""==n){var o=$("#"+e+" #learningProgram").val();t.standardIds="A"==o?[0]:"ONE_TO_ONE_FLEX"==o?[19,9,10,20,21]:[11,12,13,14,15,16,1,2,3,4,5,6,7]}else t.standardIds=$("#"+e+" #standardId").val();t.enrollRange=$("#"+e+" #enrollRange").val(),t.startDate=$("#"+e+" #startDate").val(),t.endDate=null!=$("#"+e+" #endDate").val()?$("#"+e+" #endDate").val():"";var r={};return r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType=USER_ROLE,r.userId=USER_ID,a.authentication=r,a.commissionRate=t,a}function validateDiscountRate(e){return hideMessage(""),""==$("#"+e+" #discountType").val()?(showMessageTheme2(0,"Discount type required.","",!0),!1):""!=$("#"+e+" #discountValue").val()||(showMessageTheme2(0,"Discount required.","",!0),!1)}function saveDiscountRate(e){if(hideMessage(""),!validateDiscountRate(e))return!1;$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/save-discount-rate",data:JSON.stringify(getRequestForSaveDiscountRate(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!1):(getDiscountRate("saveDiscountRateForm"),showMessageTheme2(1,e.message,"",!0))},error:function(e){checkonlineOfflineStatus()}})}function getRequestForSaveDiscountRate(e){var a={};return a.rawLeadId=$("#partnerUserB2BSaveForm #rawLeadId").val(),a.discountType=$("#"+e+" #discountType").val(),a.discountValue=parseFloat($("#"+e+" #discountValue").val()).toFixed(2),a.userId=USER_ID,a}function fetchDiscountRate(e){var a={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/filter-discount-rate",data:JSON.stringify(getRequestForFilterDiscountRate(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!0):a=e},error:function(e){checkonlineOfflineStatus()}}),a}function getRequestForFilterDiscountRate(e){var a={};return a.rawLeadId=$("#partnerUserB2BSaveForm #rawLeadId").val(),a.userId=USER_ID,a}function validateCommissionRate(e){if(hideMessage(""),""==$("#"+e+" #byPartnerType").val())return showMessageTheme2(0,"Lead Provided By Partner type required.","",!0),!1;if(""==$("#"+e+" #byPartnerValue").val())return showMessageTheme2(0,"Commission rate required.","",!0),!1;if(""==$("#"+e+" #bySchoolType").val())return showMessageTheme2(0,"Lead Provided By IS required.","",!0),!1;if(""==$("#"+e+" #bySchoolValue").val())return showMessageTheme2(0,"Commission rate required.","",!0),!1;if(""==$("#"+e+" #bySchoolValue").val())return showMessageTheme2(0,"Commission rate required.","",!0),!1;if(""==$("#"+e+" #learningProgram").val())return showMessageTheme2(0,"Learning program is required","",!0),!1;if("A"==$("#"+e+" #learningProgram").val());else if(""==$("#"+e+" #standardId").val())return showMessageTheme2(0,"Grade is required","",!0),!1;return""!=$("#"+e+" #startDate").val()||(showMessageTheme2(0,"Applicable From Date required.","",!0),!1)}function saveCommissionRate(e){if(hideMessage(""),!validateCommissionRate(e))return!1;$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/save-commission-rate",data:JSON.stringify(getRequestForSaveCommissionRate(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!1):showMessageTheme2(1,e.message,"",!0)},error:function(e){checkonlineOfflineStatus()}})}function getRequestForUpdateCommissionRate(e,a){var t={},s=[];$("table.commissionTable > tbody > tr").each((function(e){var t=$(this),n=t.attr("commissionRateId"),o=!0;if(""!=a&&a!=n&&(o=!1),o){var r={id:n,byPartnerType:t.find("#byPartnerType_"+n).val(),byPartnerValue:t.find("#byPartnerValue_"+n).val(),bySchoolType:t.find("#bySchoolType_"+n).val(),bySchoolValue:t.find("#bySchoolValue_"+n).val(),bySchoolPartnerType:t.find("#bySchoolPartnerType_"+n).val(),bySchoolPartnerValue:null!=t.find("#bySchoolPartnerValue_"+n).val()?t.find("#bySchoolPartnerValue_"+n).val():0,enrollRange:t.find("#enrollRange_"+n).val(),startDate:t.find("#startDate_"+n).val(),endDate:t.find("#endDate_"+n).val()};s.push(r)}}));var n={};return n.hash=getHash(),n.schoolId=SCHOOL_ID,n.schoolUUID=SCHOOL_UUID,n.userType=USER_ROLE,n.userId=USER_ID,t.authentication=n,t.commissionRates=s,t}function validateUpdateCommissionRate(e){return hideMessage(""),$("table.commissionTable > tbody > tr").each((function(e){})),!0}function updateCommissionRate(e,a){if(hideMessage(""),!validateUpdateCommissionRate(e))return!1;$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/update-commission-rate",data:JSON.stringify(getRequestForUpdateCommissionRate(e,a)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!1):showMessageTheme2(1,e.message,"",!0)},error:function(e){checkonlineOfflineStatus()}})}function resetCommissionRate(e){$("#"+e+" #byPartnerType").val("P"),$("#"+e+" #byPartnerValue").val(""),$("#"+e+" #bySchoolType").val("P"),$("#"+e+" #bySchoolValue").val(""),$("#"+e+" #learningProgram").val("A").trigger("change"),$("#"+e+" #standardId").val("").trigger("change"),$("#"+e+" #startDate").val("").datepicker("update"),$("#"+e+" #endDate").val("").datepicker("update"),$("#"+e+" #enrollRange").val("0").trigger("change")}function resetFilterByForm(e){$("#"+e+" #learningProgramFilter").val("").trigger("change"),$("#"+e+" #standardIdFilter").val("").trigger("change")}function getRequestForFilterCommissionRate(e){var a={},t={};t.rawLeadId=$("#partnerUserB2BSaveForm #rawLeadId").val();var s=[];s.push($("#"+e+" #learningProgramFilter").val()),t.learningPrograms=s;var n=$("#"+e+" #standardIdFilter").val().find((e=>"A"==e));if(null!=n||"A"==n||""==n){var o=$("#"+e+" #learningProgramFilter").val();t.standardIds="A"==o?[0]:"ONE_TO_ONE_FLEX"==o?[19,9,10,20,21]:"BATCH"==o?[11,12,13,14,15,16,1,2,3,4,5,6,7]:[11,12,13,14,15,16,1,2,3,4,5,6,7,8]}else t.standardIds=$("#"+e+" #standardIdFilter").val();var r={};return r.hash=getHash(),r.schoolId=SCHOOL_ID,r.schoolUUID=SCHOOL_UUID,r.userType=USER_ROLE,r.userId=USER_ID,a.authentication=r,a.filter=t,a}function fetchCommissionRate(e){if(0==$("#"+e+" #learningProgramFilter").val().length)return showMessageTheme2(0,"Select Learning program","",!0),!1;if("A"==$("#"+e+" #learningProgramFilter").val());else if(0==$("#"+e+" #standardIdFilter").val().length)return showMessageTheme2(0,"Select Grade","",!0),!1;var a={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/filter-commission-rate",data:JSON.stringify(getRequestForFilterCommissionRate(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!0):(a=e,showMessageTheme2(1,"Commission rate based on filter criteria","",!0))},error:function(e){checkonlineOfflineStatus()}}),a}function getRequestForCommissionRateLogs(e){var a={},t={};t.parentId=e;var s={};return s.hash=getHash(),s.schoolId=SCHOOL_ID,s.schoolUUID=SCHOOL_UUID,s.userType=USER_ROLE,s.userId=USER_ID,a.authentication=s,a.filter=t,a}function commissionRateLogs(e){var a={};return $.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/dashboard/commission-rate-logs",data:JSON.stringify(getRequestForCommissionRateLogs(e)),dataType:"json",async:!1,global:!1,success:function(e){"0"==e.status||"2"==e.status||"3"==e.status?"3"==e.status?redirectLoginPage():showMessageTheme2(0,e.message,"",!0):(a=e,showMessageTheme2(1,"Commission rate log","",!0))},error:function(e){checkonlineOfflineStatus()}}),a}function customModalShow(e,a){$(e).css("z-index",a),$(e).find(".modal-dialog").css("margin-top",60*$(".right-slide-modal:visible").length),$(e).find(".modal-content").css("height","calc(100% - "+60*$(".right-slide-modal:visible").length+"px)"),$(".modal-backdrop").not(".modal-stack").css("z-index",a-1).addClass("modal-stack "+(a-1))}function getAllTimeZoneForPartner(e){$("#"+e).append('<option  value="">Select Timezone</option>'),$.ajax({type:"POST",contentType:"application/json",url:getURLForCommon("masters"),data:JSON.stringify(getRequestForMaster("","TIMEZONE-LIST","")),dataType:"json",success:function(a){"0"==a.status||"2"==a.status||$.each(a.mastersData.countryTimeZones,(function(a,t){$("#"+e).append('<option custom_timezone_id="'+t.key+'" value="'+t.value+'">('+t.extra+") - "+t.extra1+"/"+t.extra3+"</option>")}))}})}$(document).on("show.bs.modal",(function(e){var a=$(e.target);a.hasClass("right-slide-modal")&&customModalShow(a,1050+20*$(".modal:visible").length)})),$(document).on("hidden.bs.modal",".right-slide-modal",(function(){var e=$(this).css("z-index")-1;$("body").find("."+e).remove()}));