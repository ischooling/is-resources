function validateRequestForSignupStudent(){if(""==$("#signupStage1 #firstName").val())return showMessage(0,"First Name is required"),!1;if(""==$("#signupStage1 #lastName").val().trim())return showMessage(0,"Last Name is required"),!1;if(""==$("#signupStage1 #applyStandardId").val().trim())return showMessage(0,"Grade is required"),!1;if(""==$("#signupStage1 #dob").val())return showMessage(0,"Please choose your Date of Birth."),!1;var t=getDateInDateFormat($("#signupStage1 #dob").val()),e=(t=changeDateFormat(t,"mm-dd-yyyy")).split("-");if(t=t.split("-").length,3!=parseInt(t)||parseInt(e[1])>31||parseInt(e[0])>12)return showMessage(0,"Date of Birth is not valid"),!1;if(M.countAgeNew(e[1],e[0],e[2])<12.927800723458905||$("#signupStage1 #checkAge").prop("checked",!1),0==$("#signupStage1 #gender").val()||""==$("#signupStage1 #gender").val())return showMessage(0,"Gender is required"),!1;if("DUAL_DIPLOMA"==$("#learingProgramHeader").attr("val")){if(""==$("#signupStage1 #studyingSchoolName").val())return showMessage(0,"Student's School Name is required"),!1;if(0==$("#signupStage1 #studyingGradeId").val()||""==$("#signupStage1 #studyingGradeId").val())return showMessage(0,"Student Current Grade is required"),!1;if(0==$("#signupStage1 #countryIdOfSchool").val()||""==$("#signupStage1 #countryIdOfSchool").val())return showMessage(0,"Country of School is required"),!1}else{if(""==$("#signupStage1 #communicationEmail").val())return showMessage(0,"Email is required"),!1;if(""==$("#signupStage1 #contactNumber").val())return showMessage(0,"Phone No is required"),!1;if(0==$("#signupStage1 #nationality").val()||""==$("#signupStage1 #nationality").val())return showMessage(0,"Nationality is required"),!1}return 0==$("#signupStage1 #countryId").val()||""==$("#signupStage1 #countryId").val()?(showMessage(0,"Country is required"),!1):0==$("#signupStage1 #stateId").val()||""==$("#signupStage1 #stateId").val()?(showMessage(0,"State/Province is required"),!1):0!=$("#signupStage1 #cityId").val()&&""!=$("#signupStage1 #cityId").val()||(showMessage(0,"City is required"),!1)}function callForSignupStudentDetails(){if(hideMessage(""),!validateRequestForSignupStudent())return!1;var t=getDateInDateFormat($("#signupStage1 #dob").val()),e=(t=changeDateFormat(t,"mm-dd-yyyy")).split("-");if(t=t.split("-").length,3!=parseInt(t)||parseInt(e[1])>31||parseInt(e[0])>12)return showMessage(0,"Date of Birth is not valid"),!1;var s=29.941173;if(s=39==$("#courseProviderId").val()?60:30,M.countAgeNew(e[1],e[0],e[2])>s)return showMessage(!1,"Age of student should not be more then "+s+" years"),!1;setActiveStep(2),showSkeleton(!0,"step2"),$(".prev-btn, .next-btn").addClass("disabled"),$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/student/enrollment/save-student-details",data:JSON.stringify(getRequestForStudent()),dataType:"json",async:!0,global:!1,success:function(t){"0"==t.status||"2"==t.status||"3"==t.status?"3"==t.status?redirectLoginPage():"ELIGIBLE_CUSTOME_PLAN"==t.statusCode||"REDIRECT_TO_DASHBOOARD"==t.statusCode?window.location.reload():(showMessage(!1,t.message),setActiveStep(1)):(showMessage(1,"Student Details Updated.","",!0),callForParentSelection())},error:function(t){checkonlineOfflineStatus()}})}function getRequestForStudent(){var t={},e={},s={themeType:"theme2"};s.firstName=$("#signupStage1 #firstName").val(),s.middleName=$("#signupStage1 #middleName").val(),s.lastName=$("#signupStage1 #lastName").val();var a=getDateInDateFormat($("#signupStage1 #dob").val());return a=changeDateFormat(a,"mm-dd-yyyy"),s.dob=a,s.gender=$("#signupStage1 #gender").val(),s.countryId=$("#signupStage1 #countryId").val(),s.stateId=$("#signupStage1 #stateId").val(),s.cityId=$("#signupStage1 #cityId").val(),s.standardId=""==$("#signupStage1 #applyStandardId").val()?null:$("#signupStage1 #applyStandardId").val(),s.communicationEmail=$("#signupStage1 #communicationEmail").val(),s.nationality=$("#signupStage1 #nationality").val(),s.countryCode=$("#signupStage1 #countryDailCode").val(),s.countryIsdCode=$("#signupStage1 #countryIsd").val(),s.contactNumber=$("#signupStage1 #contactNumber").val(),"DUAL_DIPLOMA"==$("#learingProgramHeader").attr("val")&&(s.studyingSchoolName=$("#signupStage1 #studyingSchoolName").val(),s.studyingGradeId=$("#signupStage1 #studyingGradeId").val(),s.countryIdOfSchool=$("#signupStage1 #countryIdOfSchool").val()),s.studyCenter=SCHOOL_ID,e.hash=getHash(),e.schoolId=SCHOOL_ID,e.schoolUUID=SCHOOL_UUID,e.userType="STUDENT",e.userId=$("#signupStage1 #userId").val(),t.authentication=e,t.signupStudent=s,t}function displaySection(t){hideMessage(""),setActiveStep(t)}function calculateAge(){$("#signupStage1 #dob").removeClass("is-Empty");var t=$("#signupStage1 #dob").val().split("-");return!(M.countAgeNew(t[1],t[0],t[2])>29.941173)||(showMessage(!1,"Age of student should not be more then 30 years"),!0)}function maxAge(t,e){""==t?max_age=30:"ONE_TO_ONE"==e||"BATCH"==e?$.ajax({type:"POST",url:getURLForHTML("student",t+"/"+e),dataType:"json",contentType:"json",async:!1,success:function(t){return max_age=t.maxAge,!0}}):max_age=30}function dobInitalize(t,e,s){var a=new Date,i=new Date;"0"==$("#applyStandardId").val()?$("#dob").attr("disabled",!0):$("#dob").attr("disabled",!1),max_age=39==s?60:30,i.setFullYear(a.getFullYear()-2),a.setFullYear(a.getFullYear()-max_age),e&&$("#dob").val(""),$("#dob").datepicker("remove"),$("#dob").datepicker({autoclose:!0,format:"M dd, yyyy",startDate:a,endDate:i}).on("changeDate",(function(){$("#dob").valid(),calculateAge("signupStage1")}))}function getStepsMessage(t){html="",0==t||1==t?$("#stepsMessage").html("Takes less than 1 minute to complete this step"):2==t?$("#stepsMessage").html("Takes less than 2 minutes to complete this step"):$("#stepsMessage").html("Takes less than 1 minute to complete this step")}function getRequestForStudentSelection(){var t={};return t.userId=USER_ID,t}function callForStudentSelection(){showSkeleton(!0,"step1"),$.ajax({type:"POST",contentType:"application/json",url:BASE_URL+CONTEXT_PATH+SCHOOL_UUID+"/student/enrollment/get-student-details",data:JSON.stringify(getRequestForStudentSelection()),dataType:"json",async:!0,global:!1,success:function(t){"0"==t.status||"2"==t.status||"3"==t.status?"3"==t.status?redirectLoginPage():"ELIGIBLE_CUSTOME_PLAN"==t.statusCode||"REDIRECT_TO_DASHBOOARD"==t.statusCode?window.location.reload():showMessage(!1,t.message):(renderStudentDetails(t),$(".step-1-skeleton").hide(),$("#signupStage1").show())},error:function(t){checkonlineOfflineStatus()}})}function formValdate(t,e,s){for(var a=0;a<e.length;a++){var i=$("#"+t+" #"+e[a]).attr("type");""!=$("#"+t+" #"+e[a]).val()&&"checkbox"!=i&&"tel"!=i?validEndInvalidField(!0,e[a]):"checkbox"==i?$("#"+t+" #"+e[a]).is(":checked")?validEndInvalidField(!0,e[a]):validEndInvalidField(null,e[a]):"tel"==i?0==$("#"+t+" #"+e[a]).val().length?validEndInvalidField(null,e[a]):$("#"+t+" #"+e[a]).val().length<3&&$("#"+t+" #"+e[a]).val().length>0?validEndInvalidField(!1,e[a]):validEndInvalidField(!0,e[a]):validEndInvalidField(!1,e[a])}for(var n=0;n<s.length;n++){var l=$("#"+t+" #"+s[n]).attr("type");""!=$("#"+t+" #"+s[n]).val()&&"checkbox"!=l&&"tel"!=l?validEndInvalidField(!0,s[n]):"checkbox"==l?$("#"+t+" #"+s[n]).is(":checked")?validEndInvalidField(!0,s[n]):validEndInvalidField(null,s[n]):"tel"==l?0==$("#"+t+" #"+s[n]).val().length?validEndInvalidField(null,s[n]):$("#"+t+" #"+s[n]).val().length<3&&$("#"+t+" #"+s[n]).val().length>0?validEndInvalidField(!1,s[n]):validEndInvalidField(!0,s[n]):validEndInvalidField(null,s[n])}}function setActiveStep(t){var e=$("#courseProviderId").val(),s=$(".step").length;$("body .content .step:nth-child("+t+")").siblings().removeClass("active-step"),$("body .content .step:nth-child("+t+")").addClass("active-step"),t>s||t<1?console.log("Invalid Step"):1==t?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"step-1.png"),39==e?$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"talking-deactive.png"):$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"step-2-deactive.png"),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4-deactive.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png"),$(".prev-btn").css({visibility:"visible",opacity:"1"}),$(".step1, .step2, .step3, .step4").removeClass("done-step"),$(".prev-btn").css({visibility:"hidden",opacity:"0"}),$(".next-btn").show(),$(".finish-btn").hide()):2==t?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),39==e?$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"talking-active.png"):$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"step-2.png"),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4-deactive.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png"),$(".prev-btn").css({visibility:"visible",opacity:"1"}),$(".step1").addClass("done-step"),$(".step2, .step3, .step4").removeClass("done-step"),$(".next-btn").show(),$(".finish-btn").hide()):3==t?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png"),$(".prev-btn").css({visibility:"visible",opacity:"1"}),$(".step1, .step2").addClass("done-step"),$(".step3, .step4").removeClass("done-step"),$(".next-btn").show(),$(".finish-btn").hide()):s==t?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5.png"),$(".prev-btn").css({visibility:"visible",opacity:"1"}),$(".step1, .step2").addClass("done-step"),$(".step4").removeClass("done-step"),$(".prev-btn").css({visibility:"visible",opacity:"1"}),$(".next-btn").hide(),$(".finish-btn").show()):($(".prev-btn").css({visibility:"visible",opacity:"1"}),$(".next-btn").show(),$(".finish-btn").hide())}function moveStep(t){var e=$("#courseProviderId").val(),s=$(".step").length,a=$(".step.active-step").index()+1;if(getSession()){if("prev"==t)if(a>1)var i=a-1;else i=a;else i=a;if(s==a)var n=a;else n=a+1;if("next"==t)if(1==i){if(!callForSignupStudentDetails("signupStage1")||!signupStage1Form.valid())return!1;callForSignupStudentDetails("signupStage1")}else if(2==i){if(!(callForSignUpParents("signupStage2")&&signupStage2Form.valid()&&validateRequestForSignupParent()))return!1;var l=$("#signupStage2 #parentEmailId").val();if(""!=l){var d=$("#userId").val(),r=$("#signupStage2 #studentId").val(),p=emailCheckForParent(l,"STUDENT",d,r);if(p);else if(null==p);else if(0==p)return!1}callForSignUpParents("signupStage2")}else if(3==i)if("Y"==SHOW_PAYMENT_OPTION){if(!$("#studentPaymentModal").is(":visible"))return callForPaymentModeSelection("signupStage3",""),!1}else{if(!validateRequestForPaymentModeSelection("signupStage3","signup"))return!1;choosePaymentOption()}1==i?(a!=i&&a>i?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"step-1.png"),39==e?$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"talking-deactive.png"):$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"step-2-deactive.png"),$(".step1").removeClass("done-step")):($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),39==e?$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"talking-active.png"):$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"step-2.png"),$(".step1").addClass("done-step")),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4-deactive.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png"),$(".actions > ul > li:first-child").attr("style","opacity:0"),$(".step2 .step3").removeClass("done-step")):2==i?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png"),$(".actions > ul > li:first-child").attr("style","opacity:1"),"next"==t?($(".step2").addClass("done-step"),$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png")):($(".step2").removeClass("done-step"),39==e?$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"talking-active.png"):$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"step-2.png"),$(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4-deactive.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png")),$(".step1").addClass("done-step"),$(".step3").removeClass("done-step")):3==i?($(".steps ul li:first-child a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(2) a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$("#studentPaymentModal").is(":visible")?($(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"complete-step.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5.png")):($(".steps ul li:nth-child(3) a img").attr("src",PATH_FOLDER_IMAGE2+"step-4.png"),$(".steps ul li:nth-child(4) a img").attr("src",PATH_FOLDER_IMAGE2+"step-5-deactive.png")),$(".actions > ul > li:first-child").attr("style","opacity:1"),$(".step1, .step2").addClass("done-step"),$(".step3").removeClass("done-step")):4==i&&$(".step1, .step2, .step3").addClass("done-step"),"next"==t?($("body .content .step:nth-child("+n+")").addClass("active-step"),$("body .content .step:nth-child("+a+")").removeClass("active-step"),n>1?$(".prev-btn").css({visibility:"visible",opacity:"1"}):$(".prev-btn").css({visibility:"hidden",opacity:"0"}),n==s&&($(".next-btn").hide(),$(".finish-btn").show())):"prev"==t&&($("body .content .step:nth-child("+i+")").addClass("active-step"),$("body .content .step:nth-child("+a+")").removeClass("active-step"),1==i?$(".prev-btn").css({visibility:"hidden",opacity:"0"}):3==i?"Y"==SHOW_PAYMENT_OPTION&&(!$("#studentPaymentModal").is(":visible")||$("#studentPaymentModal").length<1)&&callForPaymentModeSelection("signupStage3",""):$(".prev-btn").css({visibility:"visible",opacity:"1"}),n==s&&($(".next-btn").show(),$(".finish-btn").hide()))}else redirectLoginPage()}function calculateGradeLabel(){var t=$("#learningLabel").val();""!=t&&("B"==t?$("#signupStage1 #applyStandardId").val(11):"I"==t?$("#signupStage1 #applyStandardId").val(1):"A"==t&&$("#signupStage1 #applyStandardId").val(4))}$(document).ready((function(){$.validator.addMethod("letterRegex",(function(t,e){return this.optional(e)||/^[A-Z-a-z\s]+$/.test(t)}),"Field must contain only letters"),$.validator.addMethod("numberRegex",(function(t,e){return this.optional(e)||/^[0-9-]+$/.test(t)}),"Field must contain only Numerical and without space"),$.validator.addMethod("mobileRegex",(function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>0&&t.match(/^(1-?)?(\([0-9]\d{2}\)|[0-9]\d{0})-?[0-9]\d{1}-?\d{0,12}$/)}),"Please enter a valid phone number"),$.validator.addMethod("dateFormat",(function(t,e){var s=t.split("/");return!!(t.match(/^\d\d?\/\d\d?\/\d\d\d\d$/)&&parseInt(s[2])<=2002&&parseInt(s[2])>=1970&&parseInt(s[1])<=12)}),"Please enter a date in the format dd/mm/yyyy");var t=$(".step.active-step").index(),e=$(".step").length;0==t?$(".prev-btn").css({visibility:"hidden",opacity:"0"}):$(".prev-btn").css({visibility:"visible",opacity:"1"}),t+1==e?($(".next-btn").hide(),$(".finish-btn").show()):($(".next-btn").show(),$(".finish-btn").hide())}));