function GetURLParameter(e){for(var t=window.location.search.substring(1).split("&"),s=0;s<t.length;s++){var i=t[s].split("=");if(i[0]==e)return i[1]}return null}function getFeedbackQuestion(e,t,s,n,o,a,u,c,d){$.ajax({type:"POST",contentType:"application/json",url:getURLFor("review","get-question"),data:JSON.stringify(getRequestForFeedbackQuestion(e,t,s,n,o,a,u,d)),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("SUBMITTED"==e.responseStatus.status){var t="";t=(t+=' <section class="center-content"> <div class="row"><div class="col-12 text-center"><p class="thanku-emoji"><i class="em em-thumbsup"></i></p>')+'   <p class="thanks-reaction">'+e.responseStatus.message+"!</p></div> </div></section> ",$(".main-div").html(t)}else if("FAILED"==e.responseStatus.status);else for("student-feedback"==d&&window.setTimeout((function(){$("#"+c).modal("show")}),8020),""!=e.feedbackSubject&&null!=e.feedbackSubject&&$("#feedback_title").text(e.feedbackSubject),$("#feedbackId").val(a),$("#userName").val(u),$(".main-heading").text("We Would like to know your Feedback."),$("#feedbackbtn").css({display:"block"}),i=0;i<e.questionList.length;i++){var s="",n="";if("TEXTAREA"==e.questionList[i].elementName.toUpperCase()&&(s=(s=(s="")+' <div class="question" id="'+e.questionList[i].questionId+"-"+e.questionList[i].elementName.toUpperCase()+'"><div class="row"><div class="col-12"><p class=\'mb-1\'><strong>'+e.questionList[i].question+"</strong></p></div> </div></div>")+' <div class="row"><div class="col-12"><textarea rows="3" cols="" class="form-control" name="answer-'+e.questionList[i].questionId+'"></textarea></div></div><hr />',$(".textarea").append(s)),"RADIO"==e.questionList[i].elementName.toUpperCase()){for(n="",s=(s="")+' <div class="question" id="'+e.questionList[i].questionId+"-"+e.questionList[i].elementName.toUpperCase()+'"><div class="row"><div class="col-12"><p class=\'mb-1\'><strong>'+e.questionList[i].question+"</strong></p></div></div></div>",s+='<div class="row"><div class="col-12">',r=0;r<e.questionList[i].questionContentDTO.length;r++)n=n+' <div class="radio"><input id="radio-'+e.questionList[i].questionContentDTO[r].questionContentId+'" name="radio-answer-'+e.questionList[i].questionId+'" value="'+e.questionList[i].questionContentDTO[r].questionContentId+'" type="radio" ><label for="radio-'+e.questionList[i].questionContentDTO[r].questionContentId+'" class="radio-label">'+e.questionList[i].questionContentDTO[r].questionLable+"</label></div>";s=s+n+"</div></div><hr />",$(".radio-buttons").append(s)}if("CHECKBOX"==e.questionList[i].elementName.toUpperCase()){for(n="",s=(s="")+' <div class="question" id="'+e.questionList[i].questionId+"-"+e.questionList[i].elementName.toUpperCase()+'"><div class="row"><div class="col-12"><p class=\'mb-1\'><strong>'+e.questionList[i].question+"</strong></p></div></div></div>",s+=' <div class="row"><div class="col-12"><div class="checkbox-block"> ',r=0;r<e.questionList[i].questionContentDTO.length;r++)n=n+' <input class="checkbox-effect checkbox-effect-6" id="get-up-'+e.questionList[i].questionContentDTO[r].questionContentId+'" type="checkbox" value="'+e.questionList[i].questionContentDTO[r].questionContentId+'" name="checkbox-answer-'+e.questionList[i].questionId+'"/><label for="get-up-'+e.questionList[i].questionContentDTO[r].questionContentId+'">'+e.questionList[i].questionContentDTO[r].questionLable+"</label>";s=s+n+" </div></div></div><hr /> ",$(".checkbox").append(s)}"RATING"==e.questionList[i].elementName.toUpperCase()&&(n="",s=(s="")+' <div class="question" id="'+e.questionList[i].questionId+"-"+e.questionList[i].elementName.toUpperCase()+'"><div class="row"><div class="col-12"><p class=\'mb-1\'><strong>'+e.questionList[i].question+"</strong></p></div></div>",s+=' <div class="row align-items-center"><div class="col-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 d-flex align-items-center justify-content-end">',s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s+=' <div class="rate pr-0">')+' <input type="radio" id="star5-'+e.questionList[i].questionId+'" name="rate-'+e.questionList[i].questionId+'" value="5" onClick="selectRate(\'star5-'+e.questionList[i].questionId+"')\" />")+' <label for="star5-'+e.questionList[i].questionId+'" title="5 Stars">5 stars</label>')+' <input type="radio" id="star4-'+e.questionList[i].questionId+'" name="rate-'+e.questionList[i].questionId+'" value="4" onClick="selectRate(\'star4-'+e.questionList[i].questionId+"')\" />")+' <label for="star4-'+e.questionList[i].questionId+'" title="4 Stars">4 stars</label>')+' <input type="radio" id="star3-'+e.questionList[i].questionId+'" name="rate-'+e.questionList[i].questionId+'" value="3" onClick="selectRate(\'star3-'+e.questionList[i].questionId+"')\" />")+' <label for="star3-'+e.questionList[i].questionId+'" title="3 Stars">3 stars</label>')+' <input type="radio" id="star2-'+e.questionList[i].questionId+'" name="rate-'+e.questionList[i].questionId+'" value="2" onClick="selectRate(\'star2-'+e.questionList[i].questionId+"')\" />")+' <label for="star2-'+e.questionList[i].questionId+'" title="2 Stars">2 stars</label>')+' <input type="radio" id="star1-'+e.questionList[i].questionId+'" name="rate-'+e.questionList[i].questionId+'" value="1" onClick="selectRate(\'star1-'+e.questionList[i].questionId+"')\" />")+' <label for="star1-'+e.questionList[i].questionId+'" title="1 Star">1 star</label>')+' </div>&nbsp;<b class="selectedStar-'+e.questionList[i].questionId+'">0</b>&nbsp;<span><b>Rating</b><span></div></div></div>',$(".rating").append(s))}return!1},error:function(e){return!1}})}function getRequestForFeedbackQuestion(e,t,s,i,n,o,a,r){var u={};return u.schoolId=SCHOOL_ID,u.eventId=e,u.questionType=t,u.parentId=s,u.startLimit=i,u.endLimit=n,u.feedbackid=o,u.userId=a,u.callfrom=r,u}function selectRate(e){console.log(e);var t=$("#"+e).val();console.log(t);var s=e.split("-");$(".selectedStar-"+s[1]).text(t)}function saveFeedbackQuestion(){$.ajax({type:"POST",contentType:"application/json",url:getURLFor("review","submit-answers"),data:JSON.stringify(getRequestForSaveFeedback()),dataType:"json",cache:!1,timeout:6e5,success:function(e){if("SUCCESS"==e.responseStatus.status){var t="";t=(t+=' <section class="center-content"> <div class="row"><div class="col-12 text-center"><p class="thanku-emoji"><i class="em em-thumbsup"></i></p>')+'   <p class="thanks-reaction">'+e.responseStatus.message+"!</p></div> </div></section> ",$(".main-div").html(t),"student-feedback"==$("#callfrom").val()&&window.setTimeout((function(){$("#feedback_review").modal("hide")}),1e3)}return!1},error:function(e){return!1}})}function getRequestForSaveFeedback(){var e={},t=[],s={},i="",n="",o="";return e.userId=$("#userName").val(),e.feedbackId=$("#feedbackId").val(),e.callfrom=$("#callfrom").val(),$(".question").each((function(e){if(s={},(i=$(this).attr("id").split("-")).length>1?(n=i[0],o=i[1]):n=$(this).attr("id"),"RADIO"==o&&(s.questionId=n,s.answer=$("input[name='radio-answer-"+n+"']:checked").val()),"CHECKBOX"==o){s.questionId=n;var a="";$.each($("input[name='checkbox-answer-"+n+"']:checked"),(function(){a=a+$(this).val()+","})),s.answer=a}if("TEXTAREA"==o&&(s.questionId=n,s.answer=$("textarea[name='answer-"+n+"']").val()),"RATING"==o){s.questionId=n;var r=0;$("#star5-"+n).prop("checked")&&(r=5),$("#star4-"+n).prop("checked")&&(r=4),$("#star3-"+n).prop("checked")&&(r=3),$("#star2-"+n).prop("checked")&&(r=2),$("#star1-"+n).prop("checked")&&(r=1),s.answer=r}t.push(s)})),e.answers=t,console.log("answersRequest=> ",JSON.stringify(e)),e}function updateFeedback(e,t,s){$.ajax({type:"POST",contentType:"application/json",url:getURLFor("review","update-feedback"),data:JSON.stringify(getRequestForUpdateFeedback(e,t,s)),dataType:"json",cache:!1,timeout:6e5,success:function(e){return!1},error:function(e){return!1}})}function getRequestForUpdateFeedback(e,t,s){var i={};return i.userId=e,i.key=t,i.value=s,i}